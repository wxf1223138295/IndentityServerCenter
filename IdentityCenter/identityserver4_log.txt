2019-05-24 09:19:51.047 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2019-05-24 09:19:51.078 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2019-05-24 09:19:51.078 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2019-05-24 09:19:51.079 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2019-05-24 09:19:51.079 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2019-05-24 09:19:51.079 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2019-05-24 09:19:51.290 +08:00 [DBG] Starting grant removal
2019-05-24 09:19:51.515 +08:00 [DBG] Login Url: /Account/Login
2019-05-24 09:19:51.517 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-05-24 09:19:51.517 +08:00 [DBG] Logout Url: /Account/Logout
2019-05-24 09:19:51.518 +08:00 [DBG] ConsentUrl Url: /consent
2019-05-24 09:19:51.518 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2019-05-24 09:19:51.518 +08:00 [DBG] Error Url: /home/error
2019-05-24 09:19:51.518 +08:00 [DBG] Error Id Parameter: errorId
2019-05-24 09:19:55.225 +08:00 [INF] AuthenticationScheme: idsrv was challenged.
2019-05-24 09:20:02.664 +08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-05-24 09:20:02.670 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-05-24 09:20:02.670 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-05-24 09:20:02.674 +08:00 [DBG] Start discovery request
2019-05-24 09:20:04.235 +08:00 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-05-24 09:49:28.620 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2019-05-24 09:49:28.671 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2019-05-24 09:49:28.671 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2019-05-24 09:49:28.671 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2019-05-24 09:49:28.671 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2019-05-24 09:49:28.672 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2019-05-24 09:49:28.799 +08:00 [DBG] Starting grant removal
2019-05-24 09:49:29.026 +08:00 [DBG] Login Url: /Account/Login
2019-05-24 09:49:29.030 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-05-24 09:49:29.030 +08:00 [DBG] Logout Url: /Account/Logout
2019-05-24 09:49:29.030 +08:00 [DBG] ConsentUrl Url: /consent
2019-05-24 09:49:29.030 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2019-05-24 09:49:29.030 +08:00 [DBG] Error Url: /home/error
2019-05-24 09:49:29.030 +08:00 [DBG] Error Id Parameter: errorId
2019-05-27 10:24:03.162 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2019-05-27 10:24:03.195 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2019-05-27 10:24:03.195 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2019-05-27 10:24:03.195 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2019-05-27 10:24:03.196 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2019-05-27 10:24:03.196 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2019-05-27 10:24:03.373 +08:00 [DBG] Starting grant removal
2019-05-27 10:24:03.576 +08:00 [DBG] Login Url: /Account/Login
2019-05-27 10:24:03.579 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-05-27 10:24:03.579 +08:00 [DBG] Logout Url: /Account/Logout
2019-05-27 10:24:03.579 +08:00 [DBG] ConsentUrl Url: /consent
2019-05-27 10:24:03.579 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2019-05-27 10:24:03.579 +08:00 [DBG] Error Url: /home/error
2019-05-27 10:24:03.579 +08:00 [DBG] Error Id Parameter: errorId
2019-05-27 10:34:41.160 +08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-05-27 10:34:41.164 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-05-27 10:34:41.165 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-05-27 10:34:41.339 +08:00 [DBG] Start discovery request
2019-05-27 10:34:43.302 +08:00 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-05-27 10:34:43.505 +08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-05-27 10:34:43.505 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-05-27 10:34:43.506 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-05-27 10:34:43.506 +08:00 [DBG] Start discovery request
2019-05-27 10:34:44.126 +08:00 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-05-27 10:40:24.064 +08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-05-27 10:40:24.064 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-05-27 10:40:24.065 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-05-27 10:40:24.065 +08:00 [DBG] Start discovery request
2019-05-27 10:40:24.914 +08:00 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-05-27 10:40:25.153 +08:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-05-27 10:40:25.154 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-05-27 10:40:25.154 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-05-27 10:40:25.158 +08:00 [DBG] Start key discovery request
2019-05-27 10:40:35.474 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-05-27 10:40:35.484 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-05-27 10:40:35.484 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-05-27 10:40:35.492 +08:00 [DBG] Start token request.
2019-05-27 10:40:35.502 +08:00 [DBG] Start client validation
2019-05-27 10:40:35.510 +08:00 [DBG] Start parsing Basic Authentication secret
2019-05-27 10:40:35.514 +08:00 [DBG] Start parsing for secret in post body
2019-05-27 10:40:35.536 +08:00 [DBG] Parser found secret: PostBodySecretParser
2019-05-27 10:40:35.536 +08:00 [DBG] Secret id found: client
2019-05-27 10:40:36.926 +08:00 [DBG] client found in database: true
2019-05-27 10:40:36.936 +08:00 [DBG] client configuration validation for client client succeeded.
2019-05-27 10:40:36.947 +08:00 [DBG] No matching hashed secret found.
2019-05-27 10:40:36.947 +08:00 [DBG] Secret validators could not validate secret
2019-05-27 10:40:36.959 +08:00 [INF] {"ClientId":"client","Category":"Authentication","Name":"Client Authentication Failure","EventType":"Failure","Id":1011,"Message":"Invalid client secret","ActivityId":"0HLN299HE8JF9:00000003","TimeStamp":"2019-05-27T02:40:36.0000000Z","ProcessId":38348,"LocalIpAddress":"127.0.0.1:38278","RemoteIpAddress":"::1","$type":"ClientAuthenticationFailureEvent"}
2019-05-27 10:40:36.965 +08:00 [ERR] Client secret validation failed for client: client.
2019-05-27 11:21:10.263 +08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-05-27 11:21:10.266 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-05-27 11:21:10.266 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-05-27 11:21:10.267 +08:00 [DBG] Start discovery request
2019-05-27 11:21:11.166 +08:00 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-05-27 11:24:03.872 +08:00 [INF] Removing 0 grants
2019-05-27 11:25:09.270 +08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-05-27 11:25:09.272 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-05-27 11:25:09.272 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-05-27 11:25:09.272 +08:00 [DBG] Start discovery request
2019-05-27 11:25:09.984 +08:00 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-05-27 11:26:06.824 +08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-05-27 11:26:06.825 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-05-27 11:26:06.825 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-05-27 11:26:06.825 +08:00 [DBG] Start discovery request
2019-05-27 11:26:07.589 +08:00 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-05-27 11:27:37.903 +08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-05-27 11:27:37.904 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-05-27 11:27:37.904 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-05-27 11:27:37.904 +08:00 [DBG] Start discovery request
2019-05-27 11:27:38.672 +08:00 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-05-27 11:35:21.073 +08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-05-27 11:35:21.073 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-05-27 11:35:21.073 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-05-27 11:35:21.074 +08:00 [DBG] Start discovery request
2019-05-27 11:35:22.038 +08:00 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-05-27 11:35:22.153 +08:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-05-27 11:35:22.154 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-05-27 11:35:22.154 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-05-27 11:35:22.156 +08:00 [DBG] Start key discovery request
2019-05-27 11:35:23.129 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-05-27 11:35:23.130 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-05-27 11:35:23.131 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-05-27 11:35:23.131 +08:00 [DBG] Start token request.
2019-05-27 11:35:23.131 +08:00 [DBG] Start client validation
2019-05-27 11:35:23.131 +08:00 [DBG] Start parsing Basic Authentication secret
2019-05-27 11:35:23.131 +08:00 [DBG] Start parsing for secret in post body
2019-05-27 11:35:23.137 +08:00 [DBG] Parser found secret: PostBodySecretParser
2019-05-27 11:35:23.137 +08:00 [DBG] Secret id found: client
2019-05-27 11:35:24.377 +08:00 [DBG] client found in database: true
2019-05-27 11:35:24.377 +08:00 [DBG] client configuration validation for client client succeeded.
2019-05-27 11:35:24.377 +08:00 [DBG] No matching hashed secret found.
2019-05-27 11:35:24.378 +08:00 [DBG] Secret validators could not validate secret
2019-05-27 11:35:24.378 +08:00 [INF] {"ClientId":"client","Category":"Authentication","Name":"Client Authentication Failure","EventType":"Failure","Id":1011,"Message":"Invalid client secret","ActivityId":"0HLN299HE8JFD:00000003","TimeStamp":"2019-05-27T03:35:24.0000000Z","ProcessId":38348,"LocalIpAddress":"127.0.0.1:38278","RemoteIpAddress":"::1","$type":"ClientAuthenticationFailureEvent"}
2019-05-27 11:35:24.378 +08:00 [ERR] Client secret validation failed for client: client.
2019-05-27 11:37:02.626 +08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-05-27 11:37:02.627 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-05-27 11:37:02.627 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-05-27 11:37:02.627 +08:00 [DBG] Start discovery request
2019-05-27 11:37:03.458 +08:00 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-05-27 11:37:03.646 +08:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-05-27 11:37:03.646 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-05-27 11:37:03.646 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-05-27 11:37:03.646 +08:00 [DBG] Start key discovery request
2019-05-27 11:37:04.529 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-05-27 11:37:04.530 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-05-27 11:37:04.530 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-05-27 11:37:04.530 +08:00 [DBG] Start token request.
2019-05-27 11:37:04.531 +08:00 [DBG] Start client validation
2019-05-27 11:37:04.531 +08:00 [DBG] Start parsing Basic Authentication secret
2019-05-27 11:37:04.531 +08:00 [DBG] Start parsing for secret in post body
2019-05-27 11:37:04.531 +08:00 [DBG] Parser found secret: PostBodySecretParser
2019-05-27 11:37:04.531 +08:00 [DBG] Secret id found: client
2019-05-27 11:37:05.713 +08:00 [DBG] client found in database: true
2019-05-27 11:37:05.713 +08:00 [DBG] client configuration validation for client client succeeded.
2019-05-27 11:37:05.713 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-05-27 11:37:05.713 +08:00 [DBG] Client validation success
2019-05-27 11:37:05.714 +08:00 [INF] {"ClientId":"client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN299HE8JFE:00000003","TimeStamp":"2019-05-27T03:37:05.0000000Z","ProcessId":38348,"LocalIpAddress":"127.0.0.1:38278","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-05-27 11:37:05.722 +08:00 [DBG] Start token request validation
2019-05-27 11:37:05.732 +08:00 [DBG] Start client credentials token request validation
2019-05-27 11:37:05.901 +08:00 [DBG] Found [] identity scopes in database
2019-05-27 11:37:06.839 +08:00 [DBG] Found ["api1"] API scopes in database
2019-05-27 11:37:06.983 +08:00 [DBG] Found [] identity scopes in database
2019-05-27 11:37:07.598 +08:00 [DBG] Found ["api1"] API scopes in database
2019-05-27 11:37:07.601 +08:00 [DBG] client credentials token request validation success
2019-05-27 11:37:07.609 +08:00 [INF] Token request validation success
{"ClientId":"client","ClientName":"Client Credentials Client","GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"api1","client_id":"client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-05-27 11:37:07.636 +08:00 [DBG] Getting claims for access token for client: client
2019-05-27 11:37:07.784 +08:00 [INF] {"ClientId":"client","ClientName":"Client Credentials Client","RedirectUri":null,"Endpoint":"Token","SubjectId":null,"Scopes":"api1","GrantType":"client_credentials","Tokens":[{"TokenType":"access_token","TokenValue":"****YSeA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN299HE8JFE:00000003","TimeStamp":"2019-05-27T03:37:07.0000000Z","ProcessId":38348,"LocalIpAddress":"127.0.0.1:38278","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-27 11:37:07.786 +08:00 [DBG] Token request success.
2019-05-27 11:37:13.251 +08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-05-27 11:37:13.252 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-05-27 11:37:13.252 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-05-27 11:37:13.252 +08:00 [DBG] Start discovery request
2019-05-27 11:37:14.030 +08:00 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-05-27 11:37:14.284 +08:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-05-27 11:37:14.285 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-05-27 11:37:14.285 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-05-27 11:37:14.285 +08:00 [DBG] Start key discovery request
2019-05-27 11:38:15.305 +08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-05-27 11:38:15.306 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-05-27 11:38:15.306 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-05-27 11:38:15.306 +08:00 [DBG] Start discovery request
2019-05-27 11:38:16.101 +08:00 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-05-27 11:38:16.176 +08:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-05-27 11:38:16.178 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-05-27 11:38:16.178 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-05-27 11:38:16.179 +08:00 [DBG] Start key discovery request
2019-05-27 11:38:16.912 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-05-27 11:38:16.914 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-05-27 11:38:16.914 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-05-27 11:38:16.914 +08:00 [DBG] Start token request.
2019-05-27 11:38:16.914 +08:00 [DBG] Start client validation
2019-05-27 11:38:16.914 +08:00 [DBG] Start parsing Basic Authentication secret
2019-05-27 11:38:16.915 +08:00 [DBG] Start parsing for secret in post body
2019-05-27 11:38:16.919 +08:00 [DBG] Parser found secret: PostBodySecretParser
2019-05-27 11:38:16.919 +08:00 [DBG] Secret id found: client
2019-05-27 11:38:18.185 +08:00 [DBG] client found in database: true
2019-05-27 11:38:18.185 +08:00 [DBG] client configuration validation for client client succeeded.
2019-05-27 11:38:18.185 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-05-27 11:38:18.185 +08:00 [DBG] Client validation success
2019-05-27 11:38:18.185 +08:00 [INF] {"ClientId":"client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN299HE8JFF:00000003","TimeStamp":"2019-05-27T03:38:18.0000000Z","ProcessId":38348,"LocalIpAddress":"127.0.0.1:38278","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-05-27 11:38:18.185 +08:00 [DBG] Start token request validation
2019-05-27 11:38:18.186 +08:00 [DBG] Start client credentials token request validation
2019-05-27 11:38:18.317 +08:00 [DBG] Found [] identity scopes in database
2019-05-27 11:38:18.937 +08:00 [DBG] Found ["api1"] API scopes in database
2019-05-27 11:38:19.072 +08:00 [DBG] Found [] identity scopes in database
2019-05-27 11:38:19.688 +08:00 [DBG] Found ["api1"] API scopes in database
2019-05-27 11:38:19.688 +08:00 [DBG] client credentials token request validation success
2019-05-27 11:38:19.688 +08:00 [INF] Token request validation success
{"ClientId":"client","ClientName":"Client Credentials Client","GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"api1","client_id":"client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-05-27 11:38:19.688 +08:00 [DBG] Getting claims for access token for client: client
2019-05-27 11:38:19.691 +08:00 [INF] {"ClientId":"client","ClientName":"Client Credentials Client","RedirectUri":null,"Endpoint":"Token","SubjectId":null,"Scopes":"api1","GrantType":"client_credentials","Tokens":[{"TokenType":"access_token","TokenValue":"****AIiw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN299HE8JFF:00000003","TimeStamp":"2019-05-27T03:38:19.0000000Z","ProcessId":38348,"LocalIpAddress":"127.0.0.1:38278","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-27 11:38:19.691 +08:00 [DBG] Token request success.
2019-05-27 11:40:59.177 +08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-05-27 11:40:59.177 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-05-27 11:40:59.177 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-05-27 11:40:59.177 +08:00 [DBG] Start discovery request
2019-05-27 11:40:59.940 +08:00 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-05-27 11:41:00.018 +08:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-05-27 11:41:00.018 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-05-27 11:41:00.018 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-05-27 11:41:00.018 +08:00 [DBG] Start key discovery request
2019-05-27 11:41:00.083 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-05-27 11:41:00.083 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-05-27 11:41:00.084 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-05-27 11:41:00.084 +08:00 [DBG] Start token request.
2019-05-27 11:41:00.084 +08:00 [DBG] Start client validation
2019-05-27 11:41:00.084 +08:00 [DBG] Start parsing Basic Authentication secret
2019-05-27 11:41:00.084 +08:00 [DBG] Start parsing for secret in post body
2019-05-27 11:41:00.085 +08:00 [DBG] Parser found secret: PostBodySecretParser
2019-05-27 11:41:00.085 +08:00 [DBG] Secret id found: client
2019-05-27 11:41:01.307 +08:00 [DBG] client found in database: true
2019-05-27 11:41:01.307 +08:00 [DBG] client configuration validation for client client succeeded.
2019-05-27 11:41:01.307 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-05-27 11:41:01.307 +08:00 [DBG] Client validation success
2019-05-27 11:41:01.308 +08:00 [INF] {"ClientId":"client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN299HE8JFG:00000003","TimeStamp":"2019-05-27T03:41:01.0000000Z","ProcessId":38348,"LocalIpAddress":"127.0.0.1:38278","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-05-27 11:41:01.308 +08:00 [DBG] Start token request validation
2019-05-27 11:41:01.308 +08:00 [DBG] Start client credentials token request validation
2019-05-27 11:41:01.436 +08:00 [DBG] Found [] identity scopes in database
2019-05-27 11:41:02.058 +08:00 [DBG] Found ["api1"] API scopes in database
2019-05-27 11:41:02.190 +08:00 [DBG] Found [] identity scopes in database
2019-05-27 11:41:02.807 +08:00 [DBG] Found ["api1"] API scopes in database
2019-05-27 11:41:02.808 +08:00 [DBG] client credentials token request validation success
2019-05-27 11:41:02.808 +08:00 [INF] Token request validation success
{"ClientId":"client","ClientName":"Client Credentials Client","GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"api1","client_id":"client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-05-27 11:41:02.808 +08:00 [DBG] Getting claims for access token for client: client
2019-05-27 11:41:02.811 +08:00 [INF] {"ClientId":"client","ClientName":"Client Credentials Client","RedirectUri":null,"Endpoint":"Token","SubjectId":null,"Scopes":"api1","GrantType":"client_credentials","Tokens":[{"TokenType":"access_token","TokenValue":"****jpOw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN299HE8JFG:00000003","TimeStamp":"2019-05-27T03:41:02.0000000Z","ProcessId":38348,"LocalIpAddress":"127.0.0.1:38278","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-27 11:41:02.811 +08:00 [DBG] Token request success.
2019-05-27 11:41:32.605 +08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-05-27 11:41:32.605 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-05-27 11:41:32.605 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-05-27 11:41:32.606 +08:00 [DBG] Start discovery request
2019-05-27 11:41:33.415 +08:00 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-05-27 11:41:33.483 +08:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-05-27 11:41:33.484 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-05-27 11:41:33.484 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-05-27 11:41:33.484 +08:00 [DBG] Start key discovery request
2019-05-27 11:41:33.540 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-05-27 11:41:33.542 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-05-27 11:41:33.543 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-05-27 11:41:33.543 +08:00 [DBG] Start token request.
2019-05-27 11:41:33.543 +08:00 [DBG] Start client validation
2019-05-27 11:41:33.543 +08:00 [DBG] Start parsing Basic Authentication secret
2019-05-27 11:41:33.543 +08:00 [DBG] Start parsing for secret in post body
2019-05-27 11:41:33.544 +08:00 [DBG] Parser found secret: PostBodySecretParser
2019-05-27 11:41:33.544 +08:00 [DBG] Secret id found: client
2019-05-27 11:41:34.770 +08:00 [DBG] client found in database: true
2019-05-27 11:41:34.771 +08:00 [DBG] client configuration validation for client client succeeded.
2019-05-27 11:41:34.771 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-05-27 11:41:34.771 +08:00 [DBG] Client validation success
2019-05-27 11:41:34.771 +08:00 [INF] {"ClientId":"client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN299HE8JFG:00000006","TimeStamp":"2019-05-27T03:41:34.0000000Z","ProcessId":38348,"LocalIpAddress":"127.0.0.1:38278","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-05-27 11:41:34.771 +08:00 [DBG] Start token request validation
2019-05-27 11:41:34.771 +08:00 [DBG] Start client credentials token request validation
2019-05-27 11:41:34.907 +08:00 [DBG] Found [] identity scopes in database
2019-05-27 11:41:35.544 +08:00 [DBG] Found ["api1"] API scopes in database
2019-05-27 11:41:35.678 +08:00 [DBG] Found [] identity scopes in database
2019-05-27 11:41:36.304 +08:00 [DBG] Found ["api1"] API scopes in database
2019-05-27 11:41:36.305 +08:00 [DBG] client credentials token request validation success
2019-05-27 11:41:36.305 +08:00 [INF] Token request validation success
{"ClientId":"client","ClientName":"Client Credentials Client","GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"api1","client_id":"client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-05-27 11:41:36.305 +08:00 [DBG] Getting claims for access token for client: client
2019-05-27 11:41:36.308 +08:00 [INF] {"ClientId":"client","ClientName":"Client Credentials Client","RedirectUri":null,"Endpoint":"Token","SubjectId":null,"Scopes":"api1","GrantType":"client_credentials","Tokens":[{"TokenType":"access_token","TokenValue":"****Atow","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN299HE8JFG:00000006","TimeStamp":"2019-05-27T03:41:36.0000000Z","ProcessId":38348,"LocalIpAddress":"127.0.0.1:38278","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-27 11:41:36.308 +08:00 [DBG] Token request success.
2019-05-27 11:47:42.372 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-05-27 11:47:42.373 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-05-27 11:47:42.373 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-05-27 11:47:42.373 +08:00 [DBG] Start token request.
2019-05-27 11:47:42.374 +08:00 [DBG] Start client validation
2019-05-27 11:47:42.374 +08:00 [DBG] Start parsing Basic Authentication secret
2019-05-27 11:47:42.374 +08:00 [DBG] Start parsing for secret in post body
2019-05-27 11:47:42.374 +08:00 [DBG] client id without secret found
2019-05-27 11:47:42.374 +08:00 [DBG] Parser found secret: PostBodySecretParser
2019-05-27 11:47:42.375 +08:00 [DBG] Secret id found: client
2019-05-27 11:47:43.707 +08:00 [DBG] client found in database: true
2019-05-27 11:47:43.707 +08:00 [DBG] client configuration validation for client client succeeded.
2019-05-27 11:47:43.707 +08:00 [DBG] Hashed shared secret validator cannot process NoSecret
2019-05-27 11:47:43.707 +08:00 [DBG] Secret validators could not validate secret
2019-05-27 11:47:43.707 +08:00 [INF] {"ClientId":"client","Category":"Authentication","Name":"Client Authentication Failure","EventType":"Failure","Id":1011,"Message":"Invalid client secret","ActivityId":"0HLN299HE8JFH:00000001","TimeStamp":"2019-05-27T03:47:43.0000000Z","ProcessId":38348,"LocalIpAddress":"127.0.0.1:38278","RemoteIpAddress":"::1","$type":"ClientAuthenticationFailureEvent"}
2019-05-27 11:47:43.708 +08:00 [ERR] Client secret validation failed for client: client.
2019-05-27 11:49:09.155 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-05-27 11:49:09.155 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-05-27 11:49:09.155 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-05-27 11:49:09.156 +08:00 [DBG] Start token request.
2019-05-27 11:49:09.156 +08:00 [DBG] Start client validation
2019-05-27 11:49:09.156 +08:00 [DBG] Start parsing Basic Authentication secret
2019-05-27 11:49:09.156 +08:00 [DBG] Start parsing for secret in post body
2019-05-27 11:49:09.157 +08:00 [DBG] No secret in post body found
2019-05-27 11:49:09.157 +08:00 [DBG] Parser found no secret
2019-05-27 11:49:09.157 +08:00 [INF] {"ClientId":"unknown","Category":"Authentication","Name":"Client Authentication Failure","EventType":"Failure","Id":1011,"Message":"No client id found","ActivityId":"0HLN299HE8JFI:00000001","TimeStamp":"2019-05-27T03:49:09.0000000Z","ProcessId":38348,"LocalIpAddress":"127.0.0.1:38278","RemoteIpAddress":"::1","$type":"ClientAuthenticationFailureEvent"}
2019-05-27 11:49:09.157 +08:00 [ERR] No client identifier found
2019-05-27 11:49:27.308 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-05-27 11:49:27.308 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-05-27 11:49:27.309 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-05-27 11:49:27.309 +08:00 [DBG] Start token request.
2019-05-27 11:49:27.309 +08:00 [DBG] Start client validation
2019-05-27 11:49:27.309 +08:00 [DBG] Start parsing Basic Authentication secret
2019-05-27 11:49:27.309 +08:00 [DBG] Start parsing for secret in post body
2019-05-27 11:49:27.309 +08:00 [DBG] No secret in post body found
2019-05-27 11:49:27.309 +08:00 [DBG] Parser found no secret
2019-05-27 11:49:27.310 +08:00 [INF] {"ClientId":"unknown","Category":"Authentication","Name":"Client Authentication Failure","EventType":"Failure","Id":1011,"Message":"No client id found","ActivityId":"0HLN299HE8JFI:00000002","TimeStamp":"2019-05-27T03:49:27.0000000Z","ProcessId":38348,"LocalIpAddress":"127.0.0.1:38278","RemoteIpAddress":"::1","$type":"ClientAuthenticationFailureEvent"}
2019-05-27 11:49:27.310 +08:00 [ERR] No client identifier found
2019-05-27 11:50:23.627 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-05-27 11:50:23.627 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-05-27 11:50:23.627 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-05-27 11:50:23.628 +08:00 [DBG] Start token request.
2019-05-27 11:50:23.628 +08:00 [DBG] Start client validation
2019-05-27 11:50:23.629 +08:00 [DBG] Start parsing Basic Authentication secret
2019-05-27 11:50:23.629 +08:00 [DBG] Start parsing for secret in post body
2019-05-27 11:50:23.646 +08:00 [DBG] Parser found secret: PostBodySecretParser
2019-05-27 11:50:23.646 +08:00 [DBG] Secret id found: client
2019-05-27 11:50:24.808 +08:00 [DBG] client found in database: true
2019-05-27 11:50:24.809 +08:00 [DBG] client configuration validation for client client succeeded.
2019-05-27 11:50:24.809 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-05-27 11:50:24.809 +08:00 [DBG] Client validation success
2019-05-27 11:50:24.809 +08:00 [INF] {"ClientId":"client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN299HE8JFI:00000003","TimeStamp":"2019-05-27T03:50:24.0000000Z","ProcessId":38348,"LocalIpAddress":"127.0.0.1:38278","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-05-27 11:50:24.809 +08:00 [DBG] Start token request validation
2019-05-27 11:50:24.809 +08:00 [DBG] Start client credentials token request validation
2019-05-27 11:50:24.934 +08:00 [DBG] Found [] identity scopes in database
2019-05-27 11:50:25.604 +08:00 [DBG] Found ["api1"] API scopes in database
2019-05-27 11:50:25.731 +08:00 [DBG] Found [] identity scopes in database
2019-05-27 11:50:26.539 +08:00 [DBG] Found ["api1"] API scopes in database
2019-05-27 11:50:26.539 +08:00 [DBG] client credentials token request validation success
2019-05-27 11:50:26.539 +08:00 [INF] Token request validation success
{"ClientId":"client","ClientName":"Client Credentials Client","GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","client_secret":"***REDACTED***","client_id":"client"},"$type":"TokenRequestValidationLog"}
2019-05-27 11:50:26.539 +08:00 [DBG] Getting claims for access token for client: client
2019-05-27 11:50:26.542 +08:00 [INF] {"ClientId":"client","ClientName":"Client Credentials Client","RedirectUri":null,"Endpoint":"Token","SubjectId":null,"Scopes":"api1","GrantType":"client_credentials","Tokens":[{"TokenType":"access_token","TokenValue":"****zu3g","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN299HE8JFI:00000003","TimeStamp":"2019-05-27T03:50:26.0000000Z","ProcessId":38348,"LocalIpAddress":"127.0.0.1:38278","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-27 11:50:26.542 +08:00 [DBG] Token request success.
2019-05-27 11:51:27.852 +08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-05-27 11:51:27.860 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-05-27 11:51:27.866 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-05-27 11:51:27.867 +08:00 [DBG] Start discovery request
2019-05-27 11:51:28.669 +08:00 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-05-27 11:51:28.891 +08:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-05-27 11:51:28.892 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-05-27 11:51:28.892 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-05-27 11:51:28.892 +08:00 [DBG] Start key discovery request
2019-05-27 11:53:59.598 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-05-27 11:53:59.598 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-05-27 11:53:59.598 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-05-27 11:53:59.598 +08:00 [DBG] Start token request.
2019-05-27 11:53:59.598 +08:00 [DBG] Start client validation
2019-05-27 11:53:59.599 +08:00 [DBG] Start parsing Basic Authentication secret
2019-05-27 11:53:59.599 +08:00 [DBG] Start parsing for secret in post body
2019-05-27 11:53:59.606 +08:00 [DBG] Parser found secret: PostBodySecretParser
2019-05-27 11:53:59.606 +08:00 [DBG] Secret id found: client
2019-05-27 11:54:00.742 +08:00 [DBG] client found in database: true
2019-05-27 11:54:00.742 +08:00 [DBG] client configuration validation for client client succeeded.
2019-05-27 11:54:00.742 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-05-27 11:54:00.742 +08:00 [DBG] Client validation success
2019-05-27 11:54:00.742 +08:00 [INF] {"ClientId":"client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN299HE8JFK:00000001","TimeStamp":"2019-05-27T03:54:00.0000000Z","ProcessId":38348,"LocalIpAddress":"127.0.0.1:38278","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-05-27 11:54:00.743 +08:00 [DBG] Start token request validation
2019-05-27 11:54:00.743 +08:00 [DBG] Start client credentials token request validation
2019-05-27 11:54:00.850 +08:00 [DBG] Found [] identity scopes in database
2019-05-27 11:54:01.422 +08:00 [DBG] Found ["api1"] API scopes in database
2019-05-27 11:54:01.572 +08:00 [DBG] Found [] identity scopes in database
2019-05-27 11:54:02.098 +08:00 [DBG] Found ["api1"] API scopes in database
2019-05-27 11:54:02.098 +08:00 [DBG] client credentials token request validation success
2019-05-27 11:54:02.098 +08:00 [INF] Token request validation success
{"ClientId":"client","ClientName":"Client Credentials Client","GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","client_secret":"***REDACTED***","client_id":"client"},"$type":"TokenRequestValidationLog"}
2019-05-27 11:54:02.098 +08:00 [DBG] Getting claims for access token for client: client
2019-05-27 11:54:02.101 +08:00 [INF] {"ClientId":"client","ClientName":"Client Credentials Client","RedirectUri":null,"Endpoint":"Token","SubjectId":null,"Scopes":"api1","GrantType":"client_credentials","Tokens":[{"TokenType":"access_token","TokenValue":"****niiA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN299HE8JFK:00000001","TimeStamp":"2019-05-27T03:54:02.0000000Z","ProcessId":38348,"LocalIpAddress":"127.0.0.1:38278","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-27 11:54:02.101 +08:00 [DBG] Token request success.
2019-05-27 12:00:30.705 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-05-27 12:00:30.705 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-05-27 12:00:30.706 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-05-27 12:00:30.706 +08:00 [DBG] Start token request.
2019-05-27 12:00:30.706 +08:00 [DBG] Start client validation
2019-05-27 12:00:30.706 +08:00 [DBG] Start parsing Basic Authentication secret
2019-05-27 12:00:30.706 +08:00 [DBG] Start parsing for secret in post body
2019-05-27 12:00:30.707 +08:00 [DBG] Parser found secret: PostBodySecretParser
2019-05-27 12:00:30.707 +08:00 [DBG] Secret id found: client
2019-05-27 12:00:32.222 +08:00 [DBG] client found in database: true
2019-05-27 12:00:32.222 +08:00 [DBG] client configuration validation for client client succeeded.
2019-05-27 12:00:32.222 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-05-27 12:00:32.222 +08:00 [DBG] Client validation success
2019-05-27 12:00:32.222 +08:00 [INF] {"ClientId":"client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN299HE8JFL:00000001","TimeStamp":"2019-05-27T04:00:32.0000000Z","ProcessId":38348,"LocalIpAddress":"127.0.0.1:38278","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-05-27 12:00:32.222 +08:00 [DBG] Start token request validation
2019-05-27 12:00:32.222 +08:00 [DBG] Start client credentials token request validation
2019-05-27 12:00:32.353 +08:00 [DBG] Found [] identity scopes in database
2019-05-27 12:00:32.876 +08:00 [DBG] Found ["api1"] API scopes in database
2019-05-27 12:00:33.010 +08:00 [DBG] Found [] identity scopes in database
2019-05-27 12:00:33.681 +08:00 [DBG] Found ["api1"] API scopes in database
2019-05-27 12:00:33.681 +08:00 [DBG] client credentials token request validation success
2019-05-27 12:00:33.681 +08:00 [INF] Token request validation success
{"ClientId":"client","ClientName":"Client Credentials Client","GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","client_secret":"***REDACTED***","client_id":"client"},"$type":"TokenRequestValidationLog"}
2019-05-27 12:00:33.682 +08:00 [DBG] Getting claims for access token for client: client
2019-05-27 12:00:33.685 +08:00 [INF] {"ClientId":"client","ClientName":"Client Credentials Client","RedirectUri":null,"Endpoint":"Token","SubjectId":null,"Scopes":"api1","GrantType":"client_credentials","Tokens":[{"TokenType":"access_token","TokenValue":"****gRhA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN299HE8JFL:00000001","TimeStamp":"2019-05-27T04:00:33.0000000Z","ProcessId":38348,"LocalIpAddress":"127.0.0.1:38278","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-27 12:00:33.685 +08:00 [DBG] Token request success.
2019-05-27 12:00:46.176 +08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-05-27 12:00:46.177 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-05-27 12:00:46.177 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-05-27 12:00:46.178 +08:00 [DBG] Start discovery request
2019-05-27 12:00:46.843 +08:00 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-05-27 12:00:47.197 +08:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-05-27 12:00:47.198 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-05-27 12:00:47.198 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-05-27 12:00:47.199 +08:00 [DBG] Start key discovery request
2019-05-27 12:03:00.654 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-05-27 12:03:00.654 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-05-27 12:03:00.655 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-05-27 12:03:00.655 +08:00 [DBG] Start token request.
2019-05-27 12:03:00.655 +08:00 [DBG] Start client validation
2019-05-27 12:03:00.655 +08:00 [DBG] Start parsing Basic Authentication secret
2019-05-27 12:03:00.655 +08:00 [DBG] Start parsing for secret in post body
2019-05-27 12:03:00.655 +08:00 [DBG] Parser found secret: PostBodySecretParser
2019-05-27 12:03:00.655 +08:00 [DBG] Secret id found: client
2019-05-27 12:03:01.691 +08:00 [DBG] client found in database: true
2019-05-27 12:03:01.691 +08:00 [DBG] client configuration validation for client client succeeded.
2019-05-27 12:03:01.691 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-05-27 12:03:01.691 +08:00 [DBG] Client validation success
2019-05-27 12:03:01.691 +08:00 [INF] {"ClientId":"client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN299HE8JFM:00000001","TimeStamp":"2019-05-27T04:03:01.0000000Z","ProcessId":38348,"LocalIpAddress":"127.0.0.1:38278","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-05-27 12:03:01.692 +08:00 [DBG] Start token request validation
2019-05-27 12:03:01.692 +08:00 [DBG] Start client credentials token request validation
2019-05-27 12:03:01.794 +08:00 [DBG] Found [] identity scopes in database
2019-05-27 12:03:02.319 +08:00 [DBG] Found ["api1"] API scopes in database
2019-05-27 12:03:02.433 +08:00 [DBG] Found [] identity scopes in database
2019-05-27 12:03:02.969 +08:00 [DBG] Found ["api1"] API scopes in database
2019-05-27 12:03:02.969 +08:00 [DBG] client credentials token request validation success
2019-05-27 12:03:02.969 +08:00 [INF] Token request validation success
{"ClientId":"client","ClientName":"Client Credentials Client","GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","client_secret":"***REDACTED***","client_id":"client"},"$type":"TokenRequestValidationLog"}
2019-05-27 12:03:02.969 +08:00 [DBG] Getting claims for access token for client: client
2019-05-27 12:03:02.972 +08:00 [INF] {"ClientId":"client","ClientName":"Client Credentials Client","RedirectUri":null,"Endpoint":"Token","SubjectId":null,"Scopes":"api1","GrantType":"client_credentials","Tokens":[{"TokenType":"access_token","TokenValue":"****VjfA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN299HE8JFM:00000001","TimeStamp":"2019-05-27T04:03:02.0000000Z","ProcessId":38348,"LocalIpAddress":"127.0.0.1:38278","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-27 12:03:02.973 +08:00 [DBG] Token request success.
2019-05-27 12:04:46.342 +08:00 [INF] AuthenticationScheme: idsrv was challenged.
2019-05-27 12:06:30.274 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-05-27 12:06:30.274 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-05-27 12:06:30.274 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-05-27 12:06:30.275 +08:00 [DBG] Start token request.
2019-05-27 12:06:30.275 +08:00 [DBG] Start client validation
2019-05-27 12:06:30.276 +08:00 [DBG] Start parsing Basic Authentication secret
2019-05-27 12:06:30.282 +08:00 [DBG] Start parsing for secret in post body
2019-05-27 12:06:30.319 +08:00 [DBG] Parser found secret: PostBodySecretParser
2019-05-27 12:06:30.319 +08:00 [DBG] Secret id found: client
2019-05-27 12:06:31.373 +08:00 [DBG] client found in database: true
2019-05-27 12:06:31.373 +08:00 [DBG] client configuration validation for client client succeeded.
2019-05-27 12:06:31.373 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-05-27 12:06:31.373 +08:00 [DBG] Client validation success
2019-05-27 12:06:31.373 +08:00 [INF] {"ClientId":"client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN299HE8JFR:00000001","TimeStamp":"2019-05-27T04:06:31.0000000Z","ProcessId":38348,"LocalIpAddress":"127.0.0.1:38278","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-05-27 12:06:31.373 +08:00 [DBG] Start token request validation
2019-05-27 12:06:31.373 +08:00 [DBG] Start client credentials token request validation
2019-05-27 12:06:31.478 +08:00 [DBG] Found [] identity scopes in database
2019-05-27 12:06:32.059 +08:00 [DBG] Found ["api1"] API scopes in database
2019-05-27 12:06:32.186 +08:00 [DBG] Found [] identity scopes in database
2019-05-27 12:06:32.790 +08:00 [DBG] Found ["api1"] API scopes in database
2019-05-27 12:06:32.790 +08:00 [DBG] client credentials token request validation success
2019-05-27 12:06:32.790 +08:00 [INF] Token request validation success
{"ClientId":"client","ClientName":"Client Credentials Client","GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","client_secret":"***REDACTED***","client_id":"client"},"$type":"TokenRequestValidationLog"}
2019-05-27 12:06:32.790 +08:00 [DBG] Getting claims for access token for client: client
2019-05-27 12:06:32.793 +08:00 [INF] {"ClientId":"client","ClientName":"Client Credentials Client","RedirectUri":null,"Endpoint":"Token","SubjectId":null,"Scopes":"api1","GrantType":"client_credentials","Tokens":[{"TokenType":"access_token","TokenValue":"****L4CQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN299HE8JFR:00000001","TimeStamp":"2019-05-27T04:06:32.0000000Z","ProcessId":38348,"LocalIpAddress":"127.0.0.1:38278","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-27 12:06:32.793 +08:00 [DBG] Token request success.
2019-05-27 12:06:49.248 +08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-05-27 12:06:49.248 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-05-27 12:06:49.249 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-05-27 12:06:49.249 +08:00 [DBG] Start discovery request
2019-05-27 12:06:49.955 +08:00 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-05-27 12:06:50.222 +08:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-05-27 12:06:50.223 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-05-27 12:06:50.223 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-05-27 12:06:50.223 +08:00 [DBG] Start key discovery request
2019-05-27 12:11:47.326 +08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-05-27 12:11:47.327 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-05-27 12:11:47.327 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-05-27 12:11:47.327 +08:00 [DBG] Start discovery request
2019-05-27 12:11:48.277 +08:00 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-05-27 12:11:48.516 +08:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-05-27 12:11:48.517 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-05-27 12:11:48.517 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-05-27 12:11:48.517 +08:00 [DBG] Start key discovery request
2019-05-27 12:24:04.154 +08:00 [INF] Removing 0 grants
2019-05-27 13:24:04.526 +08:00 [INF] Removing 0 grants
2019-05-27 14:24:04.914 +08:00 [INF] Removing 0 grants
2019-05-27 15:24:05.322 +08:00 [INF] Removing 0 grants
2019-05-27 16:24:05.689 +08:00 [INF] Removing 0 grants
2019-05-27 17:24:06.044 +08:00 [INF] Removing 0 grants
2019-05-27 18:24:06.418 +08:00 [INF] Removing 0 grants
2019-05-27 19:24:06.755 +08:00 [INF] Removing 0 grants
2019-05-28 17:21:07.803 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2019-05-28 17:21:07.830 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2019-05-28 17:21:07.831 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2019-05-28 17:21:07.831 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2019-05-28 17:21:07.831 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2019-05-28 17:21:07.831 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2019-05-28 17:21:08.216 +08:00 [DBG] Starting grant removal
2019-05-28 17:21:08.442 +08:00 [DBG] Login Url: /Account/Login
2019-05-28 17:21:08.444 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-05-28 17:21:08.445 +08:00 [DBG] Logout Url: /Account/Logout
2019-05-28 17:21:08.445 +08:00 [DBG] ConsentUrl Url: /consent
2019-05-28 17:21:08.445 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2019-05-28 17:21:08.445 +08:00 [DBG] Error Url: /home/error
2019-05-28 17:21:08.445 +08:00 [DBG] Error Id Parameter: errorId
2019-05-28 17:32:40.039 +08:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-05-28 17:32:40.069 +08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-05-28 17:32:40.069 +08:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-05-28 17:32:40.069 +08:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-05-28 17:32:40.070 +08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-05-28 17:32:40.070 +08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-05-28 17:32:40.461 +08:00 [DBG] Starting grant removal
2019-05-28 17:32:40.798 +08:00 [DBG] Login Url: /Account/Login
2019-05-28 17:32:40.802 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-05-28 17:32:40.802 +08:00 [DBG] Logout Url: /Account/Logout
2019-05-28 17:32:40.802 +08:00 [DBG] ConsentUrl Url: /consent
2019-05-28 17:32:40.802 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2019-05-28 17:32:40.802 +08:00 [DBG] Error Url: /home/error
2019-05-28 17:32:40.802 +08:00 [DBG] Error Id Parameter: errorId
2019-05-28 17:34:48.710 +08:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-05-28 17:34:48.736 +08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-05-28 17:34:48.737 +08:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-05-28 17:34:48.737 +08:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-05-28 17:34:48.737 +08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-05-28 17:34:48.737 +08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-05-28 17:34:48.816 +08:00 [DBG] Starting grant removal
2019-05-28 17:34:49.118 +08:00 [DBG] Login Url: /Account/Login
2019-05-28 17:34:49.120 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-05-28 17:34:49.120 +08:00 [DBG] Logout Url: /Account/Logout
2019-05-28 17:34:49.120 +08:00 [DBG] ConsentUrl Url: /consent
2019-05-28 17:34:49.120 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2019-05-28 17:34:49.120 +08:00 [DBG] Error Url: /home/error
2019-05-28 17:34:49.120 +08:00 [DBG] Error Id Parameter: errorId
2019-05-28 17:36:40.764 +08:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-05-28 17:36:40.791 +08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-05-28 17:36:40.791 +08:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-05-28 17:36:40.792 +08:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-05-28 17:36:40.792 +08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-05-28 17:36:40.792 +08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-05-28 17:36:41.195 +08:00 [DBG] Starting grant removal
2019-05-28 17:36:41.435 +08:00 [DBG] Login Url: /Account/Login
2019-05-28 17:36:41.437 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-05-28 17:36:41.437 +08:00 [DBG] Logout Url: /Account/Logout
2019-05-28 17:36:41.438 +08:00 [DBG] ConsentUrl Url: /consent
2019-05-28 17:36:41.438 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2019-05-28 17:36:41.438 +08:00 [DBG] Error Url: /home/error
2019-05-28 17:36:41.438 +08:00 [DBG] Error Id Parameter: errorId
2019-05-28 17:36:45.214 +08:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2019-05-28 17:45:47.954 +08:00 [ERR] Failed executing DbCommand (313ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `AspNetRoles` (
    `Id` nvarchar(450) NOT NULL,
    `ConcurrencyStamp` nvarchar(max) NULL,
    `Name` nvarchar(256) NULL,
    `NormalizedName` nvarchar(256) NULL,
    CONSTRAINT `PK_AspNetRoles` PRIMARY KEY (`Id`)
);
MySql.Data.MySqlClient.MySqlException (0x80004005): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'max) NULL,
    `Name` nvarchar(256) NULL,
    `NormalizedName` nvarchar(256) N' at line 3 ---> MySql.Data.MySqlClient.MySqlException (0x80004005): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'max) NULL,
    `Name` nvarchar(256) NULL,
    `NormalizedName` nvarchar(256) N' at line 3
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ResultSet.cs:line 42
   at MySql.Data.MySqlClient.MySqlDataReader.ActivateResultSet(ResultSet resultSet) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlDataReader.cs:line 80
   at MySql.Data.MySqlClient.MySqlDataReader.ReadFirstResultSetAsync(IOBehavior ioBehavior) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlDataReader.cs:line 302
   at MySql.Data.MySqlClient.MySqlDataReader.CreateAsync(MySqlCommand command, CommandBehavior behavior, ResultSetProtocol resultSetProtocol, IOBehavior ioBehavior) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlDataReader.cs:line 287
   at MySqlConnector.Core.TextCommandExecutor.ExecuteReaderAsync(String commandText, MySqlParameterCollection parameterCollection, CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\TextCommandExecutor.cs:line 37
   at MySql.Data.MySqlClient.MySqlCommand.ExecuteNonQueryAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlCommand.cs:line 261
   at MySql.Data.MySqlClient.MySqlCommand.ExecuteNonQuery() in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlCommand.cs:line 62
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
2019-05-28 17:45:48.265 +08:00 [FTL] Application startup exception
MySql.Data.MySqlClient.MySqlException (0x80004005): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'max) NULL,
    `Name` nvarchar(256) NULL,
    `NormalizedName` nvarchar(256) N' at line 3 ---> MySql.Data.MySqlClient.MySqlException (0x80004005): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'max) NULL,
    `Name` nvarchar(256) NULL,
    `NormalizedName` nvarchar(256) N' at line 3
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ResultSet.cs:line 42
   at MySql.Data.MySqlClient.MySqlDataReader.ActivateResultSet(ResultSet resultSet) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlDataReader.cs:line 80
   at MySql.Data.MySqlClient.MySqlDataReader.ReadFirstResultSetAsync(IOBehavior ioBehavior) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlDataReader.cs:line 302
   at MySql.Data.MySqlClient.MySqlDataReader.CreateAsync(MySqlCommand command, CommandBehavior behavior, ResultSetProtocol resultSetProtocol, IOBehavior ioBehavior) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlDataReader.cs:line 287
   at MySqlConnector.Core.TextCommandExecutor.ExecuteReaderAsync(String commandText, MySqlParameterCollection parameterCollection, CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\TextCommandExecutor.cs:line 37
   at MySql.Data.MySqlClient.MySqlCommand.ExecuteNonQueryAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlCommand.cs:line 261
   at MySql.Data.MySqlClient.MySqlCommand.ExecuteNonQuery() in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlCommand.cs:line 62
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteNonQuery(IRelationalConnection connection, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Migrations.MigrationCommand.ExecuteNonQuery(IRelationalConnection connection, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.MigrationCommandExecutor.ExecuteNonQuery(IEnumerable`1 migrationCommands, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.Migrate(String targetMigration)
   at Microsoft.EntityFrameworkCore.RelationalDatabaseFacadeExtensions.Migrate(DatabaseFacade databaseFacade)
   at IdentityCenter.Startup.InitializeDatabase(IApplicationBuilder app) in G:\项目\AuthticationAndAuthtization\IndentityServerCenter\IdentityCenter\Startup.cs:line 128
   at IdentityCenter.Startup.Configure(IApplicationBuilder app) in G:\项目\AuthticationAndAuthtization\IndentityServerCenter\IdentityCenter\Startup.cs:line 105
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Hosting.ConventionBasedStartup.Configure(IApplicationBuilder app)
   at Microsoft.AspNetCore.Server.IISIntegration.IISSetupFilter.<>c__DisplayClass4_0.<Configure>b__0(IApplicationBuilder app)
   at Microsoft.AspNetCore.HostFilteringStartupFilter.<>c__DisplayClass0_0.<Configure>b__0(IApplicationBuilder app)
   at Microsoft.AspNetCore.Hosting.Internal.AutoRequestServicesStartupFilter.<>c__DisplayClass0_0.<Configure>b__0(IApplicationBuilder builder)
   at Microsoft.AspNetCore.Hosting.Internal.WebHost.BuildApplication()
2019-05-28 17:45:48.304 +08:00 [DBG] Starting grant removal
2019-05-28 17:45:48.806 +08:00 [ERR] Connection id "0HLN3A51P228I", Request id "0HLN3A51P228I:00000001": An unhandled exception was thrown by the application.
System.ArgumentNullException: Value cannot be null.
Parameter name: values
   at System.String.Join(String separator, IEnumerable`1 values)
   at Microsoft.Extensions.RazorViews.BaseView.EndWriteAttribute()
   at Microsoft.AspNetCore.Hosting.Views.ErrorPage.ExecuteAsync()
   at Microsoft.Extensions.RazorViews.BaseView.ExecuteAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequests[TContext](IHttpApplication`1 application)
2019-05-28 17:46:42.782 +08:00 [ERR] Failed executing DbCommand (294ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `AspNetRoles` (
    `Id` nvarchar(450) NOT NULL,
    `ConcurrencyStamp` nvarchar(max) NULL,
    `Name` nvarchar(256) NULL,
    `NormalizedName` nvarchar(256) NULL,
    CONSTRAINT `PK_AspNetRoles` PRIMARY KEY (`Id`)
);
MySql.Data.MySqlClient.MySqlException (0x80004005): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'max) NULL,
    `Name` nvarchar(256) NULL,
    `NormalizedName` nvarchar(256) N' at line 3 ---> MySql.Data.MySqlClient.MySqlException (0x80004005): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'max) NULL,
    `Name` nvarchar(256) NULL,
    `NormalizedName` nvarchar(256) N' at line 3
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ResultSet.cs:line 42
   at MySql.Data.MySqlClient.MySqlDataReader.ActivateResultSet(ResultSet resultSet) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlDataReader.cs:line 80
   at MySql.Data.MySqlClient.MySqlDataReader.ReadFirstResultSetAsync(IOBehavior ioBehavior) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlDataReader.cs:line 302
   at MySql.Data.MySqlClient.MySqlDataReader.CreateAsync(MySqlCommand command, CommandBehavior behavior, ResultSetProtocol resultSetProtocol, IOBehavior ioBehavior) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlDataReader.cs:line 287
   at MySqlConnector.Core.TextCommandExecutor.ExecuteReaderAsync(String commandText, MySqlParameterCollection parameterCollection, CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\TextCommandExecutor.cs:line 37
   at MySql.Data.MySqlClient.MySqlCommand.ExecuteNonQueryAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlCommand.cs:line 261
   at MySql.Data.MySqlClient.MySqlCommand.ExecuteNonQuery() in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlCommand.cs:line 62
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
2019-05-28 17:46:43.127 +08:00 [FTL] Application startup exception
MySql.Data.MySqlClient.MySqlException (0x80004005): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'max) NULL,
    `Name` nvarchar(256) NULL,
    `NormalizedName` nvarchar(256) N' at line 3 ---> MySql.Data.MySqlClient.MySqlException (0x80004005): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'max) NULL,
    `Name` nvarchar(256) NULL,
    `NormalizedName` nvarchar(256) N' at line 3
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ResultSet.cs:line 42
   at MySql.Data.MySqlClient.MySqlDataReader.ActivateResultSet(ResultSet resultSet) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlDataReader.cs:line 80
   at MySql.Data.MySqlClient.MySqlDataReader.ReadFirstResultSetAsync(IOBehavior ioBehavior) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlDataReader.cs:line 302
   at MySql.Data.MySqlClient.MySqlDataReader.CreateAsync(MySqlCommand command, CommandBehavior behavior, ResultSetProtocol resultSetProtocol, IOBehavior ioBehavior) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlDataReader.cs:line 287
   at MySqlConnector.Core.TextCommandExecutor.ExecuteReaderAsync(String commandText, MySqlParameterCollection parameterCollection, CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\TextCommandExecutor.cs:line 37
   at MySql.Data.MySqlClient.MySqlCommand.ExecuteNonQueryAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlCommand.cs:line 261
   at MySql.Data.MySqlClient.MySqlCommand.ExecuteNonQuery() in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlCommand.cs:line 62
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteNonQuery(IRelationalConnection connection, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Migrations.MigrationCommand.ExecuteNonQuery(IRelationalConnection connection, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.MigrationCommandExecutor.ExecuteNonQuery(IEnumerable`1 migrationCommands, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.Migrate(String targetMigration)
   at Microsoft.EntityFrameworkCore.RelationalDatabaseFacadeExtensions.Migrate(DatabaseFacade databaseFacade)
   at IdentityCenter.Startup.InitializeDatabase(IApplicationBuilder app) in G:\项目\AuthticationAndAuthtization\IndentityServerCenter\IdentityCenter\Startup.cs:line 128
   at IdentityCenter.Startup.Configure(IApplicationBuilder app) in G:\项目\AuthticationAndAuthtization\IndentityServerCenter\IdentityCenter\Startup.cs:line 105
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Hosting.ConventionBasedStartup.Configure(IApplicationBuilder app)
   at Microsoft.AspNetCore.Server.IISIntegration.IISSetupFilter.<>c__DisplayClass4_0.<Configure>b__0(IApplicationBuilder app)
   at Microsoft.AspNetCore.HostFilteringStartupFilter.<>c__DisplayClass0_0.<Configure>b__0(IApplicationBuilder app)
   at Microsoft.AspNetCore.Hosting.Internal.AutoRequestServicesStartupFilter.<>c__DisplayClass0_0.<Configure>b__0(IApplicationBuilder builder)
   at Microsoft.AspNetCore.Hosting.Internal.WebHost.BuildApplication()
2019-05-28 17:46:43.177 +08:00 [DBG] Starting grant removal
2019-05-28 17:46:43.670 +08:00 [ERR] Connection id "0HLN3A5I3SB9Q", Request id "0HLN3A5I3SB9Q:00000001": An unhandled exception was thrown by the application.
System.ArgumentNullException: Value cannot be null.
Parameter name: values
   at System.String.Join(String separator, IEnumerable`1 values)
   at Microsoft.Extensions.RazorViews.BaseView.EndWriteAttribute()
   at Microsoft.AspNetCore.Hosting.Views.ErrorPage.ExecuteAsync()
   at Microsoft.Extensions.RazorViews.BaseView.ExecuteAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequests[TContext](IHttpApplication`1 application)
2019-05-28 17:56:48.821 +08:00 [ERR] Failed executing DbCommand (315ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `AspNetUsers` (
    `Id` nvarchar(450) NOT NULL,
    `AccessFailedCount` int NOT NULL,
    `CardHolderName` text NOT NULL,
    `CardNumber` text NOT NULL,
    `CardType` int NOT NULL,
    `City` text NOT NULL,
    `ConcurrencyStamp` text NULL,
    `Country` text NOT NULL,
    `Email` nvarchar(256) NULL,
    `EmailConfirmed` bit NOT NULL,
    `Expiration` text NOT NULL,
    `LastName` text NOT NULL,
    `LockoutEnabled` bit NOT NULL,
    `LockoutEnd` datetimeoffset NULL,
    `Name` text NOT NULL,
    `NormalizedEmail` nvarchar(256) NULL,
    `NormalizedUserName` nvarchar(256) NULL,
    `PasswordHash` text NULL,
    `PhoneNumber` text NULL,
    `PhoneNumberConfirmed` bit NOT NULL,
    `SecurityNumber` text NOT NULL,
    `SecurityStamp` text NULL,
    `State` text NOT NULL,
    `Street` text NOT NULL,
    `TwoFactorEnabled` bit NOT NULL,
    `UserName` nvarchar(256) NULL,
    `ZipCode` text NOT NULL,
    CONSTRAINT `PK_AspNetUsers` PRIMARY KEY (`Id`)
);
MySql.Data.MySqlClient.MySqlException (0x80004005): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'datetimeoffset NULL,
    `Name` text NOT NULL,
    `NormalizedEmail` nvarchar(' at line 15 ---> MySql.Data.MySqlClient.MySqlException (0x80004005): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'datetimeoffset NULL,
    `Name` text NOT NULL,
    `NormalizedEmail` nvarchar(' at line 15
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ResultSet.cs:line 42
   at MySql.Data.MySqlClient.MySqlDataReader.ActivateResultSet(ResultSet resultSet) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlDataReader.cs:line 80
   at MySql.Data.MySqlClient.MySqlDataReader.ReadFirstResultSetAsync(IOBehavior ioBehavior) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlDataReader.cs:line 302
   at MySql.Data.MySqlClient.MySqlDataReader.CreateAsync(MySqlCommand command, CommandBehavior behavior, ResultSetProtocol resultSetProtocol, IOBehavior ioBehavior) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlDataReader.cs:line 287
   at MySqlConnector.Core.TextCommandExecutor.ExecuteReaderAsync(String commandText, MySqlParameterCollection parameterCollection, CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\TextCommandExecutor.cs:line 37
   at MySql.Data.MySqlClient.MySqlCommand.ExecuteNonQueryAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlCommand.cs:line 261
   at MySql.Data.MySqlClient.MySqlCommand.ExecuteNonQuery() in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlCommand.cs:line 62
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
2019-05-28 17:56:49.079 +08:00 [FTL] Application startup exception
MySql.Data.MySqlClient.MySqlException (0x80004005): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'datetimeoffset NULL,
    `Name` text NOT NULL,
    `NormalizedEmail` nvarchar(' at line 15 ---> MySql.Data.MySqlClient.MySqlException (0x80004005): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'datetimeoffset NULL,
    `Name` text NOT NULL,
    `NormalizedEmail` nvarchar(' at line 15
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ResultSet.cs:line 42
   at MySql.Data.MySqlClient.MySqlDataReader.ActivateResultSet(ResultSet resultSet) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlDataReader.cs:line 80
   at MySql.Data.MySqlClient.MySqlDataReader.ReadFirstResultSetAsync(IOBehavior ioBehavior) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlDataReader.cs:line 302
   at MySql.Data.MySqlClient.MySqlDataReader.CreateAsync(MySqlCommand command, CommandBehavior behavior, ResultSetProtocol resultSetProtocol, IOBehavior ioBehavior) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlDataReader.cs:line 287
   at MySqlConnector.Core.TextCommandExecutor.ExecuteReaderAsync(String commandText, MySqlParameterCollection parameterCollection, CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\TextCommandExecutor.cs:line 37
   at MySql.Data.MySqlClient.MySqlCommand.ExecuteNonQueryAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlCommand.cs:line 261
   at MySql.Data.MySqlClient.MySqlCommand.ExecuteNonQuery() in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlCommand.cs:line 62
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteNonQuery(IRelationalConnection connection, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Migrations.MigrationCommand.ExecuteNonQuery(IRelationalConnection connection, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.MigrationCommandExecutor.ExecuteNonQuery(IEnumerable`1 migrationCommands, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.Migrate(String targetMigration)
   at Microsoft.EntityFrameworkCore.RelationalDatabaseFacadeExtensions.Migrate(DatabaseFacade databaseFacade)
   at IdentityCenter.Startup.InitializeDatabase(IApplicationBuilder app) in G:\项目\AuthticationAndAuthtization\IndentityServerCenter\IdentityCenter\Startup.cs:line 128
   at IdentityCenter.Startup.Configure(IApplicationBuilder app) in G:\项目\AuthticationAndAuthtization\IndentityServerCenter\IdentityCenter\Startup.cs:line 105
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Hosting.ConventionBasedStartup.Configure(IApplicationBuilder app)
   at Microsoft.AspNetCore.Server.IISIntegration.IISSetupFilter.<>c__DisplayClass4_0.<Configure>b__0(IApplicationBuilder app)
   at Microsoft.AspNetCore.HostFilteringStartupFilter.<>c__DisplayClass0_0.<Configure>b__0(IApplicationBuilder app)
   at Microsoft.AspNetCore.Hosting.Internal.AutoRequestServicesStartupFilter.<>c__DisplayClass0_0.<Configure>b__0(IApplicationBuilder builder)
   at Microsoft.AspNetCore.Hosting.Internal.WebHost.BuildApplication()
2019-05-28 17:56:49.113 +08:00 [DBG] Starting grant removal
2019-05-28 17:56:49.623 +08:00 [ERR] Connection id "0HLN3AB6MDBQK", Request id "0HLN3AB6MDBQK:00000001": An unhandled exception was thrown by the application.
System.OverflowException: Arithmetic operation resulted in an overflow.
   at System.IO.StreamWriter.Write(String value)
   at Microsoft.AspNetCore.Hosting.Views.ErrorPage.ExecuteAsync()
   at Microsoft.Extensions.RazorViews.BaseView.ExecuteAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequests[TContext](IHttpApplication`1 application)
2019-05-28 17:56:49.623 +08:00 [ERR] Connection id "0HLN3AB6MDBQJ", Request id "0HLN3AB6MDBQJ:00000001": An unhandled exception was thrown by the application.
System.OverflowException: Arithmetic operation resulted in an overflow.
   at System.IO.StreamWriter.Write(String value)
   at Microsoft.Extensions.RazorViews.BaseView.Write(String value)
   at Microsoft.AspNetCore.Hosting.Views.ErrorPage.ExecuteAsync()
   at Microsoft.Extensions.RazorViews.BaseView.ExecuteAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequests[TContext](IHttpApplication`1 application)
2019-05-28 18:05:47.855 +08:00 [ERR] Failed executing DbCommand (289ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `AspNetRoles` (
    `Id` nvarchar(450) NOT NULL,
    `ConcurrencyStamp` text NULL,
    `Name` nvarchar(256) NULL,
    `NormalizedName` nvarchar(256) NULL,
    CONSTRAINT `PK_AspNetRoles` PRIMARY KEY (`Id`)
);
MySql.Data.MySqlClient.MySqlException (0x80004005): Table 'AspNetRoles' already exists ---> MySql.Data.MySqlClient.MySqlException (0x80004005): Table 'AspNetRoles' already exists
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ResultSet.cs:line 42
   at MySql.Data.MySqlClient.MySqlDataReader.ActivateResultSet(ResultSet resultSet) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlDataReader.cs:line 80
   at MySql.Data.MySqlClient.MySqlDataReader.ReadFirstResultSetAsync(IOBehavior ioBehavior) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlDataReader.cs:line 302
   at MySql.Data.MySqlClient.MySqlDataReader.CreateAsync(MySqlCommand command, CommandBehavior behavior, ResultSetProtocol resultSetProtocol, IOBehavior ioBehavior) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlDataReader.cs:line 287
   at MySqlConnector.Core.TextCommandExecutor.ExecuteReaderAsync(String commandText, MySqlParameterCollection parameterCollection, CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\TextCommandExecutor.cs:line 37
   at MySql.Data.MySqlClient.MySqlCommand.ExecuteNonQueryAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlCommand.cs:line 261
   at MySql.Data.MySqlClient.MySqlCommand.ExecuteNonQuery() in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlCommand.cs:line 62
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
2019-05-28 18:05:48.210 +08:00 [FTL] Application startup exception
MySql.Data.MySqlClient.MySqlException (0x80004005): Table 'AspNetRoles' already exists ---> MySql.Data.MySqlClient.MySqlException (0x80004005): Table 'AspNetRoles' already exists
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ResultSet.cs:line 42
   at MySql.Data.MySqlClient.MySqlDataReader.ActivateResultSet(ResultSet resultSet) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlDataReader.cs:line 80
   at MySql.Data.MySqlClient.MySqlDataReader.ReadFirstResultSetAsync(IOBehavior ioBehavior) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlDataReader.cs:line 302
   at MySql.Data.MySqlClient.MySqlDataReader.CreateAsync(MySqlCommand command, CommandBehavior behavior, ResultSetProtocol resultSetProtocol, IOBehavior ioBehavior) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlDataReader.cs:line 287
   at MySqlConnector.Core.TextCommandExecutor.ExecuteReaderAsync(String commandText, MySqlParameterCollection parameterCollection, CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\TextCommandExecutor.cs:line 37
   at MySql.Data.MySqlClient.MySqlCommand.ExecuteNonQueryAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlCommand.cs:line 261
   at MySql.Data.MySqlClient.MySqlCommand.ExecuteNonQuery() in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlCommand.cs:line 62
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteNonQuery(IRelationalConnection connection, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Migrations.MigrationCommand.ExecuteNonQuery(IRelationalConnection connection, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.MigrationCommandExecutor.ExecuteNonQuery(IEnumerable`1 migrationCommands, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.Migrate(String targetMigration)
   at Microsoft.EntityFrameworkCore.RelationalDatabaseFacadeExtensions.Migrate(DatabaseFacade databaseFacade)
   at IdentityCenter.Startup.InitializeDatabase(IApplicationBuilder app) in G:\项目\AuthticationAndAuthtization\IndentityServerCenter\IdentityCenter\Startup.cs:line 128
   at IdentityCenter.Startup.Configure(IApplicationBuilder app) in G:\项目\AuthticationAndAuthtization\IndentityServerCenter\IdentityCenter\Startup.cs:line 105
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Hosting.ConventionBasedStartup.Configure(IApplicationBuilder app)
   at Microsoft.AspNetCore.Server.IISIntegration.IISSetupFilter.<>c__DisplayClass4_0.<Configure>b__0(IApplicationBuilder app)
   at Microsoft.AspNetCore.HostFilteringStartupFilter.<>c__DisplayClass0_0.<Configure>b__0(IApplicationBuilder app)
   at Microsoft.AspNetCore.Hosting.Internal.AutoRequestServicesStartupFilter.<>c__DisplayClass0_0.<Configure>b__0(IApplicationBuilder builder)
   at Microsoft.AspNetCore.Hosting.Internal.WebHost.BuildApplication()
2019-05-28 18:05:48.250 +08:00 [DBG] Starting grant removal
2019-05-28 18:05:48.764 +08:00 [ERR] Connection id "0HLN3AG7BPNFJ", Request id "0HLN3AG7BPNFJ:00000001": An unhandled exception was thrown by the application.
System.ObjectDisposedException: Cannot write to the response body, the response has completed.
Object name: 'HttpResponseStream'.
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpResponseStream.ValidateState(CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpResponseStream.FlushAsync(CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpResponseStream.Flush()
   at System.IO.StreamWriter.Flush(Boolean flushStream, Boolean flushEncoder)
   at System.IO.StreamWriter.Dispose(Boolean disposing)
   at System.IO.TextWriter.Dispose()
   at Microsoft.Extensions.RazorViews.BaseView.ExecuteAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequests[TContext](IHttpApplication`1 application)
2019-05-28 18:10:07.936 +08:00 [ERR] Failed executing DbCommand (308ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `AspNetUserTokens` (
    `UserId` nvarchar(450) NOT NULL,
    `LoginProvider` nvarchar(450) NOT NULL,
    `Name` nvarchar(450) NOT NULL,
    `Value` text NULL,
    CONSTRAINT `PK_AspNetUserTokens` PRIMARY KEY (`UserId`, `LoginProvider`, `Name`),
    CONSTRAINT `FK_AspNetUserTokens_AspNetUsers_UserId` FOREIGN KEY (`UserId`) REFERENCES `AspNetUsers` (`Id`) ON DELETE CASCADE
);
MySql.Data.MySqlClient.MySqlException (0x80004005): Specified key was too long; max key length is 3072 bytes ---> MySql.Data.MySqlClient.MySqlException (0x80004005): Specified key was too long; max key length is 3072 bytes
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ResultSet.cs:line 42
   at MySql.Data.MySqlClient.MySqlDataReader.ActivateResultSet(ResultSet resultSet) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlDataReader.cs:line 80
   at MySql.Data.MySqlClient.MySqlDataReader.ReadFirstResultSetAsync(IOBehavior ioBehavior) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlDataReader.cs:line 302
   at MySql.Data.MySqlClient.MySqlDataReader.CreateAsync(MySqlCommand command, CommandBehavior behavior, ResultSetProtocol resultSetProtocol, IOBehavior ioBehavior) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlDataReader.cs:line 287
   at MySqlConnector.Core.TextCommandExecutor.ExecuteReaderAsync(String commandText, MySqlParameterCollection parameterCollection, CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\TextCommandExecutor.cs:line 37
   at MySql.Data.MySqlClient.MySqlCommand.ExecuteNonQueryAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlCommand.cs:line 261
   at MySql.Data.MySqlClient.MySqlCommand.ExecuteNonQuery() in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlCommand.cs:line 62
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
2019-05-28 18:10:08.248 +08:00 [FTL] Application startup exception
MySql.Data.MySqlClient.MySqlException (0x80004005): Specified key was too long; max key length is 3072 bytes ---> MySql.Data.MySqlClient.MySqlException (0x80004005): Specified key was too long; max key length is 3072 bytes
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ResultSet.cs:line 42
   at MySql.Data.MySqlClient.MySqlDataReader.ActivateResultSet(ResultSet resultSet) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlDataReader.cs:line 80
   at MySql.Data.MySqlClient.MySqlDataReader.ReadFirstResultSetAsync(IOBehavior ioBehavior) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlDataReader.cs:line 302
   at MySql.Data.MySqlClient.MySqlDataReader.CreateAsync(MySqlCommand command, CommandBehavior behavior, ResultSetProtocol resultSetProtocol, IOBehavior ioBehavior) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlDataReader.cs:line 287
   at MySqlConnector.Core.TextCommandExecutor.ExecuteReaderAsync(String commandText, MySqlParameterCollection parameterCollection, CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\TextCommandExecutor.cs:line 37
   at MySql.Data.MySqlClient.MySqlCommand.ExecuteNonQueryAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlCommand.cs:line 261
   at MySql.Data.MySqlClient.MySqlCommand.ExecuteNonQuery() in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlCommand.cs:line 62
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteNonQuery(IRelationalConnection connection, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Migrations.MigrationCommand.ExecuteNonQuery(IRelationalConnection connection, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.MigrationCommandExecutor.ExecuteNonQuery(IEnumerable`1 migrationCommands, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.Migrate(String targetMigration)
   at Microsoft.EntityFrameworkCore.RelationalDatabaseFacadeExtensions.Migrate(DatabaseFacade databaseFacade)
   at IdentityCenter.Startup.InitializeDatabase(IApplicationBuilder app) in G:\项目\AuthticationAndAuthtization\IndentityServerCenter\IdentityCenter\Startup.cs:line 128
   at IdentityCenter.Startup.Configure(IApplicationBuilder app) in G:\项目\AuthticationAndAuthtization\IndentityServerCenter\IdentityCenter\Startup.cs:line 105
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Hosting.ConventionBasedStartup.Configure(IApplicationBuilder app)
   at Microsoft.AspNetCore.Server.IISIntegration.IISSetupFilter.<>c__DisplayClass4_0.<Configure>b__0(IApplicationBuilder app)
   at Microsoft.AspNetCore.HostFilteringStartupFilter.<>c__DisplayClass0_0.<Configure>b__0(IApplicationBuilder app)
   at Microsoft.AspNetCore.Hosting.Internal.AutoRequestServicesStartupFilter.<>c__DisplayClass0_0.<Configure>b__0(IApplicationBuilder builder)
   at Microsoft.AspNetCore.Hosting.Internal.WebHost.BuildApplication()
2019-05-28 18:10:08.291 +08:00 [DBG] Starting grant removal
2019-05-28 18:10:08.724 +08:00 [ERR] Connection id "0HLN3AIKRM4FF", Request id "0HLN3AIKRM4FF:00000001": An unhandled exception was thrown by the application.
System.ArgumentNullException: Value cannot be null.
Parameter name: values
   at System.String.Join(String separator, IEnumerable`1 values)
   at Microsoft.Extensions.RazorViews.BaseView.EndWriteAttribute()
   at Microsoft.AspNetCore.Hosting.Views.ErrorPage.ExecuteAsync()
   at Microsoft.Extensions.RazorViews.BaseView.ExecuteAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequests[TContext](IHttpApplication`1 application)
2019-05-28 18:15:50.878 +08:00 [ERR] Failed executing DbCommand (282ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `AspNetUserTokens` (
    `UserId` nvarchar(400) NOT NULL,
    `LoginProvider` nvarchar(400) NOT NULL,
    `Name` nvarchar(400) NOT NULL,
    `Value` text NULL,
    CONSTRAINT `PK_AspNetUserTokens` PRIMARY KEY (`UserId`, `LoginProvider`, `Name`),
    CONSTRAINT `FK_AspNetUserTokens_AspNetUsers_UserId` FOREIGN KEY (`UserId`) REFERENCES `AspNetUsers` (`Id`) ON DELETE CASCADE
);
MySql.Data.MySqlClient.MySqlException (0x80004005): Specified key was too long; max key length is 3072 bytes ---> MySql.Data.MySqlClient.MySqlException (0x80004005): Specified key was too long; max key length is 3072 bytes
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ResultSet.cs:line 42
   at MySql.Data.MySqlClient.MySqlDataReader.ActivateResultSet(ResultSet resultSet) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlDataReader.cs:line 80
   at MySql.Data.MySqlClient.MySqlDataReader.ReadFirstResultSetAsync(IOBehavior ioBehavior) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlDataReader.cs:line 302
   at MySql.Data.MySqlClient.MySqlDataReader.CreateAsync(MySqlCommand command, CommandBehavior behavior, ResultSetProtocol resultSetProtocol, IOBehavior ioBehavior) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlDataReader.cs:line 287
   at MySqlConnector.Core.TextCommandExecutor.ExecuteReaderAsync(String commandText, MySqlParameterCollection parameterCollection, CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\TextCommandExecutor.cs:line 37
   at MySql.Data.MySqlClient.MySqlCommand.ExecuteNonQueryAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlCommand.cs:line 261
   at MySql.Data.MySqlClient.MySqlCommand.ExecuteNonQuery() in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlCommand.cs:line 62
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
2019-05-28 18:15:51.203 +08:00 [FTL] Application startup exception
MySql.Data.MySqlClient.MySqlException (0x80004005): Specified key was too long; max key length is 3072 bytes ---> MySql.Data.MySqlClient.MySqlException (0x80004005): Specified key was too long; max key length is 3072 bytes
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ResultSet.cs:line 42
   at MySql.Data.MySqlClient.MySqlDataReader.ActivateResultSet(ResultSet resultSet) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlDataReader.cs:line 80
   at MySql.Data.MySqlClient.MySqlDataReader.ReadFirstResultSetAsync(IOBehavior ioBehavior) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlDataReader.cs:line 302
   at MySql.Data.MySqlClient.MySqlDataReader.CreateAsync(MySqlCommand command, CommandBehavior behavior, ResultSetProtocol resultSetProtocol, IOBehavior ioBehavior) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlDataReader.cs:line 287
   at MySqlConnector.Core.TextCommandExecutor.ExecuteReaderAsync(String commandText, MySqlParameterCollection parameterCollection, CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\TextCommandExecutor.cs:line 37
   at MySql.Data.MySqlClient.MySqlCommand.ExecuteNonQueryAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlCommand.cs:line 261
   at MySql.Data.MySqlClient.MySqlCommand.ExecuteNonQuery() in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlCommand.cs:line 62
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteNonQuery(IRelationalConnection connection, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Migrations.MigrationCommand.ExecuteNonQuery(IRelationalConnection connection, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.MigrationCommandExecutor.ExecuteNonQuery(IEnumerable`1 migrationCommands, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.Migrate(String targetMigration)
   at Microsoft.EntityFrameworkCore.RelationalDatabaseFacadeExtensions.Migrate(DatabaseFacade databaseFacade)
   at IdentityCenter.Startup.InitializeDatabase(IApplicationBuilder app) in G:\项目\AuthticationAndAuthtization\IndentityServerCenter\IdentityCenter\Startup.cs:line 128
   at IdentityCenter.Startup.Configure(IApplicationBuilder app) in G:\项目\AuthticationAndAuthtization\IndentityServerCenter\IdentityCenter\Startup.cs:line 105
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Hosting.ConventionBasedStartup.Configure(IApplicationBuilder app)
   at Microsoft.AspNetCore.Server.IISIntegration.IISSetupFilter.<>c__DisplayClass4_0.<Configure>b__0(IApplicationBuilder app)
   at Microsoft.AspNetCore.HostFilteringStartupFilter.<>c__DisplayClass0_0.<Configure>b__0(IApplicationBuilder app)
   at Microsoft.AspNetCore.Hosting.Internal.AutoRequestServicesStartupFilter.<>c__DisplayClass0_0.<Configure>b__0(IApplicationBuilder builder)
   at Microsoft.AspNetCore.Hosting.Internal.WebHost.BuildApplication()
2019-05-28 18:15:51.251 +08:00 [DBG] Starting grant removal
2019-05-28 18:15:51.758 +08:00 [ERR] Connection id "0HLN3ALR2GJD5", Request id "0HLN3ALR2GJD5:00000001": An unhandled exception was thrown by the application.
System.OverflowException: Arithmetic operation resulted in an overflow.
   at System.IO.StreamWriter.Write(String value)
   at Microsoft.AspNetCore.Hosting.Views.ErrorPage.ExecuteAsync()
   at Microsoft.Extensions.RazorViews.BaseView.ExecuteAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequests[TContext](IHttpApplication`1 application)
2019-05-28 18:15:51.758 +08:00 [ERR] Connection id "0HLN3ALR2GJD4", Request id "0HLN3ALR2GJD4:00000001": An unhandled exception was thrown by the application.
System.OverflowException: Arithmetic operation resulted in an overflow.
   at System.IO.StreamWriter.Write(String value)
   at Microsoft.Extensions.RazorViews.BaseView.Write(String value)
   at Microsoft.AspNetCore.Hosting.Views.ErrorPage.ExecuteAsync()
   at Microsoft.Extensions.RazorViews.BaseView.ExecuteAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequests[TContext](IHttpApplication`1 application)
2019-05-28 18:19:06.524 +08:00 [ERR] Failed executing DbCommand (305ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `AspNetRoles` (
    `Id` nvarchar(767) NOT NULL,
    `ConcurrencyStamp` text NULL,
    `Name` nvarchar(256) NULL,
    `NormalizedName` nvarchar(256) NULL,
    CONSTRAINT `PK_AspNetRoles` PRIMARY KEY (`Id`)
);
MySql.Data.MySqlClient.MySqlException (0x80004005): Table 'AspNetRoles' already exists ---> MySql.Data.MySqlClient.MySqlException (0x80004005): Table 'AspNetRoles' already exists
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ResultSet.cs:line 42
   at MySql.Data.MySqlClient.MySqlDataReader.ActivateResultSet(ResultSet resultSet) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlDataReader.cs:line 80
   at MySql.Data.MySqlClient.MySqlDataReader.ReadFirstResultSetAsync(IOBehavior ioBehavior) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlDataReader.cs:line 302
   at MySql.Data.MySqlClient.MySqlDataReader.CreateAsync(MySqlCommand command, CommandBehavior behavior, ResultSetProtocol resultSetProtocol, IOBehavior ioBehavior) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlDataReader.cs:line 287
   at MySqlConnector.Core.TextCommandExecutor.ExecuteReaderAsync(String commandText, MySqlParameterCollection parameterCollection, CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\TextCommandExecutor.cs:line 37
   at MySql.Data.MySqlClient.MySqlCommand.ExecuteNonQueryAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlCommand.cs:line 261
   at MySql.Data.MySqlClient.MySqlCommand.ExecuteNonQuery() in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlCommand.cs:line 62
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
2019-05-28 18:19:06.854 +08:00 [FTL] Application startup exception
MySql.Data.MySqlClient.MySqlException (0x80004005): Table 'AspNetRoles' already exists ---> MySql.Data.MySqlClient.MySqlException (0x80004005): Table 'AspNetRoles' already exists
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ResultSet.cs:line 42
   at MySql.Data.MySqlClient.MySqlDataReader.ActivateResultSet(ResultSet resultSet) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlDataReader.cs:line 80
   at MySql.Data.MySqlClient.MySqlDataReader.ReadFirstResultSetAsync(IOBehavior ioBehavior) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlDataReader.cs:line 302
   at MySql.Data.MySqlClient.MySqlDataReader.CreateAsync(MySqlCommand command, CommandBehavior behavior, ResultSetProtocol resultSetProtocol, IOBehavior ioBehavior) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlDataReader.cs:line 287
   at MySqlConnector.Core.TextCommandExecutor.ExecuteReaderAsync(String commandText, MySqlParameterCollection parameterCollection, CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\TextCommandExecutor.cs:line 37
   at MySql.Data.MySqlClient.MySqlCommand.ExecuteNonQueryAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlCommand.cs:line 261
   at MySql.Data.MySqlClient.MySqlCommand.ExecuteNonQuery() in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlCommand.cs:line 62
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteNonQuery(IRelationalConnection connection, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Migrations.MigrationCommand.ExecuteNonQuery(IRelationalConnection connection, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.MigrationCommandExecutor.ExecuteNonQuery(IEnumerable`1 migrationCommands, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.Migrate(String targetMigration)
   at Microsoft.EntityFrameworkCore.RelationalDatabaseFacadeExtensions.Migrate(DatabaseFacade databaseFacade)
   at IdentityCenter.Startup.InitializeDatabase(IApplicationBuilder app) in G:\项目\AuthticationAndAuthtization\IndentityServerCenter\IdentityCenter\Startup.cs:line 128
   at IdentityCenter.Startup.Configure(IApplicationBuilder app) in G:\项目\AuthticationAndAuthtization\IndentityServerCenter\IdentityCenter\Startup.cs:line 105
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Hosting.ConventionBasedStartup.Configure(IApplicationBuilder app)
   at Microsoft.AspNetCore.Server.IISIntegration.IISSetupFilter.<>c__DisplayClass4_0.<Configure>b__0(IApplicationBuilder app)
   at Microsoft.AspNetCore.HostFilteringStartupFilter.<>c__DisplayClass0_0.<Configure>b__0(IApplicationBuilder app)
   at Microsoft.AspNetCore.Hosting.Internal.AutoRequestServicesStartupFilter.<>c__DisplayClass0_0.<Configure>b__0(IApplicationBuilder builder)
   at Microsoft.AspNetCore.Hosting.Internal.WebHost.BuildApplication()
2019-05-28 18:19:06.906 +08:00 [DBG] Starting grant removal
2019-05-28 18:19:07.487 +08:00 [ERR] Connection id "0HLN3ANLCJJO6", Request id "0HLN3ANLCJJO6:00000001": An unhandled exception was thrown by the application.
System.OverflowException: Arithmetic operation resulted in an overflow.
   at System.IO.StreamWriter.Write(String value)
   at Microsoft.AspNetCore.Hosting.Views.ErrorPage.ExecuteAsync()
   at Microsoft.Extensions.RazorViews.BaseView.ExecuteAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequests[TContext](IHttpApplication`1 application)
2019-05-28 18:19:07.487 +08:00 [ERR] Connection id "0HLN3ANLCJJO5", Request id "0HLN3ANLCJJO5:00000001": An unhandled exception was thrown by the application.
System.ArgumentOutOfRangeException: Index and count must refer to a location within the buffer.
Parameter name: chars
   at System.Text.EncoderNLS.GetBytes(Char[] chars, Int32 charIndex, Int32 charCount, Byte[] bytes, Int32 byteIndex, Boolean flush)
   at System.IO.StreamWriter.Flush(Boolean flushStream, Boolean flushEncoder)
   at System.IO.StreamWriter.Write(String value)
   at Microsoft.AspNetCore.Hosting.Views.ErrorPage.ExecuteAsync()
   at Microsoft.Extensions.RazorViews.BaseView.ExecuteAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequests[TContext](IHttpApplication`1 application)
2019-05-28 18:19:53.286 +08:00 [ERR] Failed executing DbCommand (291ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `AspNetUserLogins` (
    `LoginProvider` nvarchar(767) NOT NULL,
    `ProviderKey` nvarchar(767) NOT NULL,
    `ProviderDisplayName` text NULL,
    `UserId` nvarchar(767) NOT NULL,
    CONSTRAINT `PK_AspNetUserLogins` PRIMARY KEY (`LoginProvider`, `ProviderKey`),
    CONSTRAINT `FK_AspNetUserLogins_AspNetUsers_UserId` FOREIGN KEY (`UserId`) REFERENCES `AspNetUsers` (`Id`) ON DELETE CASCADE
);
MySql.Data.MySqlClient.MySqlException (0x80004005): Specified key was too long; max key length is 3072 bytes ---> MySql.Data.MySqlClient.MySqlException (0x80004005): Specified key was too long; max key length is 3072 bytes
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ResultSet.cs:line 42
   at MySql.Data.MySqlClient.MySqlDataReader.ActivateResultSet(ResultSet resultSet) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlDataReader.cs:line 80
   at MySql.Data.MySqlClient.MySqlDataReader.ReadFirstResultSetAsync(IOBehavior ioBehavior) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlDataReader.cs:line 302
   at MySql.Data.MySqlClient.MySqlDataReader.CreateAsync(MySqlCommand command, CommandBehavior behavior, ResultSetProtocol resultSetProtocol, IOBehavior ioBehavior) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlDataReader.cs:line 287
   at MySqlConnector.Core.TextCommandExecutor.ExecuteReaderAsync(String commandText, MySqlParameterCollection parameterCollection, CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\TextCommandExecutor.cs:line 37
   at MySql.Data.MySqlClient.MySqlCommand.ExecuteNonQueryAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlCommand.cs:line 261
   at MySql.Data.MySqlClient.MySqlCommand.ExecuteNonQuery() in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlCommand.cs:line 62
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
2019-05-28 18:19:53.615 +08:00 [FTL] Application startup exception
MySql.Data.MySqlClient.MySqlException (0x80004005): Specified key was too long; max key length is 3072 bytes ---> MySql.Data.MySqlClient.MySqlException (0x80004005): Specified key was too long; max key length is 3072 bytes
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ResultSet.cs:line 42
   at MySql.Data.MySqlClient.MySqlDataReader.ActivateResultSet(ResultSet resultSet) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlDataReader.cs:line 80
   at MySql.Data.MySqlClient.MySqlDataReader.ReadFirstResultSetAsync(IOBehavior ioBehavior) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlDataReader.cs:line 302
   at MySql.Data.MySqlClient.MySqlDataReader.CreateAsync(MySqlCommand command, CommandBehavior behavior, ResultSetProtocol resultSetProtocol, IOBehavior ioBehavior) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlDataReader.cs:line 287
   at MySqlConnector.Core.TextCommandExecutor.ExecuteReaderAsync(String commandText, MySqlParameterCollection parameterCollection, CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\TextCommandExecutor.cs:line 37
   at MySql.Data.MySqlClient.MySqlCommand.ExecuteNonQueryAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlCommand.cs:line 261
   at MySql.Data.MySqlClient.MySqlCommand.ExecuteNonQuery() in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlCommand.cs:line 62
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteNonQuery(IRelationalConnection connection, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Migrations.MigrationCommand.ExecuteNonQuery(IRelationalConnection connection, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.MigrationCommandExecutor.ExecuteNonQuery(IEnumerable`1 migrationCommands, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.Migrate(String targetMigration)
   at Microsoft.EntityFrameworkCore.RelationalDatabaseFacadeExtensions.Migrate(DatabaseFacade databaseFacade)
   at IdentityCenter.Startup.InitializeDatabase(IApplicationBuilder app) in G:\项目\AuthticationAndAuthtization\IndentityServerCenter\IdentityCenter\Startup.cs:line 128
   at IdentityCenter.Startup.Configure(IApplicationBuilder app) in G:\项目\AuthticationAndAuthtization\IndentityServerCenter\IdentityCenter\Startup.cs:line 105
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Hosting.ConventionBasedStartup.Configure(IApplicationBuilder app)
   at Microsoft.AspNetCore.Server.IISIntegration.IISSetupFilter.<>c__DisplayClass4_0.<Configure>b__0(IApplicationBuilder app)
   at Microsoft.AspNetCore.HostFilteringStartupFilter.<>c__DisplayClass0_0.<Configure>b__0(IApplicationBuilder app)
   at Microsoft.AspNetCore.Hosting.Internal.AutoRequestServicesStartupFilter.<>c__DisplayClass0_0.<Configure>b__0(IApplicationBuilder builder)
   at Microsoft.AspNetCore.Hosting.Internal.WebHost.BuildApplication()
2019-05-28 18:19:53.661 +08:00 [DBG] Starting grant removal
2019-05-28 18:19:54.218 +08:00 [ERR] Connection id "0HLN3AO3ATF5O", Request id "0HLN3AO3ATF5O:00000001": An unhandled exception was thrown by the application.
System.ArgumentOutOfRangeException: Index and count must refer to a location within the buffer.
Parameter name: chars
   at System.Text.EncoderNLS.GetBytes(Char[] chars, Int32 charIndex, Int32 charCount, Byte[] bytes, Int32 byteIndex, Boolean flush)
   at System.IO.StreamWriter.Flush(Boolean flushStream, Boolean flushEncoder)
   at System.IO.StreamWriter.Write(String value)
   at Microsoft.AspNetCore.Hosting.Views.ErrorPage.ExecuteAsync()
   at Microsoft.Extensions.RazorViews.BaseView.ExecuteAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequests[TContext](IHttpApplication`1 application)
2019-05-28 18:19:54.218 +08:00 [ERR] Connection id "0HLN3AO3ATF5N", Request id "0HLN3AO3ATF5N:00000001": An unhandled exception was thrown by the application.
System.OverflowException: Arithmetic operation resulted in an overflow.
   at System.IO.StreamWriter.Write(String value)
   at Microsoft.AspNetCore.Hosting.Views.ErrorPage.ExecuteAsync()
   at Microsoft.Extensions.RazorViews.BaseView.ExecuteAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequests[TContext](IHttpApplication`1 application)
2019-05-28 18:22:18.835 +08:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-05-28 18:22:18.866 +08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-05-28 18:22:18.866 +08:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-05-28 18:22:18.866 +08:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-05-28 18:22:18.866 +08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-05-28 18:22:18.866 +08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-05-28 18:22:19.297 +08:00 [DBG] Starting grant removal
2019-05-28 18:22:19.487 +08:00 [DBG] Login Url: /Account/Login
2019-05-28 18:22:19.490 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-05-28 18:22:19.491 +08:00 [DBG] Logout Url: /Account/Logout
2019-05-28 18:22:19.491 +08:00 [DBG] ConsentUrl Url: /consent
2019-05-28 18:22:19.491 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2019-05-28 18:22:19.491 +08:00 [DBG] Error Url: /home/error
2019-05-28 18:22:19.491 +08:00 [DBG] Error Id Parameter: errorId
2019-05-28 18:23:11.182 +08:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-05-28 18:23:11.211 +08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-05-28 18:23:11.211 +08:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-05-28 18:23:11.211 +08:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-05-28 18:23:11.211 +08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-05-28 18:23:11.211 +08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-05-28 18:23:11.662 +08:00 [DBG] Starting grant removal
2019-05-28 18:23:11.931 +08:00 [DBG] Login Url: /Account/Login
2019-05-28 18:23:11.934 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-05-28 18:23:11.934 +08:00 [DBG] Logout Url: /Account/Logout
2019-05-28 18:23:11.934 +08:00 [DBG] ConsentUrl Url: /consent
2019-05-28 18:23:11.934 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2019-05-28 18:23:11.934 +08:00 [DBG] Error Url: /home/error
2019-05-28 18:23:11.934 +08:00 [DBG] Error Id Parameter: errorId
2019-05-28 23:30:50.803 +08:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-05-28 23:30:50.837 +08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-05-28 23:30:50.838 +08:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-05-28 23:30:50.838 +08:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-05-28 23:30:50.838 +08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-05-28 23:30:50.838 +08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-05-28 23:30:51.096 +08:00 [DBG] Starting grant removal
2019-05-28 23:31:14.087 +08:00 [DBG] Login Url: /Account/Login
2019-05-28 23:31:14.095 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-05-28 23:31:14.095 +08:00 [DBG] Logout Url: /Account/Logout
2019-05-28 23:31:14.096 +08:00 [DBG] ConsentUrl Url: /consent
2019-05-28 23:31:14.096 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2019-05-28 23:31:14.096 +08:00 [DBG] Error Url: /home/error
2019-05-28 23:31:14.096 +08:00 [DBG] Error Id Parameter: errorId
2019-05-28 23:32:14.773 +08:00 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-05-28 23:32:14.862 +08:00 [INF] {"Username":"admin","Endpoint":"UI","Category":"Authentication","Name":"User Login Failure","EventType":"Failure","Id":1001,"Message":"invalid credentials","ActivityId":"0HLN3G62DV8H4:00000002","TimeStamp":"2019-05-28T15:32:14.0000000Z","ProcessId":40948,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"UserLoginFailureEvent"}
2019-05-28 23:32:37.380 +08:00 [DBG] TaskCanceledException. Exiting.
2019-05-28 23:32:37.409 +08:00 [DBG] Stopping grant removal
2019-05-28 23:41:58.585 +08:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-05-28 23:41:58.610 +08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-05-28 23:41:58.610 +08:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-05-28 23:41:58.610 +08:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-05-28 23:41:58.610 +08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-05-28 23:41:58.610 +08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-05-28 23:41:58.806 +08:00 [DBG] Starting grant removal
2019-05-28 23:42:05.833 +08:00 [DBG] Login Url: /Account/Login
2019-05-28 23:42:05.835 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-05-28 23:42:05.835 +08:00 [DBG] Logout Url: /Account/Logout
2019-05-28 23:42:05.836 +08:00 [DBG] ConsentUrl Url: /consent
2019-05-28 23:42:05.836 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2019-05-28 23:42:05.836 +08:00 [DBG] Error Url: /home/error
2019-05-28 23:42:05.836 +08:00 [DBG] Error Id Parameter: errorId
2019-05-28 23:43:42.785 +08:00 [DBG] TaskCanceledException. Exiting.
2019-05-28 23:43:42.819 +08:00 [DBG] Stopping grant removal
2019-05-28 23:43:57.971 +08:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-05-28 23:43:57.998 +08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-05-28 23:43:57.999 +08:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-05-28 23:43:57.999 +08:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-05-28 23:43:57.999 +08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-05-28 23:43:57.999 +08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-05-28 23:43:58.185 +08:00 [DBG] Starting grant removal
2019-05-28 23:44:08.560 +08:00 [DBG] Login Url: /Account/Login
2019-05-28 23:44:08.562 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-05-28 23:44:08.562 +08:00 [DBG] Logout Url: /Account/Logout
2019-05-28 23:44:08.562 +08:00 [DBG] ConsentUrl Url: /consent
2019-05-28 23:44:08.563 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2019-05-28 23:44:08.563 +08:00 [DBG] Error Url: /home/error
2019-05-28 23:44:08.563 +08:00 [DBG] Error Id Parameter: errorId
2019-05-28 23:44:10.643 +08:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The partial view '_ValidationScriptsPartial' was not found. The following locations were searched:
/Views/Account/_ValidationScriptsPartial.cshtml
/Views/Shared/_ValidationScriptsPartial.cshtml
/Pages/Shared/_ValidationScriptsPartial.cshtml
   at Microsoft.AspNetCore.Mvc.ViewFeatures.HtmlHelper.RenderPartialCoreAsync(String partialViewName, Object model, ViewDataDictionary viewData, TextWriter writer)
   at AspNetCore.Views_Account_Register.<ExecuteAsync>b__24_2() in /XiaofengWang的文稿/IndentityserverCentity/IdentityCenter/Views/Account/Register.cshtml:line 104
   at Microsoft.AspNetCore.Mvc.Razor.RazorPage.RenderSectionAsyncCore(String sectionName, Boolean required)
   at Microsoft.AspNetCore.Mvc.Razor.RazorPage.RenderSection(String name, Boolean required)
   at AspNetCore.Views_Shared__Layout.<>c__DisplayClass24_0.<<ExecuteAsync>b__1>d.MoveNext() in /XiaofengWang的文稿/IndentityserverCentity/IdentityCenter/Views/Shared/_Layout.cshtml:line 59
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperExecutionContext.SetOutputContentAsync()
   at AspNetCore.Views_Shared__Layout.ExecuteAsync() in /XiaofengWang的文稿/IndentityserverCentity/IdentityCenter/Views/Shared/_Layout.cshtml:line 7
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageCoreAsync(IRazorPage page, ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageAsync(IRazorPage page, ViewContext context, Boolean invokeViewStarts)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderLayoutAsync(ViewContext context, ViewBufferTextWriter bodyWriter)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderAsync(ViewContext context)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ViewContext viewContext, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ActionContext actionContext, IView view, ViewDataDictionary viewData, ITempDataDictionary tempData, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.ExecuteAsync(ActionContext context, ViewResult result)
   at Microsoft.AspNetCore.Mvc.ViewResult.ExecuteResultAsync(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultAsync(IActionResult result)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResultFilterAsync[TFilter,TFilterAsync]()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResultExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultFilters()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-05-28 23:58:58.309 +08:00 [DBG] TaskCanceledException. Exiting.
2019-05-28 23:58:58.321 +08:00 [DBG] Stopping grant removal
2019-05-28 23:59:18.825 +08:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-05-28 23:59:18.850 +08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-05-28 23:59:18.850 +08:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-05-28 23:59:18.850 +08:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-05-28 23:59:18.850 +08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-05-28 23:59:18.850 +08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-05-28 23:59:19.021 +08:00 [DBG] Starting grant removal
2019-05-28 23:59:24.090 +08:00 [DBG] Login Url: /Account/Login
2019-05-28 23:59:24.092 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-05-28 23:59:24.092 +08:00 [DBG] Logout Url: /Account/Logout
2019-05-28 23:59:24.092 +08:00 [DBG] ConsentUrl Url: /consent
2019-05-28 23:59:24.093 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2019-05-28 23:59:24.093 +08:00 [DBG] Error Url: /home/error
2019-05-28 23:59:24.093 +08:00 [DBG] Error Id Parameter: errorId
2019-05-29 00:01:10.943 +08:00 [DBG] CORS request made for path: /Account/Register from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-05-29 00:02:37.180 +08:00 [DBG] TaskCanceledException. Exiting.
2019-05-29 00:02:37.222 +08:00 [DBG] Stopping grant removal
2019-05-29 00:03:20.855 +08:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-05-29 00:03:20.882 +08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-05-29 00:03:20.883 +08:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-05-29 00:03:20.883 +08:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-05-29 00:03:20.883 +08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-05-29 00:03:20.883 +08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-05-29 00:03:21.186 +08:00 [DBG] Starting grant removal
2019-05-29 00:03:21.960 +08:00 [DBG] Login Url: /Account/Login
2019-05-29 00:03:21.965 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-05-29 00:03:21.965 +08:00 [DBG] Logout Url: /Account/Logout
2019-05-29 00:03:21.965 +08:00 [DBG] ConsentUrl Url: /consent
2019-05-29 00:03:21.965 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2019-05-29 00:03:21.970 +08:00 [DBG] Error Url: /home/error
2019-05-29 00:03:21.970 +08:00 [DBG] Error Id Parameter: errorId
2019-05-29 00:04:32.886 +08:00 [DBG] CORS request made for path: /Account/Register from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-05-29 00:04:58.984 +08:00 [DBG] CORS request made for path: /Account/Register from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-05-29 00:06:19.351 +08:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2019-05-29 00:06:31.020 +08:00 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-05-29 00:06:31.070 +08:00 [INF] {"Username":"shawn","Endpoint":"UI","Category":"Authentication","Name":"User Login Failure","EventType":"Failure","Id":1001,"Message":"invalid credentials","ActivityId":"0HLN3GO0T3MI2:00000009","TimeStamp":"2019-05-28T16:06:31.0000000Z","ProcessId":41589,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"UserLoginFailureEvent"}
2019-05-29 00:10:12.562 +08:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-05-29 00:10:12.595 +08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-05-29 00:10:12.595 +08:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-05-29 00:10:12.595 +08:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-05-29 00:10:12.595 +08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-05-29 00:10:12.595 +08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-05-29 00:10:12.952 +08:00 [DBG] Starting grant removal
2019-05-29 00:10:13.577 +08:00 [DBG] Login Url: /Account/Login
2019-05-29 00:10:13.579 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-05-29 00:10:13.579 +08:00 [DBG] Logout Url: /Account/Logout
2019-05-29 00:10:13.579 +08:00 [DBG] ConsentUrl Url: /consent
2019-05-29 00:10:13.579 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2019-05-29 00:10:13.580 +08:00 [DBG] Error Url: /home/error
2019-05-29 00:10:13.580 +08:00 [DBG] Error Id Parameter: errorId
2019-05-29 00:10:16.001 +08:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2019-05-29 00:11:06.022 +08:00 [DBG] CORS request made for path: /Account/Register from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-05-29 00:11:20.299 +08:00 [WRN] User 04c23b6f-152e-4c2b-9705-92a328c5cfd4 password validation failed: PasswordRequiresUpper.
2019-05-29 00:12:05.713 +08:00 [DBG] CORS request made for path: /Account/Register from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-05-29 00:12:18.251 +08:00 [WRN] User 93200d4c-e01a-4f23-8cc8-2b1822e24b19 password validation failed: PasswordRequiresDigit.
2019-05-29 00:12:44.602 +08:00 [DBG] CORS request made for path: /Account/Register from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-05-29 00:13:15.519 +08:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2019-05-29 00:13:29.653 +08:00 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-05-29 00:13:29.694 +08:00 [INF] {"Username":"shawn","Endpoint":"UI","Category":"Authentication","Name":"User Login Failure","EventType":"Failure","Id":1001,"Message":"invalid credentials","ActivityId":"0HLN3GRRK0PIC:00000012","TimeStamp":"2019-05-28T16:13:29.0000000Z","ProcessId":41714,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"UserLoginFailureEvent"}
2019-05-29 00:14:30.398 +08:00 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-05-29 00:14:30.403 +08:00 [INF] {"Username":"1223138295@qq.com","Endpoint":"UI","Category":"Authentication","Name":"User Login Failure","EventType":"Failure","Id":1001,"Message":"invalid credentials","ActivityId":"0HLN3GRRK0PIC:00000013","TimeStamp":"2019-05-28T16:14:30.0000000Z","ProcessId":41714,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"UserLoginFailureEvent"}
2019-05-29 00:29:44.025 +08:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-05-29 00:29:44.050 +08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-05-29 00:29:44.050 +08:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-05-29 00:29:44.050 +08:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-05-29 00:29:44.050 +08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-05-29 00:29:44.050 +08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-05-29 00:29:44.242 +08:00 [DBG] Starting grant removal
2019-05-29 00:29:48.608 +08:00 [DBG] Login Url: /Account/Login
2019-05-29 00:29:48.611 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-05-29 00:29:48.611 +08:00 [DBG] Logout Url: /Account/Logout
2019-05-29 00:29:48.611 +08:00 [DBG] ConsentUrl Url: /consent
2019-05-29 00:29:48.611 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2019-05-29 00:29:48.611 +08:00 [DBG] Error Url: /home/error
2019-05-29 00:29:48.612 +08:00 [DBG] Error Id Parameter: errorId
2019-05-29 00:29:59.661 +08:00 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-05-29 00:30:00.485 +08:00 [INF] {"Username":"1223138295@qq.com","Provider":null,"ProviderUserId":null,"SubjectId":"1223138295@qq.com","DisplayName":"shawn","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN3H6PRHVL3:00000002","TimeStamp":"2019-05-28T16:30:00.0000000Z","ProcessId":42314,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-05-29 00:30:01.024 +08:00 [DBG] Augmenting SignInContext
2019-05-29 00:30:01.027 +08:00 [DBG] Adding idp claim with value: local
2019-05-29 00:30:01.027 +08:00 [DBG] Adding amr claim with value: pwd
2019-05-29 00:30:01.028 +08:00 [DBG] Adding auth_time claim with value: 1559061001
2019-05-29 00:30:01.046 +08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-05-29 00:30:01.320 +08:00 [DBG] 0 persisted grants found for af61726e-716b-4170-8c26-6568bf294215
2019-05-29 00:30:22.204 +08:00 [DBG] TaskCanceledException. Exiting.
2019-05-29 00:30:22.246 +08:00 [DBG] Stopping grant removal
2019-05-29 16:52:13.838 +08:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-05-29 16:52:13.866 +08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-05-29 16:52:13.866 +08:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-05-29 16:52:13.867 +08:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-05-29 16:52:13.867 +08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-05-29 16:52:13.867 +08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-05-29 16:52:14.285 +08:00 [DBG] Starting grant removal
2019-05-29 16:52:14.502 +08:00 [DBG] Login Url: /Account/Login
2019-05-29 16:52:14.504 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-05-29 16:52:14.504 +08:00 [DBG] Logout Url: /Account/Logout
2019-05-29 16:52:14.504 +08:00 [DBG] ConsentUrl Url: /consent
2019-05-29 16:52:14.505 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2019-05-29 16:52:14.505 +08:00 [DBG] Error Url: /home/error
2019-05-29 16:52:14.505 +08:00 [DBG] Error Id Parameter: errorId
2019-05-29 16:56:42.159 +08:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-05-29 16:56:42.186 +08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-05-29 16:56:42.186 +08:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-05-29 16:56:42.186 +08:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-05-29 16:56:42.186 +08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-05-29 16:56:42.187 +08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-05-29 16:56:42.590 +08:00 [DBG] Starting grant removal
2019-05-29 16:56:42.837 +08:00 [DBG] Login Url: /Account/Login
2019-05-29 16:56:42.839 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-05-29 16:56:42.839 +08:00 [DBG] Logout Url: /Account/Logout
2019-05-29 16:56:42.839 +08:00 [DBG] ConsentUrl Url: /consent
2019-05-29 16:56:42.839 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2019-05-29 16:56:42.839 +08:00 [DBG] Error Url: /home/error
2019-05-29 16:56:42.839 +08:00 [DBG] Error Id Parameter: errorId
2019-05-29 17:03:10.670 +08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-05-29 17:03:10.674 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-05-29 17:03:10.674 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-05-29 17:03:10.677 +08:00 [DBG] Start discovery request
2019-05-29 17:03:11.824 +08:00 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-05-29 17:03:12.075 +08:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-05-29 17:03:12.076 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-05-29 17:03:12.076 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-05-29 17:03:12.079 +08:00 [DBG] Start key discovery request
2019-05-29 17:03:12.312 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-05-29 17:03:12.320 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-05-29 17:03:12.320 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-05-29 17:03:12.328 +08:00 [DBG] Start token request.
2019-05-29 17:03:12.337 +08:00 [DBG] Start client validation
2019-05-29 17:03:12.342 +08:00 [DBG] Start parsing Basic Authentication secret
2019-05-29 17:03:12.347 +08:00 [DBG] Start parsing for secret in post body
2019-05-29 17:03:12.367 +08:00 [DBG] Parser found secret: PostBodySecretParser
2019-05-29 17:03:12.368 +08:00 [DBG] Secret id found: client
2019-05-29 17:03:13.542 +08:00 [DBG] client found in database: true
2019-05-29 17:03:13.551 +08:00 [DBG] client configuration validation for client client succeeded.
2019-05-29 17:03:13.560 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-05-29 17:03:13.561 +08:00 [DBG] Client validation success
2019-05-29 17:03:13.574 +08:00 [INF] {"ClientId":"client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN42E928H6L:00000003","TimeStamp":"2019-05-29T09:03:13.0000000Z","ProcessId":23864,"LocalIpAddress":"127.0.0.1:46886","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-05-29 17:03:13.584 +08:00 [DBG] Start token request validation
2019-05-29 17:03:13.591 +08:00 [DBG] Start client credentials token request validation
2019-05-29 17:03:13.740 +08:00 [DBG] Found [] identity scopes in database
2019-05-29 17:03:14.263 +08:00 [DBG] Found ["api1"] API scopes in database
2019-05-29 17:03:14.385 +08:00 [DBG] Found [] identity scopes in database
2019-05-29 17:03:14.897 +08:00 [DBG] Found ["api1"] API scopes in database
2019-05-29 17:03:14.900 +08:00 [DBG] client credentials token request validation success
2019-05-29 17:03:14.908 +08:00 [INF] Token request validation success
{"ClientId":"client","ClientName":"Client Credentials Client","GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"api1","client_id":"client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-05-29 17:03:14.933 +08:00 [DBG] Getting claims for access token for client: client
2019-05-29 17:03:15.042 +08:00 [INF] {"ClientId":"client","ClientName":"Client Credentials Client","RedirectUri":null,"Endpoint":"Token","SubjectId":null,"Scopes":"api1","GrantType":"client_credentials","Tokens":[{"TokenType":"access_token","TokenValue":"****ed3Q","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN42E928H6L:00000003","TimeStamp":"2019-05-29T09:03:15.0000000Z","ProcessId":23864,"LocalIpAddress":"127.0.0.1:46886","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-29 17:03:15.043 +08:00 [DBG] Token request success.
2019-05-29 17:03:15.289 +08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-05-29 17:03:15.291 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-05-29 17:03:15.292 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-05-29 17:03:15.292 +08:00 [DBG] Start discovery request
2019-05-29 17:03:15.902 +08:00 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-05-29 17:03:16.124 +08:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-05-29 17:03:16.124 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-05-29 17:03:16.125 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-05-29 17:03:16.125 +08:00 [DBG] Start key discovery request
2019-05-29 17:03:32.833 +08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-05-29 17:03:32.836 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-05-29 17:03:32.836 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-05-29 17:03:32.837 +08:00 [DBG] Start discovery request
2019-05-29 17:03:33.706 +08:00 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-05-29 17:03:33.793 +08:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-05-29 17:03:33.794 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-05-29 17:03:33.794 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-05-29 17:03:33.794 +08:00 [DBG] Start key discovery request
2019-05-29 17:03:35.867 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-05-29 17:03:35.868 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-05-29 17:03:35.868 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-05-29 17:03:35.868 +08:00 [DBG] Start token request.
2019-05-29 17:03:35.868 +08:00 [DBG] Start client validation
2019-05-29 17:03:35.868 +08:00 [DBG] Start parsing Basic Authentication secret
2019-05-29 17:03:35.868 +08:00 [DBG] Start parsing for secret in post body
2019-05-29 17:03:35.869 +08:00 [DBG] Parser found secret: PostBodySecretParser
2019-05-29 17:03:35.870 +08:00 [DBG] Secret id found: ro.client
2019-05-29 17:03:36.874 +08:00 [DBG] ro.client found in database: true
2019-05-29 17:03:36.874 +08:00 [DBG] client configuration validation for client ro.client succeeded.
2019-05-29 17:03:36.875 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-05-29 17:03:36.875 +08:00 [DBG] Client validation success
2019-05-29 17:03:36.875 +08:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN42E928H6L:00000008","TimeStamp":"2019-05-29T09:03:36.0000000Z","ProcessId":23864,"LocalIpAddress":"127.0.0.1:46886","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-05-29 17:03:36.875 +08:00 [DBG] Start token request validation
2019-05-29 17:03:36.884 +08:00 [DBG] Start resource owner password token request validation
2019-05-29 17:03:36.985 +08:00 [DBG] Found [] identity scopes in database
2019-05-29 17:03:37.482 +08:00 [DBG] Found ["api1"] API scopes in database
2019-05-29 17:03:37.583 +08:00 [DBG] Found [] identity scopes in database
2019-05-29 17:03:38.078 +08:00 [DBG] Found ["api1"] API scopes in database
2019-05-29 17:03:38.081 +08:00 [INF] User authentication failed: ["invalid_username_or_password"], request details: {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":"1223138295@qq.com","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"password","username":"1223138295@qq.com","password":"***REDACTED***","scope":"api1","client_id":"ro.client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-05-29 17:03:38.081 +08:00 [INF] {"Username":"1223138295@qq.com","Endpoint":"UI","Category":"Authentication","Name":"User Login Failure","EventType":"Failure","Id":1001,"Message":"invalid_username_or_password","ActivityId":"0HLN42E928H6L:00000008","TimeStamp":"2019-05-29T09:03:38.0000000Z","ProcessId":23864,"LocalIpAddress":"127.0.0.1:46886","RemoteIpAddress":"::1","$type":"UserLoginFailureEvent"}
2019-05-29 17:03:38.083 +08:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":null,"Scopes":"api1","GrantType":"password","Error":"invalid_grant","ErrorDescription":"invalid_username_or_password","Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HLN42E928H6L:00000008","TimeStamp":"2019-05-29T09:03:38.0000000Z","ProcessId":23864,"LocalIpAddress":"127.0.0.1:46886","RemoteIpAddress":"::1","$type":"TokenIssuedFailureEvent"}
2019-05-29 17:04:48.163 +08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-05-29 17:04:48.164 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-05-29 17:04:48.172 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-05-29 17:04:48.172 +08:00 [DBG] Start discovery request
2019-05-29 17:04:48.842 +08:00 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-05-29 17:04:48.901 +08:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-05-29 17:04:48.901 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-05-29 17:04:48.901 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-05-29 17:04:48.901 +08:00 [DBG] Start key discovery request
2019-05-29 17:04:50.823 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-05-29 17:04:50.824 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-05-29 17:04:50.824 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-05-29 17:04:50.824 +08:00 [DBG] Start token request.
2019-05-29 17:04:50.824 +08:00 [DBG] Start client validation
2019-05-29 17:04:50.824 +08:00 [DBG] Start parsing Basic Authentication secret
2019-05-29 17:04:50.824 +08:00 [DBG] Start parsing for secret in post body
2019-05-29 17:04:50.825 +08:00 [DBG] Parser found secret: PostBodySecretParser
2019-05-29 17:04:50.825 +08:00 [DBG] Secret id found: ro.client
2019-05-29 17:04:51.794 +08:00 [DBG] ro.client found in database: true
2019-05-29 17:04:51.794 +08:00 [DBG] client configuration validation for client ro.client succeeded.
2019-05-29 17:04:51.794 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-05-29 17:04:51.794 +08:00 [DBG] Client validation success
2019-05-29 17:04:51.794 +08:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN42E928H6M:00000003","TimeStamp":"2019-05-29T09:04:51.0000000Z","ProcessId":23864,"LocalIpAddress":"127.0.0.1:46886","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-05-29 17:04:51.794 +08:00 [DBG] Start token request validation
2019-05-29 17:04:51.794 +08:00 [DBG] Start resource owner password token request validation
2019-05-29 17:04:51.904 +08:00 [DBG] Found [] identity scopes in database
2019-05-29 17:04:52.402 +08:00 [DBG] Found ["api1"] API scopes in database
2019-05-29 17:04:52.503 +08:00 [DBG] Found [] identity scopes in database
2019-05-29 17:04:52.972 +08:00 [DBG] Found ["api1"] API scopes in database
2019-05-29 17:04:52.972 +08:00 [INF] User authentication failed: ["invalid_username_or_password"], request details: {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":"1223138295@qq.com","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"password","username":"1223138295@qq.com","password":"***REDACTED***","scope":"api1","client_id":"ro.client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-05-29 17:04:52.972 +08:00 [INF] {"Username":"1223138295@qq.com","Endpoint":"UI","Category":"Authentication","Name":"User Login Failure","EventType":"Failure","Id":1001,"Message":"invalid_username_or_password","ActivityId":"0HLN42E928H6M:00000003","TimeStamp":"2019-05-29T09:04:52.0000000Z","ProcessId":23864,"LocalIpAddress":"127.0.0.1:46886","RemoteIpAddress":"::1","$type":"UserLoginFailureEvent"}
2019-05-29 17:04:52.973 +08:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":null,"Scopes":"api1","GrantType":"password","Error":"invalid_grant","ErrorDescription":"invalid_username_or_password","Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HLN42E928H6M:00000003","TimeStamp":"2019-05-29T09:04:52.0000000Z","ProcessId":23864,"LocalIpAddress":"127.0.0.1:46886","RemoteIpAddress":"::1","$type":"TokenIssuedFailureEvent"}
2019-05-29 17:06:13.712 +08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-05-29 17:06:13.713 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-05-29 17:06:13.713 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-05-29 17:06:13.713 +08:00 [DBG] Start discovery request
2019-05-29 17:06:14.424 +08:00 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-05-29 17:06:14.484 +08:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-05-29 17:06:14.484 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-05-29 17:06:14.485 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-05-29 17:06:14.485 +08:00 [DBG] Start key discovery request
2019-05-29 17:06:16.107 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-05-29 17:06:16.107 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-05-29 17:06:16.107 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-05-29 17:06:16.107 +08:00 [DBG] Start token request.
2019-05-29 17:06:16.107 +08:00 [DBG] Start client validation
2019-05-29 17:06:16.108 +08:00 [DBG] Start parsing Basic Authentication secret
2019-05-29 17:06:16.108 +08:00 [DBG] Start parsing for secret in post body
2019-05-29 17:06:16.109 +08:00 [DBG] Parser found secret: PostBodySecretParser
2019-05-29 17:06:16.109 +08:00 [DBG] Secret id found: ro.client
2019-05-29 17:06:17.108 +08:00 [DBG] ro.client found in database: true
2019-05-29 17:06:17.108 +08:00 [DBG] client configuration validation for client ro.client succeeded.
2019-05-29 17:06:17.108 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-05-29 17:06:17.108 +08:00 [DBG] Client validation success
2019-05-29 17:06:17.109 +08:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN42E928H6N:00000003","TimeStamp":"2019-05-29T09:06:17.0000000Z","ProcessId":23864,"LocalIpAddress":"127.0.0.1:46886","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-05-29 17:06:17.109 +08:00 [DBG] Start token request validation
2019-05-29 17:06:17.109 +08:00 [DBG] Start resource owner password token request validation
2019-05-29 17:06:17.265 +08:00 [DBG] Found [] identity scopes in database
2019-05-29 17:06:17.752 +08:00 [DBG] Found ["api1"] API scopes in database
2019-05-29 17:06:17.855 +08:00 [DBG] Found [] identity scopes in database
2019-05-29 17:06:18.340 +08:00 [DBG] Found ["api1"] API scopes in database
2019-05-29 17:06:18.341 +08:00 [INF] User authentication failed: ["invalid_username_or_password"], request details: {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":"1223138295@qq.com","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"password","username":"1223138295@qq.com","password":"***REDACTED***","scope":"api1","client_id":"ro.client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-05-29 17:06:18.341 +08:00 [INF] {"Username":"1223138295@qq.com","Endpoint":"UI","Category":"Authentication","Name":"User Login Failure","EventType":"Failure","Id":1001,"Message":"invalid_username_or_password","ActivityId":"0HLN42E928H6N:00000003","TimeStamp":"2019-05-29T09:06:18.0000000Z","ProcessId":23864,"LocalIpAddress":"127.0.0.1:46886","RemoteIpAddress":"::1","$type":"UserLoginFailureEvent"}
2019-05-29 17:06:18.341 +08:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":null,"Scopes":"api1","GrantType":"password","Error":"invalid_grant","ErrorDescription":"invalid_username_or_password","Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HLN42E928H6N:00000003","TimeStamp":"2019-05-29T09:06:18.0000000Z","ProcessId":23864,"LocalIpAddress":"127.0.0.1:46886","RemoteIpAddress":"::1","$type":"TokenIssuedFailureEvent"}
2019-05-29 17:08:23.663 +08:00 [DBG] 0 persisted grants found for af61726e-716b-4170-8c26-6568bf294215
2019-05-29 17:08:31.235 +08:00 [DBG] CORS request made for path: /Account/Logout from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-05-29 17:08:31.306 +08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-05-29 17:08:31.306 +08:00 [INF] {"SubjectId":"af61726e-716b-4170-8c26-6568bf294215","DisplayName":"1223138295@qq.com","Category":"Authentication","Name":"User Logout Success","EventType":"Success","Id":1002,"Message":null,"ActivityId":"0HLN42E928H6O:00000004","TimeStamp":"2019-05-29T09:08:31.0000000Z","ProcessId":23864,"LocalIpAddress":"127.0.0.1:46886","RemoteIpAddress":"::1","$type":"UserLogoutSuccessEvent"}
2019-05-29 17:08:38.750 +08:00 [DBG] CORS request made for path: /Account/Logout from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-05-29 17:08:38.775 +08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-05-29 17:08:38.776 +08:00 [INF] {"SubjectId":"af61726e-716b-4170-8c26-6568bf294215","DisplayName":"1223138295@qq.com","Category":"Authentication","Name":"User Logout Success","EventType":"Success","Id":1002,"Message":null,"ActivityId":"0HLN42E928H6O:00000007","TimeStamp":"2019-05-29T09:08:38.0000000Z","ProcessId":23864,"LocalIpAddress":"127.0.0.1:46886","RemoteIpAddress":"::1","$type":"UserLogoutSuccessEvent"}
2019-05-29 17:08:59.488 +08:00 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-05-29 17:08:59.770 +08:00 [INF] {"Username":"1223138295@qq.com","Provider":null,"ProviderUserId":null,"SubjectId":"1223138295@qq.com","DisplayName":"shawn","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN42E928H6O:00000009","TimeStamp":"2019-05-29T09:08:59.0000000Z","ProcessId":23864,"LocalIpAddress":"127.0.0.1:46886","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-05-29 17:09:00.089 +08:00 [DBG] Augmenting SignInContext
2019-05-29 17:09:00.091 +08:00 [DBG] Adding idp claim with value: local
2019-05-29 17:09:00.092 +08:00 [DBG] Adding amr claim with value: pwd
2019-05-29 17:09:00.092 +08:00 [DBG] Adding auth_time claim with value: 1559120940
2019-05-29 17:09:00.099 +08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-05-29 17:09:00.249 +08:00 [DBG] 0 persisted grants found for af61726e-716b-4170-8c26-6568bf294215
2019-05-29 17:22:01.916 +08:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-05-29 17:22:02.016 +08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-05-29 17:22:02.017 +08:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-05-29 17:22:02.017 +08:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-05-29 17:22:02.017 +08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-05-29 17:22:02.017 +08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-05-29 17:22:02.945 +08:00 [DBG] Starting grant removal
2019-05-29 17:22:03.295 +08:00 [DBG] Login Url: /Account/Login
2019-05-29 17:22:03.301 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-05-29 17:22:03.301 +08:00 [DBG] Logout Url: /Account/Logout
2019-05-29 17:22:03.301 +08:00 [DBG] ConsentUrl Url: /consent
2019-05-29 17:22:03.301 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2019-05-29 17:22:03.301 +08:00 [DBG] Error Url: /home/error
2019-05-29 17:22:03.301 +08:00 [DBG] Error Id Parameter: errorId
2019-05-29 17:22:14.545 +08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-05-29 17:22:14.551 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-05-29 17:22:14.552 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-05-29 17:22:14.556 +08:00 [DBG] Start discovery request
2019-05-29 17:22:15.888 +08:00 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-05-29 17:22:16.013 +08:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-05-29 17:22:16.014 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-05-29 17:22:16.014 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-05-29 17:22:16.018 +08:00 [DBG] Start key discovery request
2019-05-29 17:22:16.246 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-05-29 17:22:16.253 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-05-29 17:22:16.253 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-05-29 17:22:16.270 +08:00 [DBG] Start token request.
2019-05-29 17:22:16.278 +08:00 [DBG] Start client validation
2019-05-29 17:22:16.286 +08:00 [DBG] Start parsing Basic Authentication secret
2019-05-29 17:22:16.290 +08:00 [DBG] Start parsing for secret in post body
2019-05-29 17:22:16.308 +08:00 [DBG] Parser found secret: PostBodySecretParser
2019-05-29 17:22:16.308 +08:00 [DBG] Secret id found: client
2019-05-29 17:22:17.664 +08:00 [DBG] client found in database: true
2019-05-29 17:22:17.672 +08:00 [DBG] client configuration validation for client client succeeded.
2019-05-29 17:22:17.687 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-05-29 17:22:17.687 +08:00 [DBG] Client validation success
2019-05-29 17:22:17.707 +08:00 [INF] {"ClientId":"client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN42SE5UJU9:00000003","TimeStamp":"2019-05-29T09:22:17.0000000Z","ProcessId":29628,"LocalIpAddress":"127.0.0.1:25657","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-05-29 17:22:17.719 +08:00 [DBG] Start token request validation
2019-05-29 17:22:17.732 +08:00 [DBG] Start client credentials token request validation
2019-05-29 17:22:17.878 +08:00 [DBG] Found [] identity scopes in database
2019-05-29 17:22:18.423 +08:00 [DBG] Found ["api1"] API scopes in database
2019-05-29 17:22:18.539 +08:00 [DBG] Found [] identity scopes in database
2019-05-29 17:22:19.055 +08:00 [DBG] Found ["api1"] API scopes in database
2019-05-29 17:22:19.057 +08:00 [DBG] client credentials token request validation success
2019-05-29 17:22:19.065 +08:00 [INF] Token request validation success
{"ClientId":"client","ClientName":"Client Credentials Client","GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"api1","client_id":"client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-05-29 17:22:19.089 +08:00 [DBG] Getting claims for access token for client: client
2019-05-29 17:22:19.187 +08:00 [INF] {"ClientId":"client","ClientName":"Client Credentials Client","RedirectUri":null,"Endpoint":"Token","SubjectId":null,"Scopes":"api1","GrantType":"client_credentials","Tokens":[{"TokenType":"access_token","TokenValue":"****SEmA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN42SE5UJU9:00000003","TimeStamp":"2019-05-29T09:22:19.0000000Z","ProcessId":29628,"LocalIpAddress":"127.0.0.1:25657","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-29 17:22:19.189 +08:00 [DBG] Token request success.
2019-05-29 17:22:19.387 +08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-05-29 17:22:19.387 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-05-29 17:22:19.388 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-05-29 17:22:19.388 +08:00 [DBG] Start discovery request
2019-05-29 17:22:20.055 +08:00 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-05-29 17:22:20.283 +08:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-05-29 17:22:20.284 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-05-29 17:22:20.284 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-05-29 17:22:20.284 +08:00 [DBG] Start key discovery request
2019-05-29 17:23:14.623 +08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-05-29 17:23:14.624 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-05-29 17:23:14.624 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-05-29 17:23:14.624 +08:00 [DBG] Start discovery request
2019-05-29 17:23:15.261 +08:00 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-05-29 17:23:15.285 +08:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-05-29 17:23:15.286 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-05-29 17:23:15.287 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-05-29 17:23:15.287 +08:00 [DBG] Start key discovery request
2019-05-29 17:23:16.098 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-05-29 17:23:16.099 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-05-29 17:23:16.100 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-05-29 17:23:16.100 +08:00 [DBG] Start token request.
2019-05-29 17:23:16.101 +08:00 [DBG] Start client validation
2019-05-29 17:23:16.101 +08:00 [DBG] Start parsing Basic Authentication secret
2019-05-29 17:23:16.101 +08:00 [DBG] Start parsing for secret in post body
2019-05-29 17:23:16.102 +08:00 [DBG] Parser found secret: PostBodySecretParser
2019-05-29 17:23:16.102 +08:00 [DBG] Secret id found: ro.client
2019-05-29 17:23:17.085 +08:00 [DBG] ro.client found in database: true
2019-05-29 17:23:17.085 +08:00 [DBG] client configuration validation for client ro.client succeeded.
2019-05-29 17:23:17.085 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-05-29 17:23:17.085 +08:00 [DBG] Client validation success
2019-05-29 17:23:17.085 +08:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN42SE5UJU8:00000005","TimeStamp":"2019-05-29T09:23:17.0000000Z","ProcessId":29628,"LocalIpAddress":"127.0.0.1:25657","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-05-29 17:23:17.086 +08:00 [DBG] Start token request validation
2019-05-29 17:23:17.093 +08:00 [DBG] Start resource owner password token request validation
2019-05-29 17:23:17.222 +08:00 [DBG] Found [] identity scopes in database
2019-05-29 17:23:17.766 +08:00 [DBG] Found ["api1"] API scopes in database
2019-05-29 17:23:18.112 +08:00 [DBG] Found [] identity scopes in database
2019-05-29 17:23:18.600 +08:00 [DBG] Found ["api1"] API scopes in database
2019-05-29 17:23:18.603 +08:00 [INF] User authentication failed: ["invalid_username_or_password"], request details: {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":"1223138295@qq.com","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"password","username":"1223138295@qq.com","password":"***REDACTED***","scope":"api1","client_id":"ro.client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-05-29 17:23:18.603 +08:00 [INF] {"Username":"1223138295@qq.com","Endpoint":"UI","Category":"Authentication","Name":"User Login Failure","EventType":"Failure","Id":1001,"Message":"invalid_username_or_password","ActivityId":"0HLN42SE5UJU8:00000005","TimeStamp":"2019-05-29T09:23:18.0000000Z","ProcessId":29628,"LocalIpAddress":"127.0.0.1:25657","RemoteIpAddress":"::1","$type":"UserLoginFailureEvent"}
2019-05-29 17:23:18.605 +08:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":null,"Scopes":"api1","GrantType":"password","Error":"invalid_grant","ErrorDescription":"invalid_username_or_password","Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HLN42SE5UJU8:00000005","TimeStamp":"2019-05-29T09:23:18.0000000Z","ProcessId":29628,"LocalIpAddress":"127.0.0.1:25657","RemoteIpAddress":"::1","$type":"TokenIssuedFailureEvent"}
2019-05-29 17:41:29.420 +08:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-05-29 17:41:29.447 +08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-05-29 17:41:29.448 +08:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-05-29 17:41:29.448 +08:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-05-29 17:41:29.448 +08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-05-29 17:41:29.448 +08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-05-29 17:41:29.838 +08:00 [DBG] Starting grant removal
2019-05-29 17:41:30.119 +08:00 [DBG] Login Url: /Account/Login
2019-05-29 17:41:30.121 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-05-29 17:41:30.121 +08:00 [DBG] Logout Url: /Account/Logout
2019-05-29 17:41:30.121 +08:00 [DBG] ConsentUrl Url: /consent
2019-05-29 17:41:30.121 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2019-05-29 17:41:30.122 +08:00 [DBG] Error Url: /home/error
2019-05-29 17:41:30.122 +08:00 [DBG] Error Id Parameter: errorId
2019-05-29 17:42:27.492 +08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-05-29 17:42:27.495 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-05-29 17:42:27.496 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-05-29 17:42:27.499 +08:00 [DBG] Start discovery request
2019-05-29 17:42:28.811 +08:00 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-05-29 17:42:29.012 +08:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-05-29 17:42:29.012 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-05-29 17:42:29.012 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-05-29 17:42:29.015 +08:00 [DBG] Start key discovery request
2019-05-29 17:42:29.259 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-05-29 17:42:29.265 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-05-29 17:42:29.265 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-05-29 17:42:29.275 +08:00 [DBG] Start token request.
2019-05-29 17:42:29.281 +08:00 [DBG] Start client validation
2019-05-29 17:42:29.288 +08:00 [DBG] Start parsing Basic Authentication secret
2019-05-29 17:42:29.292 +08:00 [DBG] Start parsing for secret in post body
2019-05-29 17:42:29.311 +08:00 [DBG] Parser found secret: PostBodySecretParser
2019-05-29 17:42:29.311 +08:00 [DBG] Secret id found: client
2019-05-29 17:42:30.806 +08:00 [DBG] client found in database: true
2019-05-29 17:42:30.819 +08:00 [DBG] client configuration validation for client client succeeded.
2019-05-29 17:42:30.833 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-05-29 17:42:30.833 +08:00 [DBG] Client validation success
2019-05-29 17:42:30.847 +08:00 [INF] {"ClientId":"client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN4379U4U4M:00000003","TimeStamp":"2019-05-29T09:42:30.0000000Z","ProcessId":29040,"LocalIpAddress":"127.0.0.1:6100","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-05-29 17:42:30.856 +08:00 [DBG] Start token request validation
2019-05-29 17:42:30.864 +08:00 [DBG] Start client credentials token request validation
2019-05-29 17:42:31.046 +08:00 [DBG] Found [] identity scopes in database
2019-05-29 17:42:31.682 +08:00 [DBG] Found ["api1"] API scopes in database
2019-05-29 17:42:31.813 +08:00 [DBG] Found [] identity scopes in database
2019-05-29 17:42:32.409 +08:00 [DBG] Found ["api1"] API scopes in database
2019-05-29 17:42:32.412 +08:00 [DBG] client credentials token request validation success
2019-05-29 17:42:32.420 +08:00 [INF] Token request validation success
{"ClientId":"client","ClientName":"Client Credentials Client","GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"api1","client_id":"client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-05-29 17:42:32.445 +08:00 [DBG] Getting claims for access token for client: client
2019-05-29 17:42:32.571 +08:00 [INF] {"ClientId":"client","ClientName":"Client Credentials Client","RedirectUri":null,"Endpoint":"Token","SubjectId":null,"Scopes":"api1","GrantType":"client_credentials","Tokens":[{"TokenType":"access_token","TokenValue":"****YGxw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN4379U4U4M:00000003","TimeStamp":"2019-05-29T09:42:32.0000000Z","ProcessId":29040,"LocalIpAddress":"127.0.0.1:6100","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-29 17:42:32.575 +08:00 [DBG] Token request success.
2019-05-29 17:43:09.351 +08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-05-29 17:43:09.352 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-05-29 17:43:09.365 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-05-29 17:43:09.365 +08:00 [DBG] Start discovery request
2019-05-29 17:43:10.170 +08:00 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-05-29 17:43:10.264 +08:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-05-29 17:43:10.264 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-05-29 17:43:10.264 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-05-29 17:43:10.264 +08:00 [DBG] Start key discovery request
2019-05-29 17:43:10.437 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-05-29 17:43:10.438 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-05-29 17:43:10.438 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-05-29 17:43:10.438 +08:00 [DBG] Start token request.
2019-05-29 17:43:10.438 +08:00 [DBG] Start client validation
2019-05-29 17:43:10.438 +08:00 [DBG] Start parsing Basic Authentication secret
2019-05-29 17:43:10.438 +08:00 [DBG] Start parsing for secret in post body
2019-05-29 17:43:10.441 +08:00 [DBG] Parser found secret: PostBodySecretParser
2019-05-29 17:43:10.441 +08:00 [DBG] Secret id found: client
2019-05-29 17:43:11.650 +08:00 [DBG] client found in database: true
2019-05-29 17:43:11.651 +08:00 [DBG] client configuration validation for client client succeeded.
2019-05-29 17:43:11.651 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-05-29 17:43:11.651 +08:00 [DBG] Client validation success
2019-05-29 17:43:11.651 +08:00 [INF] {"ClientId":"client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN4379U4U4L:00000004","TimeStamp":"2019-05-29T09:43:11.0000000Z","ProcessId":29040,"LocalIpAddress":"127.0.0.1:6100","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-05-29 17:43:11.651 +08:00 [DBG] Start token request validation
2019-05-29 17:43:11.651 +08:00 [DBG] Start client credentials token request validation
2019-05-29 17:43:11.781 +08:00 [DBG] Found [] identity scopes in database
2019-05-29 17:43:12.374 +08:00 [DBG] Found ["api1"] API scopes in database
2019-05-29 17:43:12.506 +08:00 [DBG] Found [] identity scopes in database
2019-05-29 17:43:13.116 +08:00 [DBG] Found ["api1"] API scopes in database
2019-05-29 17:43:13.117 +08:00 [DBG] client credentials token request validation success
2019-05-29 17:43:13.117 +08:00 [INF] Token request validation success
{"ClientId":"client","ClientName":"Client Credentials Client","GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"api1","client_id":"client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-05-29 17:43:13.117 +08:00 [DBG] Getting claims for access token for client: client
2019-05-29 17:43:13.120 +08:00 [INF] {"ClientId":"client","ClientName":"Client Credentials Client","RedirectUri":null,"Endpoint":"Token","SubjectId":null,"Scopes":"api1","GrantType":"client_credentials","Tokens":[{"TokenType":"access_token","TokenValue":"****vvFw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN4379U4U4L:00000004","TimeStamp":"2019-05-29T09:43:13.0000000Z","ProcessId":29040,"LocalIpAddress":"127.0.0.1:6100","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-29 17:43:13.120 +08:00 [DBG] Token request success.
2019-05-29 17:43:13.341 +08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-05-29 17:43:13.341 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-05-29 17:43:13.341 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-05-29 17:43:13.342 +08:00 [DBG] Start discovery request
2019-05-29 17:43:14.117 +08:00 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-05-29 17:43:14.337 +08:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-05-29 17:43:14.337 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-05-29 17:43:14.337 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-05-29 17:43:14.337 +08:00 [DBG] Start key discovery request
2019-05-29 17:43:26.411 +08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-05-29 17:43:26.411 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-05-29 17:43:26.412 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-05-29 17:43:26.412 +08:00 [DBG] Start discovery request
2019-05-29 17:43:27.190 +08:00 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-05-29 17:43:27.213 +08:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-05-29 17:43:27.214 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-05-29 17:43:27.214 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-05-29 17:43:27.214 +08:00 [DBG] Start key discovery request
2019-05-29 17:43:27.946 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-05-29 17:43:27.946 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-05-29 17:43:27.947 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-05-29 17:43:27.947 +08:00 [DBG] Start token request.
2019-05-29 17:43:27.947 +08:00 [DBG] Start client validation
2019-05-29 17:43:27.947 +08:00 [DBG] Start parsing Basic Authentication secret
2019-05-29 17:43:27.947 +08:00 [DBG] Start parsing for secret in post body
2019-05-29 17:43:27.947 +08:00 [DBG] Parser found secret: PostBodySecretParser
2019-05-29 17:43:27.948 +08:00 [DBG] Secret id found: ro.client
2019-05-29 17:43:29.144 +08:00 [DBG] ro.client found in database: true
2019-05-29 17:43:29.144 +08:00 [DBG] client configuration validation for client ro.client succeeded.
2019-05-29 17:43:29.144 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-05-29 17:43:29.144 +08:00 [DBG] Client validation success
2019-05-29 17:43:29.144 +08:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN4379U4U4M:00000007","TimeStamp":"2019-05-29T09:43:29.0000000Z","ProcessId":29040,"LocalIpAddress":"127.0.0.1:6100","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-05-29 17:43:29.145 +08:00 [DBG] Start token request validation
2019-05-29 17:43:29.152 +08:00 [DBG] Start resource owner password token request validation
2019-05-29 17:43:29.267 +08:00 [DBG] Found [] identity scopes in database
2019-05-29 17:43:29.827 +08:00 [DBG] Found ["api1"] API scopes in database
2019-05-29 17:43:29.950 +08:00 [DBG] Found [] identity scopes in database
2019-05-29 17:43:30.530 +08:00 [DBG] Found ["api1"] API scopes in database
2019-05-29 17:43:30.533 +08:00 [INF] User authentication failed: ["invalid_username_or_password"], request details: {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":"1223138295@qq.com","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"password","username":"1223138295@qq.com","password":"***REDACTED***","scope":"api1","client_id":"ro.client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-05-29 17:43:30.533 +08:00 [INF] {"Username":"1223138295@qq.com","Endpoint":"UI","Category":"Authentication","Name":"User Login Failure","EventType":"Failure","Id":1001,"Message":"invalid_username_or_password","ActivityId":"0HLN4379U4U4M:00000007","TimeStamp":"2019-05-29T09:43:30.0000000Z","ProcessId":29040,"LocalIpAddress":"127.0.0.1:6100","RemoteIpAddress":"::1","$type":"UserLoginFailureEvent"}
2019-05-29 17:43:30.535 +08:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":null,"Scopes":"api1","GrantType":"password","Error":"invalid_grant","ErrorDescription":"invalid_username_or_password","Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HLN4379U4U4M:00000007","TimeStamp":"2019-05-29T09:43:30.0000000Z","ProcessId":29040,"LocalIpAddress":"127.0.0.1:6100","RemoteIpAddress":"::1","$type":"TokenIssuedFailureEvent"}
2019-05-29 22:57:59.781 +08:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-05-29 22:57:59.808 +08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-05-29 22:57:59.808 +08:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-05-29 22:57:59.808 +08:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-05-29 22:57:59.808 +08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-05-29 22:57:59.809 +08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-05-29 22:58:00.047 +08:00 [DBG] Starting grant removal
2019-05-29 22:58:26.992 +08:00 [DBG] Login Url: /Account/Login
2019-05-29 22:58:26.995 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-05-29 22:58:26.996 +08:00 [DBG] Logout Url: /Account/Logout
2019-05-29 22:58:26.996 +08:00 [DBG] ConsentUrl Url: /consent
2019-05-29 22:58:26.996 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2019-05-29 22:58:26.996 +08:00 [DBG] Error Url: /home/error
2019-05-29 22:58:26.996 +08:00 [DBG] Error Id Parameter: errorId
2019-05-29 22:58:33.001 +08:00 [DBG] 0 persisted grants found for af61726e-716b-4170-8c26-6568bf294215
2019-05-29 22:58:39.945 +08:00 [DBG] TaskCanceledException. Exiting.
2019-05-29 22:58:39.978 +08:00 [DBG] Stopping grant removal
2019-05-29 23:02:23.792 +08:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-05-29 23:02:23.819 +08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-05-29 23:02:23.820 +08:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-05-29 23:02:23.820 +08:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-05-29 23:02:23.820 +08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-05-29 23:02:23.820 +08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-05-29 23:02:24.012 +08:00 [DBG] Starting grant removal
2019-05-29 23:02:34.162 +08:00 [DBG] Login Url: /Account/Login
2019-05-29 23:02:34.165 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-05-29 23:02:34.165 +08:00 [DBG] Logout Url: /Account/Logout
2019-05-29 23:02:34.165 +08:00 [DBG] ConsentUrl Url: /consent
2019-05-29 23:02:34.166 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2019-05-29 23:02:34.166 +08:00 [DBG] Error Url: /home/error
2019-05-29 23:02:34.166 +08:00 [DBG] Error Id Parameter: errorId
2019-05-29 23:06:30.519 +08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-05-29 23:06:30.524 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-05-29 23:06:30.525 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-05-29 23:06:30.538 +08:00 [DBG] Start discovery request
2019-05-29 23:06:33.295 +08:00 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-05-29 23:06:33.427 +08:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-05-29 23:06:33.428 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-05-29 23:06:33.429 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-05-29 23:06:33.432 +08:00 [DBG] Start key discovery request
2019-05-29 23:06:33.602 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-05-29 23:06:33.611 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-05-29 23:06:33.611 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-05-29 23:06:33.619 +08:00 [DBG] Start token request.
2019-05-29 23:06:33.626 +08:00 [DBG] Start client validation
2019-05-29 23:06:33.632 +08:00 [DBG] Start parsing Basic Authentication secret
2019-05-29 23:06:33.636 +08:00 [DBG] Start parsing for secret in post body
2019-05-29 23:06:33.660 +08:00 [DBG] Parser found secret: PostBodySecretParser
2019-05-29 23:06:33.660 +08:00 [DBG] Secret id found: client
2019-05-29 23:06:36.039 +08:00 [DBG] client found in database: true
2019-05-29 23:06:36.048 +08:00 [DBG] client configuration validation for client client succeeded.
2019-05-29 23:06:36.058 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-05-29 23:06:36.059 +08:00 [DBG] Client validation success
2019-05-29 23:06:36.075 +08:00 [INF] {"ClientId":"client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN48QN1FRJ7:00000003","TimeStamp":"2019-05-29T15:06:36.0000000Z","ProcessId":44337,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-05-29 23:06:36.090 +08:00 [DBG] Start token request validation
2019-05-29 23:06:36.100 +08:00 [DBG] Start client credentials token request validation
2019-05-29 23:06:36.351 +08:00 [DBG] Found [] identity scopes in database
2019-05-29 23:06:37.319 +08:00 [DBG] Found ["api1"] API scopes in database
2019-05-29 23:06:37.513 +08:00 [DBG] Found [] identity scopes in database
2019-05-29 23:06:38.423 +08:00 [DBG] Found ["api1"] API scopes in database
2019-05-29 23:06:38.427 +08:00 [DBG] client credentials token request validation success
2019-05-29 23:06:38.433 +08:00 [INF] Token request validation success
{"ClientId":"client","ClientName":"Client Credentials Client","GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"api1","client_id":"client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-05-29 23:06:38.469 +08:00 [DBG] Getting claims for access token for client: client
2019-05-29 23:06:38.609 +08:00 [INF] {"ClientId":"client","ClientName":"Client Credentials Client","RedirectUri":null,"Endpoint":"Token","SubjectId":null,"Scopes":"api1","GrantType":"client_credentials","Tokens":[{"TokenType":"access_token","TokenValue":"****YNPA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN48QN1FRJ7:00000003","TimeStamp":"2019-05-29T15:06:38.0000000Z","ProcessId":44337,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-29 23:06:38.611 +08:00 [DBG] Token request success.
2019-05-29 23:06:38.777 +08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-05-29 23:06:38.778 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-05-29 23:06:38.779 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-05-29 23:06:38.779 +08:00 [DBG] Start discovery request
2019-05-29 23:06:39.926 +08:00 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-05-29 23:06:40.180 +08:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-05-29 23:06:40.180 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-05-29 23:06:40.181 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-05-29 23:06:40.181 +08:00 [DBG] Start key discovery request
2019-05-29 23:06:41.968 +08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-05-29 23:06:41.969 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-05-29 23:06:41.970 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-05-29 23:06:41.970 +08:00 [DBG] Start discovery request
2019-05-29 23:06:43.133 +08:00 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-05-29 23:06:43.143 +08:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-05-29 23:06:43.144 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-05-29 23:06:43.145 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-05-29 23:06:43.145 +08:00 [DBG] Start key discovery request
2019-05-29 23:06:43.151 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-05-29 23:06:43.153 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-05-29 23:06:43.153 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-05-29 23:06:43.154 +08:00 [DBG] Start token request.
2019-05-29 23:06:43.154 +08:00 [DBG] Start client validation
2019-05-29 23:06:43.154 +08:00 [DBG] Start parsing Basic Authentication secret
2019-05-29 23:06:43.155 +08:00 [DBG] Start parsing for secret in post body
2019-05-29 23:06:43.157 +08:00 [DBG] Parser found secret: PostBodySecretParser
2019-05-29 23:06:43.157 +08:00 [DBG] Secret id found: ro.client
2019-05-29 23:06:45.071 +08:00 [DBG] ro.client found in database: true
2019-05-29 23:06:45.072 +08:00 [DBG] client configuration validation for client ro.client succeeded.
2019-05-29 23:06:45.075 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-05-29 23:06:45.075 +08:00 [DBG] Client validation success
2019-05-29 23:06:45.076 +08:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN48QN1FRJ7:00000006","TimeStamp":"2019-05-29T15:06:45.0000000Z","ProcessId":44337,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-05-29 23:06:45.077 +08:00 [DBG] Start token request validation
2019-05-29 23:06:45.095 +08:00 [DBG] Start resource owner password token request validation
2019-05-29 23:06:45.304 +08:00 [DBG] Found [] identity scopes in database
2019-05-29 23:06:46.259 +08:00 [DBG] Found ["api1"] API scopes in database
2019-05-29 23:06:46.483 +08:00 [DBG] Found [] identity scopes in database
2019-05-29 23:06:47.415 +08:00 [DBG] Found ["api1"] API scopes in database
2019-05-29 23:06:47.917 +08:00 [INF] Credentials validated for username: 1223138295@qq.com
2019-05-29 23:06:47.918 +08:00 [INF] {"Username":"1223138295@qq.com","Provider":null,"ProviderUserId":null,"SubjectId":"af61726e-716b-4170-8c26-6568bf294215","DisplayName":"1223138295@qq.com","Endpoint":"Token","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN48QN1FRJ7:00000006","TimeStamp":"2019-05-29T15:06:47.0000000Z","ProcessId":44337,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-05-29 23:06:47.929 +08:00 [INF] {"Username":"1223138295@qq.com","Provider":null,"ProviderUserId":null,"SubjectId":"af61726e-716b-4170-8c26-6568bf294215","DisplayName":null,"Endpoint":"Token","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN48QN1FRJ7:00000006","TimeStamp":"2019-05-29T15:06:47.0000000Z","ProcessId":44337,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-05-29 23:06:47.929 +08:00 [DBG] Resource owner password token request validation success.
2019-05-29 23:06:47.931 +08:00 [INF] Token request validation success
{"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":"1223138295@qq.com","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"password","username":"1223138295@qq.com","password":"***REDACTED***","scope":"api1","client_id":"ro.client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-05-29 23:06:47.934 +08:00 [DBG] Getting claims for access token for client: ro.client
2019-05-29 23:06:47.934 +08:00 [DBG] Getting claims for access token for subject: af61726e-716b-4170-8c26-6568bf294215
2019-05-29 23:06:47.948 +08:00 [DBG] Claim types from profile service that were filtered: ["sub"]
2019-05-29 23:06:47.977 +08:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"af61726e-716b-4170-8c26-6568bf294215","Scopes":"api1","GrantType":"password","Tokens":[{"TokenType":"access_token","TokenValue":"****1kHw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN48QN1FRJ7:00000006","TimeStamp":"2019-05-29T15:06:47.0000000Z","ProcessId":44337,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-29 23:06:47.978 +08:00 [DBG] Token request success.
2019-05-30 09:58:27.401 +08:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-05-30 09:58:27.431 +08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-05-30 09:58:27.431 +08:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-05-30 09:58:27.431 +08:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-05-30 09:58:27.431 +08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-05-30 09:58:27.431 +08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-05-30 09:58:27.921 +08:00 [DBG] Starting grant removal
2019-05-30 09:58:28.241 +08:00 [DBG] Login Url: /Account/Login
2019-05-30 09:58:28.243 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-05-30 09:58:28.243 +08:00 [DBG] Logout Url: /Account/Logout
2019-05-30 09:58:28.243 +08:00 [DBG] ConsentUrl Url: /consent
2019-05-30 09:58:28.243 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2019-05-30 09:58:28.244 +08:00 [DBG] Error Url: /home/error
2019-05-30 09:58:28.244 +08:00 [DBG] Error Id Parameter: errorId
2019-05-30 09:58:52.030 +08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-05-30 09:58:52.036 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-05-30 09:58:52.037 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-05-30 09:58:52.040 +08:00 [DBG] Start discovery request
2019-05-30 09:58:53.313 +08:00 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-05-30 09:58:53.477 +08:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-05-30 09:58:53.478 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-05-30 09:58:53.478 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-05-30 09:58:53.482 +08:00 [DBG] Start key discovery request
2019-05-30 09:58:53.702 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-05-30 09:58:53.710 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-05-30 09:58:53.710 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-05-30 09:58:53.717 +08:00 [DBG] Start token request.
2019-05-30 09:58:53.724 +08:00 [DBG] Start client validation
2019-05-30 09:58:53.730 +08:00 [DBG] Start parsing Basic Authentication secret
2019-05-30 09:58:53.735 +08:00 [DBG] Start parsing for secret in post body
2019-05-30 09:58:53.754 +08:00 [DBG] Parser found secret: PostBodySecretParser
2019-05-30 09:58:53.754 +08:00 [DBG] Secret id found: client
2019-05-30 09:58:55.074 +08:00 [DBG] client found in database: true
2019-05-30 09:58:55.085 +08:00 [DBG] client configuration validation for client client succeeded.
2019-05-30 09:58:55.096 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-05-30 09:58:55.096 +08:00 [DBG] Client validation success
2019-05-30 09:58:55.108 +08:00 [INF] {"ClientId":"client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN4K97FTFPR:00000002","TimeStamp":"2019-05-30T01:58:55.0000000Z","ProcessId":10952,"LocalIpAddress":"127.0.0.1:17798","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-05-30 09:58:55.122 +08:00 [DBG] Start token request validation
2019-05-30 09:58:55.129 +08:00 [DBG] Start client credentials token request validation
2019-05-30 09:58:55.274 +08:00 [DBG] Found [] identity scopes in database
2019-05-30 09:58:55.829 +08:00 [DBG] Found ["api1"] API scopes in database
2019-05-30 09:58:55.952 +08:00 [DBG] Found [] identity scopes in database
2019-05-30 09:58:56.437 +08:00 [DBG] Found ["api1"] API scopes in database
2019-05-30 09:58:56.440 +08:00 [DBG] client credentials token request validation success
2019-05-30 09:58:56.448 +08:00 [INF] Token request validation success
{"ClientId":"client","ClientName":"Client Credentials Client","GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"api1","client_id":"client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-05-30 09:58:56.474 +08:00 [DBG] Getting claims for access token for client: client
2019-05-30 09:58:56.603 +08:00 [INF] {"ClientId":"client","ClientName":"Client Credentials Client","RedirectUri":null,"Endpoint":"Token","SubjectId":null,"Scopes":"api1","GrantType":"client_credentials","Tokens":[{"TokenType":"access_token","TokenValue":"****qTBw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN4K97FTFPR:00000002","TimeStamp":"2019-05-30T01:58:56.0000000Z","ProcessId":10952,"LocalIpAddress":"127.0.0.1:17798","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-30 09:58:56.604 +08:00 [DBG] Token request success.
2019-05-30 09:58:56.838 +08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-05-30 09:58:56.839 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-05-30 09:58:56.839 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-05-30 09:58:56.839 +08:00 [DBG] Start discovery request
2019-05-30 09:58:57.456 +08:00 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-05-30 09:58:57.691 +08:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-05-30 09:58:57.691 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-05-30 09:58:57.693 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-05-30 09:58:57.700 +08:00 [DBG] Start key discovery request
2019-05-30 09:59:15.052 +08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-05-30 09:59:15.053 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-05-30 09:59:15.053 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-05-30 09:59:15.053 +08:00 [DBG] Start discovery request
2019-05-30 09:59:15.689 +08:00 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-05-30 09:59:15.713 +08:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-05-30 09:59:15.713 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-05-30 09:59:15.714 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-05-30 09:59:15.714 +08:00 [DBG] Start key discovery request
2019-05-30 09:59:16.452 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-05-30 09:59:16.454 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-05-30 09:59:16.454 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-05-30 09:59:16.454 +08:00 [DBG] Start token request.
2019-05-30 09:59:16.454 +08:00 [DBG] Start client validation
2019-05-30 09:59:16.455 +08:00 [DBG] Start parsing Basic Authentication secret
2019-05-30 09:59:16.455 +08:00 [DBG] Start parsing for secret in post body
2019-05-30 09:59:16.457 +08:00 [DBG] Parser found secret: PostBodySecretParser
2019-05-30 09:59:16.457 +08:00 [DBG] Secret id found: ro.client
2019-05-30 09:59:17.468 +08:00 [DBG] ro.client found in database: true
2019-05-30 09:59:17.468 +08:00 [DBG] client configuration validation for client ro.client succeeded.
2019-05-30 09:59:17.469 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-05-30 09:59:17.469 +08:00 [DBG] Client validation success
2019-05-30 09:59:17.469 +08:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN4K97FTFPO:00000004","TimeStamp":"2019-05-30T01:59:17.0000000Z","ProcessId":10952,"LocalIpAddress":"127.0.0.1:17798","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-05-30 09:59:17.469 +08:00 [DBG] Start token request validation
2019-05-30 09:59:17.478 +08:00 [DBG] Start resource owner password token request validation
2019-05-30 09:59:17.821 +08:00 [DBG] Found [] identity scopes in database
2019-05-30 09:59:18.299 +08:00 [DBG] Found ["api1"] API scopes in database
2019-05-30 09:59:18.401 +08:00 [DBG] Found [] identity scopes in database
2019-05-30 09:59:18.893 +08:00 [DBG] Found ["api1"] API scopes in database
2019-05-30 09:59:19.060 +08:00 [INF] Credentials validated for username: 1223138295@qq.com
2019-05-30 09:59:19.061 +08:00 [INF] {"Username":"1223138295@qq.com","Provider":null,"ProviderUserId":null,"SubjectId":"af61726e-716b-4170-8c26-6568bf294215","DisplayName":"1223138295@qq.com","Endpoint":"Token","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN4K97FTFPO:00000004","TimeStamp":"2019-05-30T01:59:19.0000000Z","ProcessId":10952,"LocalIpAddress":"127.0.0.1:17798","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-05-30 09:59:19.069 +08:00 [INF] {"Username":"1223138295@qq.com","Provider":null,"ProviderUserId":null,"SubjectId":"af61726e-716b-4170-8c26-6568bf294215","DisplayName":null,"Endpoint":"Token","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN4K97FTFPO:00000004","TimeStamp":"2019-05-30T01:59:19.0000000Z","ProcessId":10952,"LocalIpAddress":"127.0.0.1:17798","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-05-30 09:59:19.069 +08:00 [DBG] Resource owner password token request validation success.
2019-05-30 09:59:19.070 +08:00 [INF] Token request validation success
{"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":"1223138295@qq.com","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"password","username":"1223138295@qq.com","password":"***REDACTED***","scope":"api1","client_id":"ro.client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-05-30 09:59:19.073 +08:00 [DBG] Getting claims for access token for client: ro.client
2019-05-30 09:59:19.073 +08:00 [DBG] Getting claims for access token for subject: af61726e-716b-4170-8c26-6568bf294215
2019-05-30 09:59:19.082 +08:00 [DBG] Claim types from profile service that were filtered: ["sub"]
2019-05-30 09:59:19.087 +08:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"af61726e-716b-4170-8c26-6568bf294215","Scopes":"api1","GrantType":"password","Tokens":[{"TokenType":"access_token","TokenValue":"****TuFg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN4K97FTFPO:00000004","TimeStamp":"2019-05-30T01:59:19.0000000Z","ProcessId":10952,"LocalIpAddress":"127.0.0.1:17798","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-30 09:59:19.087 +08:00 [DBG] Token request success.
2019-05-30 10:00:24.179 +08:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-05-30 10:00:24.206 +08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-05-30 10:00:24.206 +08:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-05-30 10:00:24.206 +08:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-05-30 10:00:24.206 +08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-05-30 10:00:24.206 +08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-05-30 10:00:24.283 +08:00 [DBG] Starting grant removal
2019-05-30 10:00:24.535 +08:00 [DBG] Login Url: /Account/Login
2019-05-30 10:00:24.537 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-05-30 10:00:24.537 +08:00 [DBG] Logout Url: /Account/Logout
2019-05-30 10:00:24.538 +08:00 [DBG] ConsentUrl Url: /consent
2019-05-30 10:00:24.538 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2019-05-30 10:00:24.538 +08:00 [DBG] Error Url: /home/error
2019-05-30 10:00:24.538 +08:00 [DBG] Error Id Parameter: errorId
2019-05-30 10:00:24.562 +08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-05-30 10:00:24.570 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-05-30 10:00:24.570 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-05-30 10:00:24.573 +08:00 [DBG] Start discovery request
2019-05-30 10:00:26.009 +08:00 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-05-30 10:00:32.825 +08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-05-30 10:00:32.826 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-05-30 10:00:32.826 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-05-30 10:00:32.826 +08:00 [DBG] Start discovery request
2019-05-30 10:00:32.916 +08:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-05-30 10:00:32.917 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-05-30 10:00:32.917 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-05-30 10:00:32.920 +08:00 [DBG] Start key discovery request
2019-05-30 10:00:33.115 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-05-30 10:00:33.122 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-05-30 10:00:33.123 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-05-30 10:00:33.135 +08:00 [DBG] Start token request.
2019-05-30 10:00:33.143 +08:00 [DBG] Start client validation
2019-05-30 10:00:33.148 +08:00 [DBG] Start parsing Basic Authentication secret
2019-05-30 10:00:33.151 +08:00 [DBG] Start parsing for secret in post body
2019-05-30 10:00:33.168 +08:00 [DBG] Parser found secret: PostBodySecretParser
2019-05-30 10:00:33.168 +08:00 [DBG] Secret id found: client
2019-05-30 10:00:33.611 +08:00 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-05-30 10:00:33.630 +08:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-05-30 10:00:33.632 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-05-30 10:00:33.632 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-05-30 10:00:33.632 +08:00 [DBG] Start key discovery request
2019-05-30 10:00:33.660 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-05-30 10:00:33.661 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-05-30 10:00:33.661 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-05-30 10:00:33.661 +08:00 [DBG] Start token request.
2019-05-30 10:00:33.661 +08:00 [DBG] Start client validation
2019-05-30 10:00:33.661 +08:00 [DBG] Start parsing Basic Authentication secret
2019-05-30 10:00:33.662 +08:00 [DBG] Start parsing for secret in post body
2019-05-30 10:00:33.662 +08:00 [DBG] Parser found secret: PostBodySecretParser
2019-05-30 10:00:33.662 +08:00 [DBG] Secret id found: ro.client
2019-05-30 10:00:34.915 +08:00 [DBG] client found in database: true
2019-05-30 10:00:34.927 +08:00 [DBG] client configuration validation for client client succeeded.
2019-05-30 10:00:34.932 +08:00 [DBG] ro.client found in database: true
2019-05-30 10:00:34.932 +08:00 [DBG] client configuration validation for client ro.client succeeded.
2019-05-30 10:00:34.937 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-05-30 10:00:34.937 +08:00 [DBG] Client validation success
2019-05-30 10:00:34.937 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-05-30 10:00:34.938 +08:00 [DBG] Client validation success
2019-05-30 10:00:34.949 +08:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN4KAA5L4S4:00000004","TimeStamp":"2019-05-30T02:00:34.0000000Z","ProcessId":8148,"LocalIpAddress":"127.0.0.1:26700","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-05-30 10:00:34.949 +08:00 [INF] {"ClientId":"client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN4KAA5L4S5:00000002","TimeStamp":"2019-05-30T02:00:34.0000000Z","ProcessId":8148,"LocalIpAddress":"127.0.0.1:26700","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-05-30 10:00:34.959 +08:00 [DBG] Start token request validation
2019-05-30 10:00:34.960 +08:00 [DBG] Start token request validation
2019-05-30 10:00:34.968 +08:00 [DBG] Start client credentials token request validation
2019-05-30 10:00:34.973 +08:00 [DBG] Start resource owner password token request validation
2019-05-30 10:00:35.192 +08:00 [DBG] Found [] identity scopes in database
2019-05-30 10:00:35.196 +08:00 [DBG] Found [] identity scopes in database
2019-05-30 10:00:36.072 +08:00 [DBG] Found ["api1"] API scopes in database
2019-05-30 10:00:36.122 +08:00 [DBG] Found ["api1"] API scopes in database
2019-05-30 10:00:36.272 +08:00 [DBG] Found [] identity scopes in database
2019-05-30 10:00:36.312 +08:00 [DBG] Found [] identity scopes in database
2019-05-30 10:00:37.242 +08:00 [DBG] Found ["api1"] API scopes in database
2019-05-30 10:00:37.261 +08:00 [DBG] Found ["api1"] API scopes in database
2019-05-30 10:00:37.262 +08:00 [DBG] client credentials token request validation success
2019-05-30 10:00:37.270 +08:00 [INF] Token request validation success
{"ClientId":"client","ClientName":"Client Credentials Client","GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"api1","client_id":"client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-05-30 10:00:37.295 +08:00 [DBG] Getting claims for access token for client: client
2019-05-30 10:00:37.369 +08:00 [INF] {"ClientId":"client","ClientName":"Client Credentials Client","RedirectUri":null,"Endpoint":"Token","SubjectId":null,"Scopes":"api1","GrantType":"client_credentials","Tokens":[{"TokenType":"access_token","TokenValue":"****8rMQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN4KAA5L4S5:00000002","TimeStamp":"2019-05-30T02:00:37.0000000Z","ProcessId":8148,"LocalIpAddress":"127.0.0.1:26700","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-30 10:00:37.370 +08:00 [DBG] Token request success.
2019-05-30 10:00:37.561 +08:00 [INF] Credentials validated for username: 1223138295@qq.com
2019-05-30 10:00:37.563 +08:00 [INF] {"Username":"1223138295@qq.com","Provider":null,"ProviderUserId":null,"SubjectId":"af61726e-716b-4170-8c26-6568bf294215","DisplayName":"1223138295@qq.com","Endpoint":"Token","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN4KAA5L4S4:00000004","TimeStamp":"2019-05-30T02:00:37.0000000Z","ProcessId":8148,"LocalIpAddress":"127.0.0.1:26700","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-05-30 10:00:37.573 +08:00 [INF] {"Username":"1223138295@qq.com","Provider":null,"ProviderUserId":null,"SubjectId":"af61726e-716b-4170-8c26-6568bf294215","DisplayName":null,"Endpoint":"Token","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN4KAA5L4S4:00000004","TimeStamp":"2019-05-30T02:00:37.0000000Z","ProcessId":8148,"LocalIpAddress":"127.0.0.1:26700","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-05-30 10:00:37.573 +08:00 [DBG] Resource owner password token request validation success.
2019-05-30 10:00:37.575 +08:00 [INF] Token request validation success
{"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":"1223138295@qq.com","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"password","username":"1223138295@qq.com","password":"***REDACTED***","scope":"api1","client_id":"ro.client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-05-30 10:00:37.579 +08:00 [DBG] Getting claims for access token for client: ro.client
2019-05-30 10:00:37.580 +08:00 [DBG] Getting claims for access token for subject: af61726e-716b-4170-8c26-6568bf294215
2019-05-30 10:00:37.588 +08:00 [DBG] Claim types from profile service that were filtered: ["sub"]
2019-05-30 10:00:37.593 +08:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"af61726e-716b-4170-8c26-6568bf294215","Scopes":"api1","GrantType":"password","Tokens":[{"TokenType":"access_token","TokenValue":"****WvEw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN4KAA5L4S4:00000004","TimeStamp":"2019-05-30T02:00:37.0000000Z","ProcessId":8148,"LocalIpAddress":"127.0.0.1:26700","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-30 10:00:37.593 +08:00 [DBG] Token request success.
2019-05-30 10:00:37.625 +08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-05-30 10:00:37.626 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-05-30 10:00:37.626 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-05-30 10:00:37.626 +08:00 [DBG] Start discovery request
2019-05-30 10:00:38.871 +08:00 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-05-30 10:00:39.104 +08:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-05-30 10:00:39.105 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-05-30 10:00:39.105 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-05-30 10:00:39.105 +08:00 [DBG] Start key discovery request
2019-05-30 10:00:58.246 +08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-05-30 10:00:58.246 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-05-30 10:00:58.246 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-05-30 10:00:58.246 +08:00 [DBG] Start discovery request
2019-05-30 10:00:59.437 +08:00 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-05-30 10:00:59.452 +08:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-05-30 10:00:59.454 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-05-30 10:00:59.454 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-05-30 10:00:59.454 +08:00 [DBG] Start key discovery request
2019-05-30 10:00:59.467 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-05-30 10:00:59.468 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-05-30 10:00:59.468 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-05-30 10:00:59.468 +08:00 [DBG] Start token request.
2019-05-30 10:00:59.468 +08:00 [DBG] Start client validation
2019-05-30 10:00:59.468 +08:00 [DBG] Start parsing Basic Authentication secret
2019-05-30 10:00:59.468 +08:00 [DBG] Start parsing for secret in post body
2019-05-30 10:00:59.469 +08:00 [DBG] Parser found secret: PostBodySecretParser
2019-05-30 10:00:59.469 +08:00 [DBG] Secret id found: ro.client
2019-05-30 10:01:00.599 +08:00 [DBG] ro.client found in database: true
2019-05-30 10:01:00.599 +08:00 [DBG] client configuration validation for client ro.client succeeded.
2019-05-30 10:01:00.599 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-05-30 10:01:00.599 +08:00 [DBG] Client validation success
2019-05-30 10:01:00.599 +08:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN4KAA5L4S5:00000005","TimeStamp":"2019-05-30T02:01:00.0000000Z","ProcessId":8148,"LocalIpAddress":"127.0.0.1:26700","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-05-30 10:01:00.600 +08:00 [DBG] Start token request validation
2019-05-30 10:01:00.600 +08:00 [DBG] Start resource owner password token request validation
2019-05-30 10:01:00.739 +08:00 [DBG] Found [] identity scopes in database
2019-05-30 10:01:01.518 +08:00 [DBG] Found ["api1"] API scopes in database
2019-05-30 10:01:01.632 +08:00 [DBG] Found [] identity scopes in database
2019-05-30 10:01:02.235 +08:00 [DBG] Found ["api1"] API scopes in database
2019-05-30 10:01:02.376 +08:00 [INF] Credentials validated for username: 1223138295@qq.com
2019-05-30 10:01:02.376 +08:00 [INF] {"Username":"1223138295@qq.com","Provider":null,"ProviderUserId":null,"SubjectId":"af61726e-716b-4170-8c26-6568bf294215","DisplayName":"1223138295@qq.com","Endpoint":"Token","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN4KAA5L4S5:00000005","TimeStamp":"2019-05-30T02:01:02.0000000Z","ProcessId":8148,"LocalIpAddress":"127.0.0.1:26700","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-05-30 10:01:02.377 +08:00 [INF] {"Username":"1223138295@qq.com","Provider":null,"ProviderUserId":null,"SubjectId":"af61726e-716b-4170-8c26-6568bf294215","DisplayName":null,"Endpoint":"Token","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN4KAA5L4S5:00000005","TimeStamp":"2019-05-30T02:01:02.0000000Z","ProcessId":8148,"LocalIpAddress":"127.0.0.1:26700","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-05-30 10:01:02.377 +08:00 [DBG] Resource owner password token request validation success.
2019-05-30 10:01:02.377 +08:00 [INF] Token request validation success
{"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":"1223138295@qq.com","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"password","username":"1223138295@qq.com","password":"***REDACTED***","scope":"api1","client_id":"ro.client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-05-30 10:01:02.377 +08:00 [DBG] Getting claims for access token for client: ro.client
2019-05-30 10:01:02.377 +08:00 [DBG] Getting claims for access token for subject: af61726e-716b-4170-8c26-6568bf294215
2019-05-30 10:01:02.377 +08:00 [DBG] Claim types from profile service that were filtered: ["sub"]
2019-05-30 10:01:02.380 +08:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"af61726e-716b-4170-8c26-6568bf294215","Scopes":"api1","GrantType":"password","Tokens":[{"TokenType":"access_token","TokenValue":"****5s1Q","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN4KAA5L4S5:00000005","TimeStamp":"2019-05-30T02:01:02.0000000Z","ProcessId":8148,"LocalIpAddress":"127.0.0.1:26700","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-30 10:01:02.380 +08:00 [DBG] Token request success.
2019-05-30 10:01:17.296 +08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-05-30 10:01:17.297 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-05-30 10:01:17.297 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-05-30 10:01:17.297 +08:00 [DBG] Start discovery request
2019-05-30 10:01:18.087 +08:00 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-05-30 10:01:18.100 +08:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-05-30 10:01:18.101 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-05-30 10:01:18.101 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-05-30 10:01:18.101 +08:00 [DBG] Start key discovery request
2019-05-30 10:01:18.116 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-05-30 10:01:18.116 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-05-30 10:01:18.116 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-05-30 10:01:18.116 +08:00 [DBG] Start token request.
2019-05-30 10:01:18.116 +08:00 [DBG] Start client validation
2019-05-30 10:01:18.117 +08:00 [DBG] Start parsing Basic Authentication secret
2019-05-30 10:01:18.117 +08:00 [DBG] Start parsing for secret in post body
2019-05-30 10:01:18.117 +08:00 [DBG] Parser found secret: PostBodySecretParser
2019-05-30 10:01:18.117 +08:00 [DBG] Secret id found: ro.client
2019-05-30 10:01:19.312 +08:00 [DBG] ro.client found in database: true
2019-05-30 10:01:19.313 +08:00 [DBG] client configuration validation for client ro.client succeeded.
2019-05-30 10:01:19.313 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-05-30 10:01:19.313 +08:00 [DBG] Client validation success
2019-05-30 10:01:19.313 +08:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN4KAA5L4S4:00000008","TimeStamp":"2019-05-30T02:01:19.0000000Z","ProcessId":8148,"LocalIpAddress":"127.0.0.1:26700","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-05-30 10:01:19.314 +08:00 [DBG] Start token request validation
2019-05-30 10:01:19.314 +08:00 [DBG] Start resource owner password token request validation
2019-05-30 10:01:19.431 +08:00 [DBG] Found [] identity scopes in database
2019-05-30 10:01:20.026 +08:00 [DBG] Found ["api1"] API scopes in database
2019-05-30 10:01:20.156 +08:00 [DBG] Found [] identity scopes in database
2019-05-30 10:01:20.757 +08:00 [DBG] Found ["api1"] API scopes in database
2019-05-30 10:01:20.903 +08:00 [INF] Credentials validated for username: 1223138295@qq.com
2019-05-30 10:01:20.903 +08:00 [INF] {"Username":"1223138295@qq.com","Provider":null,"ProviderUserId":null,"SubjectId":"af61726e-716b-4170-8c26-6568bf294215","DisplayName":"1223138295@qq.com","Endpoint":"Token","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN4KAA5L4S4:00000008","TimeStamp":"2019-05-30T02:01:20.0000000Z","ProcessId":8148,"LocalIpAddress":"127.0.0.1:26700","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-05-30 10:01:20.903 +08:00 [INF] {"Username":"1223138295@qq.com","Provider":null,"ProviderUserId":null,"SubjectId":"af61726e-716b-4170-8c26-6568bf294215","DisplayName":null,"Endpoint":"Token","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN4KAA5L4S4:00000008","TimeStamp":"2019-05-30T02:01:20.0000000Z","ProcessId":8148,"LocalIpAddress":"127.0.0.1:26700","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-05-30 10:01:20.903 +08:00 [DBG] Resource owner password token request validation success.
2019-05-30 10:01:20.903 +08:00 [INF] Token request validation success
{"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":"1223138295@qq.com","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"password","username":"1223138295@qq.com","password":"***REDACTED***","scope":"api1","client_id":"ro.client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-05-30 10:01:20.903 +08:00 [DBG] Getting claims for access token for client: ro.client
2019-05-30 10:01:20.903 +08:00 [DBG] Getting claims for access token for subject: af61726e-716b-4170-8c26-6568bf294215
2019-05-30 10:01:20.904 +08:00 [DBG] Claim types from profile service that were filtered: ["sub"]
2019-05-30 10:01:20.907 +08:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"af61726e-716b-4170-8c26-6568bf294215","Scopes":"api1","GrantType":"password","Tokens":[{"TokenType":"access_token","TokenValue":"****-_Uw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN4KAA5L4S4:00000008","TimeStamp":"2019-05-30T02:01:20.0000000Z","ProcessId":8148,"LocalIpAddress":"127.0.0.1:26700","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-30 10:01:20.907 +08:00 [DBG] Token request success.
2019-05-30 10:57:34.525 +08:00 [DBG] CORS request made for path: /Account/Logout from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-05-30 10:57:34.566 +08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-05-30 10:57:34.567 +08:00 [INF] {"SubjectId":"af61726e-716b-4170-8c26-6568bf294215","DisplayName":"1223138295@qq.com","Category":"Authentication","Name":"User Logout Success","EventType":"Success","Id":1002,"Message":null,"ActivityId":"0HLN4KAA5L4S7:00000002","TimeStamp":"2019-05-30T02:57:34.0000000Z","ProcessId":8148,"LocalIpAddress":"127.0.0.1:26700","RemoteIpAddress":"::1","$type":"UserLogoutSuccessEvent"}
2019-05-30 10:58:02.784 +08:00 [DBG] CORS request made for path: /Account/Logout from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-05-30 10:58:02.786 +08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-05-30 10:58:02.786 +08:00 [INF] {"SubjectId":"af61726e-716b-4170-8c26-6568bf294215","DisplayName":"1223138295@qq.com","Category":"Authentication","Name":"User Logout Success","EventType":"Success","Id":1002,"Message":null,"ActivityId":"0HLN4KAA5L4S7:00000006","TimeStamp":"2019-05-30T02:58:02.0000000Z","ProcessId":8148,"LocalIpAddress":"127.0.0.1:26700","RemoteIpAddress":"::1","$type":"UserLogoutSuccessEvent"}
2019-05-30 11:18:24.800 +08:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-05-30 11:18:24.827 +08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-05-30 11:18:24.828 +08:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-05-30 11:18:24.828 +08:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-05-30 11:18:24.828 +08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-05-30 11:18:24.828 +08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-05-30 11:18:25.237 +08:00 [DBG] Starting grant removal
2019-05-30 11:18:25.410 +08:00 [DBG] Login Url: /Account/Login
2019-05-30 11:18:25.413 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-05-30 11:18:25.414 +08:00 [DBG] Logout Url: /Account/Logout
2019-05-30 11:18:25.415 +08:00 [DBG] ConsentUrl Url: /consent
2019-05-30 11:18:25.415 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2019-05-30 11:18:25.415 +08:00 [DBG] Error Url: /home/error
2019-05-30 11:18:25.415 +08:00 [DBG] Error Id Parameter: errorId
2019-05-30 11:19:16.355 +08:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-05-30 11:19:16.387 +08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-05-30 11:19:16.387 +08:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-05-30 11:19:16.387 +08:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-05-30 11:19:16.387 +08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-05-30 11:19:16.388 +08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-05-30 11:19:16.790 +08:00 [DBG] Starting grant removal
2019-05-30 11:19:17.070 +08:00 [DBG] Login Url: /Account/Login
2019-05-30 11:19:17.074 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-05-30 11:19:17.074 +08:00 [DBG] Logout Url: /Account/Logout
2019-05-30 11:19:17.074 +08:00 [DBG] ConsentUrl Url: /consent
2019-05-30 11:19:17.074 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2019-05-30 11:19:17.074 +08:00 [DBG] Error Url: /home/error
2019-05-30 11:19:17.074 +08:00 [DBG] Error Id Parameter: errorId
2019-05-30 11:19:33.964 +08:00 [DBG] CORS request made for path: /Account/Logout from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-05-30 11:20:01.720 +08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-05-30 11:20:30.120 +08:00 [INF] {"SubjectId":"af61726e-716b-4170-8c26-6568bf294215","DisplayName":"1223138295@qq.com","Category":"Authentication","Name":"User Logout Success","EventType":"Success","Id":1002,"Message":null,"ActivityId":"0HLN4LMCI17RR:00000002","TimeStamp":"2019-05-30T03:20:30.0000000Z","ProcessId":18444,"LocalIpAddress":"127.0.0.1:6488","RemoteIpAddress":"::1","$type":"UserLogoutSuccessEvent"}
2019-05-30 13:35:57.105 +08:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-05-30 13:35:57.133 +08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-05-30 13:35:57.134 +08:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-05-30 13:35:57.134 +08:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-05-30 13:35:57.134 +08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-05-30 13:35:57.134 +08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-05-30 13:35:57.591 +08:00 [DBG] Starting grant removal
2019-05-30 13:35:57.861 +08:00 [DBG] Login Url: /Account/Login
2019-05-30 13:35:57.864 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-05-30 13:35:57.864 +08:00 [DBG] Logout Url: /Account/Logout
2019-05-30 13:35:57.864 +08:00 [DBG] ConsentUrl Url: /consent
2019-05-30 13:35:57.864 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2019-05-30 13:35:57.864 +08:00 [DBG] Error Url: /home/error
2019-05-30 13:35:57.865 +08:00 [DBG] Error Id Parameter: errorId
2019-05-30 13:39:27.556 +08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-05-30 13:39:27.608 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-05-30 13:39:27.608 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-05-30 13:39:27.612 +08:00 [DBG] Start discovery request
2019-05-30 13:39:28.599 +08:00 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-05-30 13:39:29.005 +08:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-05-30 13:39:29.005 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-05-30 13:39:29.006 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-05-30 13:39:29.009 +08:00 [DBG] Start key discovery request
2019-05-30 13:39:29.148 +08:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-05-30 13:39:29.151 +08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-05-30 13:39:29.152 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-05-30 13:39:29.157 +08:00 [DBG] Start authorize request
2019-05-30 13:39:29.170 +08:00 [DBG] User in authorize request: af61726e-716b-4170-8c26-6568bf294215
2019-05-30 13:39:29.177 +08:00 [DBG] Start authorize request protocol validation
2019-05-30 13:39:30.455 +08:00 [DBG] mvc found in database: true
2019-05-30 13:39:30.465 +08:00 [DBG] client configuration validation for client mvc succeeded.
2019-05-30 13:39:30.482 +08:00 [ERR] Invalid redirect_uri: http://localhost:5004/signin-oidc
{"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":null,"AllowedRedirectUris":["http://localhost:5001/signin-oidc"],"SubjectId":"af61726e-716b-4170-8c26-6568bf294215","ResponseType":null,"ResponseMode":null,"GrantType":null,"RequestedScopes":"","State":null,"UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"mvc","redirect_uri":"http://localhost:5004/signin-oidc","response_type":"id_token","scope":"openid profile","response_mode":"form_post","nonce":"636947915690612307.MDhkOTFmNGYtYmU2My00N2VhLWJmMjktZTI2YzVhZTk5Yzk2NWQ1Y2M1ODctOThlZS00YTZlLWI3ZTktMzZlZjIyOTMwZTU5","state":"CfDJ8J6dQdEYr6RAjUqFr50zuTsbTnJwGr0hHke_ERAjJ-wpd8TIcXgEUXteAKeH_CtsP47OoplhUPNM27-0Eq3KpCO1YFhGEpYVKYn3VnWYgb0AkKe0kI6sWdX0ihzZ8rQ4TV2U8HFZhbrWPZUQ1jmJ0j788aMZR4ZYjvFXOfCMbAwI5Qi5hrcBtXGUX7VqpwMV-uxrW13l_qky3aQruU9cxbHauyBgKnl2O6LKNp0js4W-JrHsmLnSkc5wFtIK544ITlalE1DyD4czFYD6e8lg-J6vLK8kCjvEhkzr1h8tnKGeYYyrMxT0YAv2Ex0fZZhcMQ","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-05-30 13:39:30.492 +08:00 [ERR] Request validation failed
2019-05-30 13:39:30.492 +08:00 [INF] {"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":null,"AllowedRedirectUris":["http://localhost:5001/signin-oidc"],"SubjectId":"af61726e-716b-4170-8c26-6568bf294215","ResponseType":null,"ResponseMode":null,"GrantType":null,"RequestedScopes":"","State":null,"UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"mvc","redirect_uri":"http://localhost:5004/signin-oidc","response_type":"id_token","scope":"openid profile","response_mode":"form_post","nonce":"636947915690612307.MDhkOTFmNGYtYmU2My00N2VhLWJmMjktZTI2YzVhZTk5Yzk2NWQ1Y2M1ODctOThlZS00YTZlLWI3ZTktMzZlZjIyOTMwZTU5","state":"CfDJ8J6dQdEYr6RAjUqFr50zuTsbTnJwGr0hHke_ERAjJ-wpd8TIcXgEUXteAKeH_CtsP47OoplhUPNM27-0Eq3KpCO1YFhGEpYVKYn3VnWYgb0AkKe0kI6sWdX0ihzZ8rQ4TV2U8HFZhbrWPZUQ1jmJ0j788aMZR4ZYjvFXOfCMbAwI5Qi5hrcBtXGUX7VqpwMV-uxrW13l_qky3aQruU9cxbHauyBgKnl2O6LKNp0js4W-JrHsmLnSkc5wFtIK544ITlalE1DyD4czFYD6e8lg-J6vLK8kCjvEhkzr1h8tnKGeYYyrMxT0YAv2Ex0fZZhcMQ","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-05-30 13:39:30.503 +08:00 [INF] {"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":null,"Endpoint":"Authorize","SubjectId":"af61726e-716b-4170-8c26-6568bf294215","Scopes":"","GrantType":null,"Error":"unauthorized_client","ErrorDescription":"Invalid redirect_uri","Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HLN4O2OISBI1:00000003","TimeStamp":"2019-05-30T05:39:30.0000000Z","ProcessId":28472,"LocalIpAddress":"127.0.0.1:2801","RemoteIpAddress":"::1","$type":"TokenIssuedFailureEvent"}
2019-05-30 13:40:18.961 +08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-05-30 13:40:18.973 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-05-30 13:40:18.981 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-05-30 13:40:18.981 +08:00 [DBG] Start discovery request
2019-05-30 13:40:19.622 +08:00 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-05-30 13:40:19.977 +08:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-05-30 13:40:19.978 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-05-30 13:40:19.978 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-05-30 13:40:19.978 +08:00 [DBG] Start key discovery request
2019-05-30 13:40:20.076 +08:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-05-30 13:40:20.076 +08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-05-30 13:40:20.077 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-05-30 13:40:20.077 +08:00 [DBG] Start authorize request
2019-05-30 13:40:20.077 +08:00 [DBG] User in authorize request: af61726e-716b-4170-8c26-6568bf294215
2019-05-30 13:40:20.078 +08:00 [DBG] Start authorize request protocol validation
2019-05-30 13:40:21.061 +08:00 [DBG] mvcImp found in database: true
2019-05-30 13:40:21.062 +08:00 [DBG] client configuration validation for client mvcImp succeeded.
2019-05-30 13:40:21.292 +08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-05-30 13:40:21.435 +08:00 [DBG] Found [] API scopes in database
2019-05-30 13:40:21.631 +08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-05-30 13:40:21.754 +08:00 [DBG] Found [] API scopes in database
2019-05-30 13:40:21.761 +08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-30 13:40:21.762 +08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"mvcImp","ClientName":"MVC ClientImp","RedirectUri":"http://localhost:5004/signin-oidc","AllowedRedirectUris":["http://localhost:5004/signin-oidc"],"SubjectId":"af61726e-716b-4170-8c26-6568bf294215","ResponseType":"id_token","ResponseMode":"form_post","GrantType":"implicit","RequestedScopes":"openid profile","State":"CfDJ8J6dQdEYr6RAjUqFr50zuTu6VTtY-O9towz31eWmejWc-Ub4iZybebos8M_pmywP40s0f34VHSoYeg4dYb4V0T1EXLIKf0vKWLGeHR6XMVQPa1xtI23zdM57DTvFTDtmigfMBcLi__e8u4N5OeL3OqFu75gG0AY8PKPYmoNSr6aAILkvhe_hZcq47cLUiq76egc379DlV-ZpKH99LtDDPlFxkjiI0imUYHzOo0C5uiq6PP3gSpnaPv_QHWTKA5x2FdZmi8Hzfaf0zybdB3UJydzvn8iIbzljJIR1cS9sthjV_6YXw5TFcfsOP3xXOuIF7Q","UiLocales":null,"Nonce":"636947916200199997.YzgxMjhjZTAtODRhZS00Mjc1LWJhYzItMmVjZTAxZjE4YjYzZmZiMjk1ODItZDAwZS00MTIyLWJjOTYtMzRhZmJkNmFiYmZi","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"a13d0597f96184209db71ce8a68b4601","Raw":{"client_id":"mvcImp","redirect_uri":"http://localhost:5004/signin-oidc","response_type":"id_token","scope":"openid profile","response_mode":"form_post","nonce":"636947916200199997.YzgxMjhjZTAtODRhZS00Mjc1LWJhYzItMmVjZTAxZjE4YjYzZmZiMjk1ODItZDAwZS00MTIyLWJjOTYtMzRhZmJkNmFiYmZi","state":"CfDJ8J6dQdEYr6RAjUqFr50zuTu6VTtY-O9towz31eWmejWc-Ub4iZybebos8M_pmywP40s0f34VHSoYeg4dYb4V0T1EXLIKf0vKWLGeHR6XMVQPa1xtI23zdM57DTvFTDtmigfMBcLi__e8u4N5OeL3OqFu75gG0AY8PKPYmoNSr6aAILkvhe_hZcq47cLUiq76egc379DlV-ZpKH99LtDDPlFxkjiI0imUYHzOo0C5uiq6PP3gSpnaPv_QHWTKA5x2FdZmi8Hzfaf0zybdB3UJydzvn8iIbzljJIR1cS9sthjV_6YXw5TFcfsOP3xXOuIF7Q","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-05-30 13:40:22.041 +08:00 [DBG] VHwV9SWfzW/EQXuBTL6MQ//T5xXc1u82LMCGIn0Ko/U= found in database: false
2019-05-30 13:40:22.041 +08:00 [DBG] user_consent grant with value: mvcImp|af61726e-716b-4170-8c26-6568bf294215 not found in store.
2019-05-30 13:40:22.041 +08:00 [DBG] Found no prior consent from consent store, consent is required
2019-05-30 13:40:22.041 +08:00 [INF] Showing consent: User has not yet consented
2019-05-30 13:40:22.118 +08:00 [DBG] Start authorize request protocol validation
2019-05-30 13:40:23.094 +08:00 [DBG] mvcImp found in database: true
2019-05-30 13:40:23.094 +08:00 [DBG] client configuration validation for client mvcImp succeeded.
2019-05-30 13:40:23.277 +08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-05-30 13:40:23.380 +08:00 [DBG] Found [] API scopes in database
2019-05-30 13:40:23.575 +08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-05-30 13:40:23.720 +08:00 [DBG] Found [] API scopes in database
2019-05-30 13:40:23.720 +08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-30 13:40:24.739 +08:00 [DBG] mvcImp found in database: true
2019-05-30 13:40:24.739 +08:00 [DBG] client configuration validation for client mvcImp succeeded.
2019-05-30 13:40:24.918 +08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-05-30 13:40:25.019 +08:00 [DBG] Found [] API scopes in database
2019-05-30 13:41:47.516 +08:00 [ERR] No consent request matching request: null
2019-05-30 13:43:01.177 +08:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-05-30 13:43:01.256 +08:00 [DBG] Start authorize request protocol validation
2019-05-30 13:43:03.170 +08:00 [DBG] mvcImp found in database: true
2019-05-30 13:43:03.170 +08:00 [DBG] client configuration validation for client mvcImp succeeded.
2019-05-30 13:43:03.388 +08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-05-30 13:43:03.503 +08:00 [DBG] Found [] API scopes in database
2019-05-30 13:43:03.686 +08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-05-30 13:43:03.801 +08:00 [DBG] Found [] API scopes in database
2019-05-30 13:43:03.801 +08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-30 13:43:03.803 +08:00 [INF] {"SubjectId":"af61726e-716b-4170-8c26-6568bf294215","ClientId":"mvcImp","RequestedScopes":["openid","profile"],"GrantedScopes":["openid","profile"],"ConsentRemembered":true,"Category":"Grants","Name":"Consent granted","EventType":"Information","Id":4000,"Message":null,"ActivityId":"0HLN4O2OISBI3:00000001","TimeStamp":"2019-05-30T05:43:03.0000000Z","ProcessId":28472,"LocalIpAddress":"127.0.0.1:2801","RemoteIpAddress":"::1","$type":"ConsentGrantedEvent"}
2019-05-30 13:43:04.822 +08:00 [DBG] mvcImp found in database: true
2019-05-30 13:43:04.822 +08:00 [DBG] client configuration validation for client mvcImp succeeded.
2019-05-30 13:43:04.841 +08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-05-30 13:43:04.842 +08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-05-30 13:43:04.842 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-05-30 13:43:04.849 +08:00 [DBG] Start authorize callback request
2019-05-30 13:43:04.855 +08:00 [DBG] User in authorize request: af61726e-716b-4170-8c26-6568bf294215
2019-05-30 13:43:04.855 +08:00 [DBG] Start authorize request protocol validation
2019-05-30 13:43:05.839 +08:00 [DBG] mvcImp found in database: true
2019-05-30 13:43:05.839 +08:00 [DBG] client configuration validation for client mvcImp succeeded.
2019-05-30 13:43:06.013 +08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-05-30 13:43:06.128 +08:00 [DBG] Found [] API scopes in database
2019-05-30 13:43:06.332 +08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-05-30 13:43:06.438 +08:00 [DBG] Found [] API scopes in database
2019-05-30 13:43:06.439 +08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-30 13:43:06.439 +08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"mvcImp","ClientName":"MVC ClientImp","RedirectUri":"http://localhost:5004/signin-oidc","AllowedRedirectUris":["http://localhost:5004/signin-oidc"],"SubjectId":"af61726e-716b-4170-8c26-6568bf294215","ResponseType":"id_token","ResponseMode":"form_post","GrantType":"implicit","RequestedScopes":"openid profile","State":"CfDJ8J6dQdEYr6RAjUqFr50zuTu6VTtY-O9towz31eWmejWc-Ub4iZybebos8M_pmywP40s0f34VHSoYeg4dYb4V0T1EXLIKf0vKWLGeHR6XMVQPa1xtI23zdM57DTvFTDtmigfMBcLi__e8u4N5OeL3OqFu75gG0AY8PKPYmoNSr6aAILkvhe_hZcq47cLUiq76egc379DlV-ZpKH99LtDDPlFxkjiI0imUYHzOo0C5uiq6PP3gSpnaPv_QHWTKA5x2FdZmi8Hzfaf0zybdB3UJydzvn8iIbzljJIR1cS9sthjV_6YXw5TFcfsOP3xXOuIF7Q","UiLocales":null,"Nonce":"636947916200199997.YzgxMjhjZTAtODRhZS00Mjc1LWJhYzItMmVjZTAxZjE4YjYzZmZiMjk1ODItZDAwZS00MTIyLWJjOTYtMzRhZmJkNmFiYmZi","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"a13d0597f96184209db71ce8a68b4601","Raw":{"client_id":"mvcImp","redirect_uri":"http://localhost:5004/signin-oidc","response_type":"id_token","scope":"openid profile","response_mode":"form_post","nonce":"636947916200199997.YzgxMjhjZTAtODRhZS00Mjc1LWJhYzItMmVjZTAxZjE4YjYzZmZiMjk1ODItZDAwZS00MTIyLWJjOTYtMzRhZmJkNmFiYmZi","state":"CfDJ8J6dQdEYr6RAjUqFr50zuTu6VTtY-O9towz31eWmejWc-Ub4iZybebos8M_pmywP40s0f34VHSoYeg4dYb4V0T1EXLIKf0vKWLGeHR6XMVQPa1xtI23zdM57DTvFTDtmigfMBcLi__e8u4N5OeL3OqFu75gG0AY8PKPYmoNSr6aAILkvhe_hZcq47cLUiq76egc379DlV-ZpKH99LtDDPlFxkjiI0imUYHzOo0C5uiq6PP3gSpnaPv_QHWTKA5x2FdZmi8Hzfaf0zybdB3UJydzvn8iIbzljJIR1cS9sthjV_6YXw5TFcfsOP3xXOuIF7Q","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-05-30 13:43:06.658 +08:00 [DBG] VHwV9SWfzW/EQXuBTL6MQ//T5xXc1u82LMCGIn0Ko/U= found in database: false
2019-05-30 13:43:06.658 +08:00 [DBG] user_consent grant with value: mvcImp|af61726e-716b-4170-8c26-6568bf294215 not found in store.
2019-05-30 13:43:06.659 +08:00 [DBG] Found no prior consent from consent store, consent is required
2019-05-30 13:43:06.662 +08:00 [INF] User consented to scopes: ["openid","profile"]
2019-05-30 13:43:06.663 +08:00 [DBG] User indicated to remember consent for scopes: ["openid","profile"]
2019-05-30 13:43:06.667 +08:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: af61726e-716b-4170-8c26-6568bf294215
2019-05-30 13:43:06.797 +08:00 [DBG] VHwV9SWfzW/EQXuBTL6MQ//T5xXc1u82LMCGIn0Ko/U= not found in database
2019-05-30 13:43:07.043 +08:00 [DBG] Creating Implicit Flow response.
2019-05-30 13:43:07.052 +08:00 [DBG] Getting claims for identity token for subject: af61726e-716b-4170-8c26-6568bf294215 and client: mvcImp
2019-05-30 13:43:13.481 +08:00 [DBG] Claim types from profile service that were filtered: ["sub"]
2019-05-30 13:43:13.615 +08:00 [INF] {"ClientId":"mvcImp","ClientName":"MVC ClientImp","RedirectUri":"http://localhost:5004/signin-oidc","Endpoint":"Authorize","SubjectId":"af61726e-716b-4170-8c26-6568bf294215","Scopes":"openid profile","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****iWYw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN4O2OISBI3:00000002","TimeStamp":"2019-05-30T05:43:13.0000000Z","ProcessId":28472,"LocalIpAddress":"127.0.0.1:2801","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-30 13:43:13.617 +08:00 [INF] Authorize endpoint response
{"SubjectId":"af61726e-716b-4170-8c26-6568bf294215","ClientId":"mvcImp","RedirectUri":"http://localhost:5004/signin-oidc","State":"CfDJ8J6dQdEYr6RAjUqFr50zuTu6VTtY-O9towz31eWmejWc-Ub4iZybebos8M_pmywP40s0f34VHSoYeg4dYb4V0T1EXLIKf0vKWLGeHR6XMVQPa1xtI23zdM57DTvFTDtmigfMBcLi__e8u4N5OeL3OqFu75gG0AY8PKPYmoNSr6aAILkvhe_hZcq47cLUiq76egc379DlV-ZpKH99LtDDPlFxkjiI0imUYHzOo0C5uiq6PP3gSpnaPv_QHWTKA5x2FdZmi8Hzfaf0zybdB3UJydzvn8iIbzljJIR1cS9sthjV_6YXw5TFcfsOP3xXOuIF7Q","Scope":"openid profile","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-05-30 13:43:13.643 +08:00 [DBG] Augmenting SignInContext
2019-05-30 13:43:13.653 +08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-05-30 13:43:23.120 +08:00 [DBG] Start authorize request protocol validation
2019-05-30 13:43:25.139 +08:00 [DBG] mvcImp found in database: true
2019-05-30 13:43:25.139 +08:00 [DBG] client configuration validation for client mvcImp succeeded.
2019-05-30 13:43:25.399 +08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-05-30 13:43:25.522 +08:00 [DBG] Found [] API scopes in database
2019-05-30 13:43:25.734 +08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-05-30 13:43:25.869 +08:00 [DBG] Found [] API scopes in database
2019-05-30 13:43:25.869 +08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-30 13:43:26.979 +08:00 [DBG] mvcImp found in database: true
2019-05-30 13:43:26.979 +08:00 [DBG] client configuration validation for client mvcImp succeeded.
2019-05-30 13:43:27.158 +08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-05-30 13:43:27.271 +08:00 [DBG] Found [] API scopes in database
2019-05-30 13:43:30.356 +08:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-05-30 13:43:30.381 +08:00 [DBG] Start authorize request protocol validation
2019-05-30 13:43:31.382 +08:00 [DBG] mvcImp found in database: true
2019-05-30 13:43:31.382 +08:00 [DBG] client configuration validation for client mvcImp succeeded.
2019-05-30 13:43:31.559 +08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-05-30 13:43:31.666 +08:00 [DBG] Found [] API scopes in database
2019-05-30 13:43:31.860 +08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-05-30 13:43:31.982 +08:00 [DBG] Found [] API scopes in database
2019-05-30 13:43:31.982 +08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-30 13:43:31.982 +08:00 [INF] {"SubjectId":"af61726e-716b-4170-8c26-6568bf294215","ClientId":"mvcImp","RequestedScopes":["openid","profile"],"GrantedScopes":["openid","profile"],"ConsentRemembered":true,"Category":"Grants","Name":"Consent granted","EventType":"Information","Id":4000,"Message":null,"ActivityId":"0HLN4O2OISBI3:00000004","TimeStamp":"2019-05-30T05:43:31.0000000Z","ProcessId":28472,"LocalIpAddress":"127.0.0.1:2801","RemoteIpAddress":"::1","$type":"ConsentGrantedEvent"}
2019-05-30 13:43:33.080 +08:00 [DBG] mvcImp found in database: true
2019-05-30 13:43:33.080 +08:00 [DBG] client configuration validation for client mvcImp succeeded.
2019-05-30 13:43:33.100 +08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-05-30 13:43:33.101 +08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-05-30 13:43:33.101 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-05-30 13:43:33.101 +08:00 [DBG] Start authorize callback request
2019-05-30 13:43:33.101 +08:00 [DBG] User in authorize request: af61726e-716b-4170-8c26-6568bf294215
2019-05-30 13:43:33.101 +08:00 [DBG] Start authorize request protocol validation
2019-05-30 13:43:34.112 +08:00 [DBG] mvcImp found in database: true
2019-05-30 13:43:34.113 +08:00 [DBG] client configuration validation for client mvcImp succeeded.
2019-05-30 13:43:34.295 +08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-05-30 13:43:34.399 +08:00 [DBG] Found [] API scopes in database
2019-05-30 13:43:34.587 +08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-05-30 13:43:34.698 +08:00 [DBG] Found [] API scopes in database
2019-05-30 13:43:34.698 +08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-30 13:43:34.699 +08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"mvcImp","ClientName":"MVC ClientImp","RedirectUri":"http://localhost:5004/signin-oidc","AllowedRedirectUris":["http://localhost:5004/signin-oidc"],"SubjectId":"af61726e-716b-4170-8c26-6568bf294215","ResponseType":"id_token","ResponseMode":"form_post","GrantType":"implicit","RequestedScopes":"openid profile","State":"CfDJ8J6dQdEYr6RAjUqFr50zuTu6VTtY-O9towz31eWmejWc-Ub4iZybebos8M_pmywP40s0f34VHSoYeg4dYb4V0T1EXLIKf0vKWLGeHR6XMVQPa1xtI23zdM57DTvFTDtmigfMBcLi__e8u4N5OeL3OqFu75gG0AY8PKPYmoNSr6aAILkvhe_hZcq47cLUiq76egc379DlV-ZpKH99LtDDPlFxkjiI0imUYHzOo0C5uiq6PP3gSpnaPv_QHWTKA5x2FdZmi8Hzfaf0zybdB3UJydzvn8iIbzljJIR1cS9sthjV_6YXw5TFcfsOP3xXOuIF7Q","UiLocales":null,"Nonce":"636947916200199997.YzgxMjhjZTAtODRhZS00Mjc1LWJhYzItMmVjZTAxZjE4YjYzZmZiMjk1ODItZDAwZS00MTIyLWJjOTYtMzRhZmJkNmFiYmZi","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"a13d0597f96184209db71ce8a68b4601","Raw":{"client_id":"mvcImp","redirect_uri":"http://localhost:5004/signin-oidc","response_type":"id_token","scope":"openid profile","response_mode":"form_post","nonce":"636947916200199997.YzgxMjhjZTAtODRhZS00Mjc1LWJhYzItMmVjZTAxZjE4YjYzZmZiMjk1ODItZDAwZS00MTIyLWJjOTYtMzRhZmJkNmFiYmZi","state":"CfDJ8J6dQdEYr6RAjUqFr50zuTu6VTtY-O9towz31eWmejWc-Ub4iZybebos8M_pmywP40s0f34VHSoYeg4dYb4V0T1EXLIKf0vKWLGeHR6XMVQPa1xtI23zdM57DTvFTDtmigfMBcLi__e8u4N5OeL3OqFu75gG0AY8PKPYmoNSr6aAILkvhe_hZcq47cLUiq76egc379DlV-ZpKH99LtDDPlFxkjiI0imUYHzOo0C5uiq6PP3gSpnaPv_QHWTKA5x2FdZmi8Hzfaf0zybdB3UJydzvn8iIbzljJIR1cS9sthjV_6YXw5TFcfsOP3xXOuIF7Q","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-05-30 13:43:34.934 +08:00 [DBG] VHwV9SWfzW/EQXuBTL6MQ//T5xXc1u82LMCGIn0Ko/U= found in database: true
2019-05-30 13:43:34.939 +08:00 [DBG] Consent found in consent store is same as current request, consent is not required
2019-05-30 13:43:34.939 +08:00 [DBG] Creating Implicit Flow response.
2019-05-30 13:43:34.939 +08:00 [DBG] Getting claims for identity token for subject: af61726e-716b-4170-8c26-6568bf294215 and client: mvcImp
2019-05-30 13:44:16.324 +08:00 [DBG] Claim types from profile service that were filtered: ["sub"]
2019-05-30 13:44:56.299 +08:00 [INF] {"ClientId":"mvcImp","ClientName":"MVC ClientImp","RedirectUri":"http://localhost:5004/signin-oidc","Endpoint":"Authorize","SubjectId":"af61726e-716b-4170-8c26-6568bf294215","Scopes":"openid profile","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****GM1w","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN4O2OISBI3:00000005","TimeStamp":"2019-05-30T05:44:56.0000000Z","ProcessId":28472,"LocalIpAddress":"127.0.0.1:2801","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-30 13:45:00.612 +08:00 [INF] Authorize endpoint response
{"SubjectId":"af61726e-716b-4170-8c26-6568bf294215","ClientId":"mvcImp","RedirectUri":"http://localhost:5004/signin-oidc","State":"CfDJ8J6dQdEYr6RAjUqFr50zuTu6VTtY-O9towz31eWmejWc-Ub4iZybebos8M_pmywP40s0f34VHSoYeg4dYb4V0T1EXLIKf0vKWLGeHR6XMVQPa1xtI23zdM57DTvFTDtmigfMBcLi__e8u4N5OeL3OqFu75gG0AY8PKPYmoNSr6aAILkvhe_hZcq47cLUiq76egc379DlV-ZpKH99LtDDPlFxkjiI0imUYHzOo0C5uiq6PP3gSpnaPv_QHWTKA5x2FdZmi8Hzfaf0zybdB3UJydzvn8iIbzljJIR1cS9sthjV_6YXw5TFcfsOP3xXOuIF7Q","Scope":"openid profile","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-05-30 13:51:42.841 +08:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-05-30 13:51:42.875 +08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-05-30 13:51:42.876 +08:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-05-30 13:51:42.876 +08:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-05-30 13:51:42.876 +08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-05-30 13:51:42.876 +08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-05-30 13:51:43.278 +08:00 [DBG] Starting grant removal
2019-05-30 13:51:43.486 +08:00 [DBG] Login Url: /Account/Login
2019-05-30 13:51:43.489 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-05-30 13:51:43.489 +08:00 [DBG] Logout Url: /Account/Logout
2019-05-30 13:51:43.489 +08:00 [DBG] ConsentUrl Url: /consent
2019-05-30 13:51:43.489 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2019-05-30 13:51:43.489 +08:00 [DBG] Error Url: /home/error
2019-05-30 13:51:43.489 +08:00 [DBG] Error Id Parameter: errorId
2019-05-30 13:52:34.166 +08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-05-30 13:52:34.171 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-05-30 13:52:34.171 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-05-30 13:52:34.175 +08:00 [DBG] Start discovery request
2019-05-30 13:52:35.541 +08:00 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-05-30 13:52:35.980 +08:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-05-30 13:52:35.981 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-05-30 13:52:35.981 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-05-30 13:52:35.987 +08:00 [DBG] Start key discovery request
2019-05-30 13:52:36.131 +08:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-05-30 13:52:36.135 +08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-05-30 13:52:36.135 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-05-30 13:52:36.139 +08:00 [DBG] Start authorize request
2019-05-30 13:52:36.151 +08:00 [DBG] User in authorize request: af61726e-716b-4170-8c26-6568bf294215
2019-05-30 13:52:36.158 +08:00 [DBG] Start authorize request protocol validation
2019-05-30 13:52:37.555 +08:00 [DBG] mvcImp found in database: true
2019-05-30 13:52:37.567 +08:00 [DBG] client configuration validation for client mvcImp succeeded.
2019-05-30 13:52:37.802 +08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-05-30 13:52:37.945 +08:00 [DBG] Found [] API scopes in database
2019-05-30 13:52:38.146 +08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-05-30 13:52:38.254 +08:00 [DBG] Found [] API scopes in database
2019-05-30 13:52:38.262 +08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-30 13:52:38.277 +08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"mvcImp","ClientName":"MVC ClientImp","RedirectUri":"http://localhost:5004/signin-oidc","AllowedRedirectUris":["http://localhost:5004/signin-oidc"],"SubjectId":"af61726e-716b-4170-8c26-6568bf294215","ResponseType":"id_token","ResponseMode":"form_post","GrantType":"implicit","RequestedScopes":"openid profile","State":"CfDJ8J6dQdEYr6RAjUqFr50zuTvzA4NInA4_LbvAvrRDexEXqakeO2B51A6RO04waZWYUxzTffGdLTCEWBFFTb9j5pzN8AImEr-tzDhd7fg0p5F1sNdfa7cX_GhHihduzpbmH-JyWEj7tUXbGTKy_3ccuZhpBmSAoyOpjoq8_aBBoIBiQvLRSpzEC5cjMh9Mb62ECeV-6g1lawMEikPFJmhar9E2qLZUUU3u3wyTVYBAHENSPzuc4LYUoNvGd3iEfLLi1vQCMSOPo1nekdjl4aoLNphxDFi2xYJT22FFQsn8CVuzTIZZ6z-UsR70K8TaqHFKeg","UiLocales":null,"Nonce":"636947923560620129.NGExOWFiMTQtNTI4Ni00ZTA5LTkwNDMtZmM1ODQxYjZiNDk1NjY4YTEzNDgtYmZkZS00NjRkLWI0YWYtMGNmNTEyN2JkMjkw","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"a13d0597f96184209db71ce8a68b4601","Raw":{"client_id":"mvcImp","redirect_uri":"http://localhost:5004/signin-oidc","response_type":"id_token","scope":"openid profile","response_mode":"form_post","nonce":"636947923560620129.NGExOWFiMTQtNTI4Ni00ZTA5LTkwNDMtZmM1ODQxYjZiNDk1NjY4YTEzNDgtYmZkZS00NjRkLWI0YWYtMGNmNTEyN2JkMjkw","state":"CfDJ8J6dQdEYr6RAjUqFr50zuTvzA4NInA4_LbvAvrRDexEXqakeO2B51A6RO04waZWYUxzTffGdLTCEWBFFTb9j5pzN8AImEr-tzDhd7fg0p5F1sNdfa7cX_GhHihduzpbmH-JyWEj7tUXbGTKy_3ccuZhpBmSAoyOpjoq8_aBBoIBiQvLRSpzEC5cjMh9Mb62ECeV-6g1lawMEikPFJmhar9E2qLZUUU3u3wyTVYBAHENSPzuc4LYUoNvGd3iEfLLi1vQCMSOPo1nekdjl4aoLNphxDFi2xYJT22FFQsn8CVuzTIZZ6z-UsR70K8TaqHFKeg","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-05-30 13:52:38.640 +08:00 [DBG] VHwV9SWfzW/EQXuBTL6MQ//T5xXc1u82LMCGIn0Ko/U= found in database: true
2019-05-30 13:52:38.647 +08:00 [DBG] Consent found in consent store is same as current request, consent is not required
2019-05-30 13:52:38.655 +08:00 [DBG] Creating Implicit Flow response.
2019-05-30 13:52:38.664 +08:00 [DBG] Getting claims for identity token for subject: af61726e-716b-4170-8c26-6568bf294215 and client: mvcImp
2019-05-30 13:52:46.227 +08:00 [DBG] Claim types from profile service that were filtered: ["sub"]
2019-05-30 13:52:46.370 +08:00 [INF] {"ClientId":"mvcImp","ClientName":"MVC ClientImp","RedirectUri":"http://localhost:5004/signin-oidc","Endpoint":"Authorize","SubjectId":"af61726e-716b-4170-8c26-6568bf294215","Scopes":"openid profile","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****DQVQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN4OBID92O2:00000003","TimeStamp":"2019-05-30T05:52:46.0000000Z","ProcessId":27164,"LocalIpAddress":"127.0.0.1:23500","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-30 13:52:46.376 +08:00 [INF] Authorize endpoint response
{"SubjectId":"af61726e-716b-4170-8c26-6568bf294215","ClientId":"mvcImp","RedirectUri":"http://localhost:5004/signin-oidc","State":"CfDJ8J6dQdEYr6RAjUqFr50zuTvzA4NInA4_LbvAvrRDexEXqakeO2B51A6RO04waZWYUxzTffGdLTCEWBFFTb9j5pzN8AImEr-tzDhd7fg0p5F1sNdfa7cX_GhHihduzpbmH-JyWEj7tUXbGTKy_3ccuZhpBmSAoyOpjoq8_aBBoIBiQvLRSpzEC5cjMh9Mb62ECeV-6g1lawMEikPFJmhar9E2qLZUUU3u3wyTVYBAHENSPzuc4LYUoNvGd3iEfLLi1vQCMSOPo1nekdjl4aoLNphxDFi2xYJT22FFQsn8CVuzTIZZ6z-UsR70K8TaqHFKeg","Scope":"openid profile","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-05-30 13:56:49.533 +08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-05-30 13:56:49.533 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-05-30 13:56:49.542 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-05-30 13:56:49.542 +08:00 [DBG] Start discovery request
2019-05-30 13:56:50.434 +08:00 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-05-30 13:56:50.826 +08:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-05-30 13:56:50.827 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-05-30 13:56:50.827 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-05-30 13:56:50.827 +08:00 [DBG] Start key discovery request
2019-05-30 13:56:50.932 +08:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-05-30 13:56:50.933 +08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-05-30 13:56:50.933 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-05-30 13:56:50.935 +08:00 [DBG] Start authorize request
2019-05-30 13:56:50.943 +08:00 [DBG] User in authorize request: af61726e-716b-4170-8c26-6568bf294215
2019-05-30 13:56:50.943 +08:00 [DBG] Start authorize request protocol validation
2019-05-30 13:56:52.079 +08:00 [DBG] mvcImp found in database: true
2019-05-30 13:56:52.079 +08:00 [DBG] client configuration validation for client mvcImp succeeded.
2019-05-30 13:56:52.294 +08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-05-30 13:56:52.400 +08:00 [DBG] Found [] API scopes in database
2019-05-30 13:56:52.610 +08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-05-30 13:56:52.721 +08:00 [DBG] Found [] API scopes in database
2019-05-30 13:56:52.721 +08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-30 13:56:52.721 +08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"mvcImp","ClientName":"MVC ClientImp","RedirectUri":"http://localhost:5004/signin-oidc","AllowedRedirectUris":["http://localhost:5004/signin-oidc"],"SubjectId":"af61726e-716b-4170-8c26-6568bf294215","ResponseType":"id_token","ResponseMode":"form_post","GrantType":"implicit","RequestedScopes":"openid profile","State":"CfDJ8J6dQdEYr6RAjUqFr50zuTuf1mzJy5VAquivgn95lWQoSPVbUjEEhs53SMJ7cJXRX_dJE7InqWJqkySflNhJilZc0SoG23qAuAd5p43TSm-DBIi7V6ipIOwVaVvrGcmlWLF7LAhTPZFA_CwTZNlldXFSFVXQqlOJHwATLHW3GoNZoK32qAP7mAfhsUV-5EIVQuBWGn6u5o-DUpvLQm5XvRQ9RVwNWZjhdO1mXgMx_HjUFFJktcqTnEc6HCJmTmYgjYYvqHeFAKtaR5yEZyUg7zTa36dOu7zABp01rFSYQ1rGLU69inHaDGk5e5KvfLtjJw","UiLocales":null,"Nonce":"636947926108745872.NDRmNDY5YmUtYjRkMi00OTM1LTk3NzItOTliZThjNDJjYWE4MDEwZWMzYmEtZWVmMC00MWJmLTgxYWItYjkwYzc4ODg5YzIz","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"a13d0597f96184209db71ce8a68b4601","Raw":{"client_id":"mvcImp","redirect_uri":"http://localhost:5004/signin-oidc","response_type":"id_token","scope":"openid profile","response_mode":"form_post","nonce":"636947926108745872.NDRmNDY5YmUtYjRkMi00OTM1LTk3NzItOTliZThjNDJjYWE4MDEwZWMzYmEtZWVmMC00MWJmLTgxYWItYjkwYzc4ODg5YzIz","state":"CfDJ8J6dQdEYr6RAjUqFr50zuTuf1mzJy5VAquivgn95lWQoSPVbUjEEhs53SMJ7cJXRX_dJE7InqWJqkySflNhJilZc0SoG23qAuAd5p43TSm-DBIi7V6ipIOwVaVvrGcmlWLF7LAhTPZFA_CwTZNlldXFSFVXQqlOJHwATLHW3GoNZoK32qAP7mAfhsUV-5EIVQuBWGn6u5o-DUpvLQm5XvRQ9RVwNWZjhdO1mXgMx_HjUFFJktcqTnEc6HCJmTmYgjYYvqHeFAKtaR5yEZyUg7zTa36dOu7zABp01rFSYQ1rGLU69inHaDGk5e5KvfLtjJw","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-05-30 13:56:53.021 +08:00 [DBG] VHwV9SWfzW/EQXuBTL6MQ//T5xXc1u82LMCGIn0Ko/U= found in database: true
2019-05-30 13:56:53.024 +08:00 [DBG] Consent found in consent store is same as current request, consent is not required
2019-05-30 13:56:53.025 +08:00 [DBG] Creating Implicit Flow response.
2019-05-30 13:56:53.025 +08:00 [DBG] Getting claims for identity token for subject: af61726e-716b-4170-8c26-6568bf294215 and client: mvcImp
2019-05-30 13:56:53.025 +08:00 [DBG] Claim types from profile service that were filtered: ["sub"]
2019-05-30 13:56:53.029 +08:00 [INF] {"ClientId":"mvcImp","ClientName":"MVC ClientImp","RedirectUri":"http://localhost:5004/signin-oidc","Endpoint":"Authorize","SubjectId":"af61726e-716b-4170-8c26-6568bf294215","Scopes":"openid profile","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****QCeg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN4OBID92O3:00000003","TimeStamp":"2019-05-30T05:56:53.0000000Z","ProcessId":27164,"LocalIpAddress":"127.0.0.1:23500","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-30 13:56:53.029 +08:00 [INF] Authorize endpoint response
{"SubjectId":"af61726e-716b-4170-8c26-6568bf294215","ClientId":"mvcImp","RedirectUri":"http://localhost:5004/signin-oidc","State":"CfDJ8J6dQdEYr6RAjUqFr50zuTuf1mzJy5VAquivgn95lWQoSPVbUjEEhs53SMJ7cJXRX_dJE7InqWJqkySflNhJilZc0SoG23qAuAd5p43TSm-DBIi7V6ipIOwVaVvrGcmlWLF7LAhTPZFA_CwTZNlldXFSFVXQqlOJHwATLHW3GoNZoK32qAP7mAfhsUV-5EIVQuBWGn6u5o-DUpvLQm5XvRQ9RVwNWZjhdO1mXgMx_HjUFFJktcqTnEc6HCJmTmYgjYYvqHeFAKtaR5yEZyUg7zTa36dOu7zABp01rFSYQ1rGLU69inHaDGk5e5KvfLtjJw","Scope":"openid profile","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-05-30 13:57:10.665 +08:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-05-30 13:57:10.665 +08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-05-30 13:57:10.665 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-05-30 13:57:10.666 +08:00 [DBG] Start authorize request
2019-05-30 13:57:10.666 +08:00 [DBG] User in authorize request: af61726e-716b-4170-8c26-6568bf294215
2019-05-30 13:57:10.666 +08:00 [DBG] Start authorize request protocol validation
2019-05-30 13:57:12.003 +08:00 [DBG] mvcImp found in database: true
2019-05-30 13:57:12.003 +08:00 [DBG] client configuration validation for client mvcImp succeeded.
2019-05-30 13:57:12.184 +08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-05-30 13:57:12.298 +08:00 [DBG] Found [] API scopes in database
2019-05-30 13:57:12.490 +08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-05-30 13:57:12.614 +08:00 [DBG] Found [] API scopes in database
2019-05-30 13:57:12.614 +08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-30 13:57:12.614 +08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"mvcImp","ClientName":"MVC ClientImp","RedirectUri":"http://localhost:5004/signin-oidc","AllowedRedirectUris":["http://localhost:5004/signin-oidc"],"SubjectId":"af61726e-716b-4170-8c26-6568bf294215","ResponseType":"id_token","ResponseMode":"form_post","GrantType":"implicit","RequestedScopes":"openid profile","State":"CfDJ8J6dQdEYr6RAjUqFr50zuTugNTd7YkvxyRDT5USbCNGSyRtioFHp9exc_LCJdsEXi85LO1gNFNl3IrqNSZ5RcixY7-AiOP4iV7CYhISwRvj78tnlL4o0WxmzbrBO4bppAj6NLnsoV0TtSTTwUk-SNUG3ti-0W0MMaPFZ-r1qup_oR02zOwoh1iyCB2-hw6M_jRurzJ5tzS4zwXz4jGZzK-COOTYmh0MwsB50x2o6gkuRFHzYNJNsCF15tW1auSpMpBaEBQ6vdEG1P4pZG51bLuN5U8vkC0rlz1iEdBz3vBOPEwPreMuv1rUuvaCxer7kdQ","UiLocales":null,"Nonce":"636947926306516607.NjBjMzE2NGMtZmVjNi00YmZjLWFjOWMtNTdlZTc1ZDVhNjRmMTRiZmFlMzAtN2EzOS00YjYwLWEwNzgtYmM0MDU5ZWViNWI0","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"a13d0597f96184209db71ce8a68b4601","Raw":{"client_id":"mvcImp","redirect_uri":"http://localhost:5004/signin-oidc","response_type":"id_token","scope":"openid profile","response_mode":"form_post","nonce":"636947926306516607.NjBjMzE2NGMtZmVjNi00YmZjLWFjOWMtNTdlZTc1ZDVhNjRmMTRiZmFlMzAtN2EzOS00YjYwLWEwNzgtYmM0MDU5ZWViNWI0","state":"CfDJ8J6dQdEYr6RAjUqFr50zuTugNTd7YkvxyRDT5USbCNGSyRtioFHp9exc_LCJdsEXi85LO1gNFNl3IrqNSZ5RcixY7-AiOP4iV7CYhISwRvj78tnlL4o0WxmzbrBO4bppAj6NLnsoV0TtSTTwUk-SNUG3ti-0W0MMaPFZ-r1qup_oR02zOwoh1iyCB2-hw6M_jRurzJ5tzS4zwXz4jGZzK-COOTYmh0MwsB50x2o6gkuRFHzYNJNsCF15tW1auSpMpBaEBQ6vdEG1P4pZG51bLuN5U8vkC0rlz1iEdBz3vBOPEwPreMuv1rUuvaCxer7kdQ","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-05-30 13:57:12.875 +08:00 [DBG] VHwV9SWfzW/EQXuBTL6MQ//T5xXc1u82LMCGIn0Ko/U= found in database: true
2019-05-30 13:57:12.878 +08:00 [DBG] Consent found in consent store is same as current request, consent is not required
2019-05-30 13:57:12.878 +08:00 [DBG] Creating Implicit Flow response.
2019-05-30 13:57:12.878 +08:00 [DBG] Getting claims for identity token for subject: af61726e-716b-4170-8c26-6568bf294215 and client: mvcImp
2019-05-30 13:57:12.879 +08:00 [DBG] Claim types from profile service that were filtered: ["sub"]
2019-05-30 13:57:12.882 +08:00 [INF] {"ClientId":"mvcImp","ClientName":"MVC ClientImp","RedirectUri":"http://localhost:5004/signin-oidc","Endpoint":"Authorize","SubjectId":"af61726e-716b-4170-8c26-6568bf294215","Scopes":"openid profile","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****lkyw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN4OBID92O3:00000004","TimeStamp":"2019-05-30T05:57:12.0000000Z","ProcessId":27164,"LocalIpAddress":"127.0.0.1:23500","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-30 13:57:12.882 +08:00 [INF] Authorize endpoint response
{"SubjectId":"af61726e-716b-4170-8c26-6568bf294215","ClientId":"mvcImp","RedirectUri":"http://localhost:5004/signin-oidc","State":"CfDJ8J6dQdEYr6RAjUqFr50zuTugNTd7YkvxyRDT5USbCNGSyRtioFHp9exc_LCJdsEXi85LO1gNFNl3IrqNSZ5RcixY7-AiOP4iV7CYhISwRvj78tnlL4o0WxmzbrBO4bppAj6NLnsoV0TtSTTwUk-SNUG3ti-0W0MMaPFZ-r1qup_oR02zOwoh1iyCB2-hw6M_jRurzJ5tzS4zwXz4jGZzK-COOTYmh0MwsB50x2o6gkuRFHzYNJNsCF15tW1auSpMpBaEBQ6vdEG1P4pZG51bLuN5U8vkC0rlz1iEdBz3vBOPEwPreMuv1rUuvaCxer7kdQ","Scope":"openid profile","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-05-30 13:57:20.354 +08:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-05-30 13:57:20.355 +08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-05-30 13:57:20.355 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-05-30 13:57:20.355 +08:00 [DBG] Start authorize request
2019-05-30 13:57:20.355 +08:00 [DBG] User in authorize request: af61726e-716b-4170-8c26-6568bf294215
2019-05-30 13:57:20.355 +08:00 [DBG] Start authorize request protocol validation
2019-05-30 13:57:21.373 +08:00 [DBG] mvcImp found in database: true
2019-05-30 13:57:21.373 +08:00 [DBG] client configuration validation for client mvcImp succeeded.
2019-05-30 13:57:21.575 +08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-05-30 13:57:21.699 +08:00 [DBG] Found [] API scopes in database
2019-05-30 13:57:21.912 +08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-05-30 13:57:22.014 +08:00 [DBG] Found [] API scopes in database
2019-05-30 13:57:22.015 +08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-30 13:57:22.015 +08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"mvcImp","ClientName":"MVC ClientImp","RedirectUri":"http://localhost:5004/signin-oidc","AllowedRedirectUris":["http://localhost:5004/signin-oidc"],"SubjectId":"af61726e-716b-4170-8c26-6568bf294215","ResponseType":"id_token","ResponseMode":"form_post","GrantType":"implicit","RequestedScopes":"openid profile","State":"CfDJ8J6dQdEYr6RAjUqFr50zuTupwzYnAYdgZ1SDBBt2Sx2FeROVGrq7lnRrxSbTbGqRU1ut1BOSInYWuuN_uXwm0RSS4q9-xSfMonx-GHsAWXDx7c_KjoPUEHDd2JJJiqW3eXdP0z1SOy253gQFjUNBfnVgvb_Selbhttrw0cqpvolyGeL-yABhuDbyr-wrWCuGIm9FiO1esvCQBLQKQ8ClQH1gZVWuWcSdH_HclNH67pHKaNSKg9CBCI9oIk_hTUjobUPNonr9NzQFiQeVGpzBKBKvwAktyDbIw0wGCJ2Gs765dmG481eKWws_Qh-hSsZhDw","UiLocales":null,"Nonce":"636947926403462172.NmZiY2Q1NWQtOGExMi00ODc3LThiYTYtNzI0OWQwOTU5ZDMwZWM1MjU2MDMtZWFhNS00MmFiLWJjNDctYjA1MzRlYmJiNTcz","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"a13d0597f96184209db71ce8a68b4601","Raw":{"client_id":"mvcImp","redirect_uri":"http://localhost:5004/signin-oidc","response_type":"id_token","scope":"openid profile","response_mode":"form_post","nonce":"636947926403462172.NmZiY2Q1NWQtOGExMi00ODc3LThiYTYtNzI0OWQwOTU5ZDMwZWM1MjU2MDMtZWFhNS00MmFiLWJjNDctYjA1MzRlYmJiNTcz","state":"CfDJ8J6dQdEYr6RAjUqFr50zuTupwzYnAYdgZ1SDBBt2Sx2FeROVGrq7lnRrxSbTbGqRU1ut1BOSInYWuuN_uXwm0RSS4q9-xSfMonx-GHsAWXDx7c_KjoPUEHDd2JJJiqW3eXdP0z1SOy253gQFjUNBfnVgvb_Selbhttrw0cqpvolyGeL-yABhuDbyr-wrWCuGIm9FiO1esvCQBLQKQ8ClQH1gZVWuWcSdH_HclNH67pHKaNSKg9CBCI9oIk_hTUjobUPNonr9NzQFiQeVGpzBKBKvwAktyDbIw0wGCJ2Gs765dmG481eKWws_Qh-hSsZhDw","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-05-30 13:57:22.228 +08:00 [DBG] VHwV9SWfzW/EQXuBTL6MQ//T5xXc1u82LMCGIn0Ko/U= found in database: true
2019-05-30 13:57:22.232 +08:00 [DBG] Consent found in consent store is same as current request, consent is not required
2019-05-30 13:57:22.232 +08:00 [DBG] Creating Implicit Flow response.
2019-05-30 13:57:22.232 +08:00 [DBG] Getting claims for identity token for subject: af61726e-716b-4170-8c26-6568bf294215 and client: mvcImp
2019-05-30 13:57:22.233 +08:00 [DBG] Claim types from profile service that were filtered: ["sub"]
2019-05-30 13:57:22.236 +08:00 [INF] {"ClientId":"mvcImp","ClientName":"MVC ClientImp","RedirectUri":"http://localhost:5004/signin-oidc","Endpoint":"Authorize","SubjectId":"af61726e-716b-4170-8c26-6568bf294215","Scopes":"openid profile","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****pQHQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN4OBID92O3:00000005","TimeStamp":"2019-05-30T05:57:22.0000000Z","ProcessId":27164,"LocalIpAddress":"127.0.0.1:23500","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-30 13:57:22.236 +08:00 [INF] Authorize endpoint response
{"SubjectId":"af61726e-716b-4170-8c26-6568bf294215","ClientId":"mvcImp","RedirectUri":"http://localhost:5004/signin-oidc","State":"CfDJ8J6dQdEYr6RAjUqFr50zuTupwzYnAYdgZ1SDBBt2Sx2FeROVGrq7lnRrxSbTbGqRU1ut1BOSInYWuuN_uXwm0RSS4q9-xSfMonx-GHsAWXDx7c_KjoPUEHDd2JJJiqW3eXdP0z1SOy253gQFjUNBfnVgvb_Selbhttrw0cqpvolyGeL-yABhuDbyr-wrWCuGIm9FiO1esvCQBLQKQ8ClQH1gZVWuWcSdH_HclNH67pHKaNSKg9CBCI9oIk_hTUjobUPNonr9NzQFiQeVGpzBKBKvwAktyDbIw0wGCJ2Gs765dmG481eKWws_Qh-hSsZhDw","Scope":"openid profile","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-05-30 14:05:30.782 +08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-05-30 14:05:30.783 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-05-30 14:05:30.783 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-05-30 14:05:30.783 +08:00 [DBG] Start discovery request
2019-05-30 14:05:31.678 +08:00 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-05-30 14:05:32.014 +08:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-05-30 14:05:32.014 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-05-30 14:05:32.014 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-05-30 14:05:32.015 +08:00 [DBG] Start key discovery request
2019-05-30 14:05:32.131 +08:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-05-30 14:05:32.131 +08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-05-30 14:05:32.132 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-05-30 14:05:32.132 +08:00 [DBG] Start authorize request
2019-05-30 14:05:32.132 +08:00 [DBG] User in authorize request: af61726e-716b-4170-8c26-6568bf294215
2019-05-30 14:05:32.132 +08:00 [DBG] Start authorize request protocol validation
2019-05-30 14:05:33.271 +08:00 [DBG] mvcImp found in database: true
2019-05-30 14:05:33.271 +08:00 [DBG] client configuration validation for client mvcImp succeeded.
2019-05-30 14:05:33.487 +08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-05-30 14:05:33.609 +08:00 [DBG] Found [] API scopes in database
2019-05-30 14:05:33.813 +08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-05-30 14:05:33.943 +08:00 [DBG] Found [] API scopes in database
2019-05-30 14:05:33.943 +08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-30 14:05:33.943 +08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"mvcImp","ClientName":"MVC ClientImp","RedirectUri":"http://localhost:5004/signin-oidc","AllowedRedirectUris":["http://localhost:5004/signin-oidc"],"SubjectId":"af61726e-716b-4170-8c26-6568bf294215","ResponseType":"id_token","ResponseMode":"form_post","GrantType":"implicit","RequestedScopes":"openid profile","State":"CfDJ8J6dQdEYr6RAjUqFr50zuTtSCz3xvo8Bf-PyW2AksFB4DewwBumOm0pJD7S4f7IV1rTr-8CjwtO62Qfa_sOW_0w61h91ybkG-tNXTwOjdLuBm05lFTKqcbdNZCkTmlga_zO49THtsOwQLcgOvjLBbxziZ5MwELZcQ7ndvQdhMiv7iewluhynkhsf9Q8KPfE5God2OR1_EQy_ZtiY_CF0W5Jt62Srubj7gHcI_sw1M0p-9MdHEBvWv8kTWWWFT44IBS4Z6dC9jZQAkT5VCpB86Tmm1erq2ZQJZQQ3yMzcfBUY67Heac0x14fTXscj9baRmg","UiLocales":null,"Nonce":"636947931320543096.YzBmNTJmOTEtMWFiNS00MDcwLTk5OTQtY2I3Y2Y0ODBjNzEwMjFkZjZiNjYtNTExZS00YWE3LTkzZTctN2U3OWMyZDU1OTEx","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"a13d0597f96184209db71ce8a68b4601","Raw":{"client_id":"mvcImp","redirect_uri":"http://localhost:5004/signin-oidc","response_type":"id_token","scope":"openid profile","response_mode":"form_post","nonce":"636947931320543096.YzBmNTJmOTEtMWFiNS00MDcwLTk5OTQtY2I3Y2Y0ODBjNzEwMjFkZjZiNjYtNTExZS00YWE3LTkzZTctN2U3OWMyZDU1OTEx","state":"CfDJ8J6dQdEYr6RAjUqFr50zuTtSCz3xvo8Bf-PyW2AksFB4DewwBumOm0pJD7S4f7IV1rTr-8CjwtO62Qfa_sOW_0w61h91ybkG-tNXTwOjdLuBm05lFTKqcbdNZCkTmlga_zO49THtsOwQLcgOvjLBbxziZ5MwELZcQ7ndvQdhMiv7iewluhynkhsf9Q8KPfE5God2OR1_EQy_ZtiY_CF0W5Jt62Srubj7gHcI_sw1M0p-9MdHEBvWv8kTWWWFT44IBS4Z6dC9jZQAkT5VCpB86Tmm1erq2ZQJZQQ3yMzcfBUY67Heac0x14fTXscj9baRmg","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-05-30 14:05:34.186 +08:00 [DBG] VHwV9SWfzW/EQXuBTL6MQ//T5xXc1u82LMCGIn0Ko/U= found in database: true
2019-05-30 14:05:34.189 +08:00 [DBG] Consent found in consent store is same as current request, consent is not required
2019-05-30 14:05:34.189 +08:00 [DBG] Creating Implicit Flow response.
2019-05-30 14:05:34.190 +08:00 [DBG] Getting claims for identity token for subject: af61726e-716b-4170-8c26-6568bf294215 and client: mvcImp
2019-05-30 14:05:34.190 +08:00 [DBG] Claim types from profile service that were filtered: ["sub"]
2019-05-30 14:05:34.193 +08:00 [INF] {"ClientId":"mvcImp","ClientName":"MVC ClientImp","RedirectUri":"http://localhost:5004/signin-oidc","Endpoint":"Authorize","SubjectId":"af61726e-716b-4170-8c26-6568bf294215","Scopes":"openid profile","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****uhVg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN4OBID92O4:00000003","TimeStamp":"2019-05-30T06:05:34.0000000Z","ProcessId":27164,"LocalIpAddress":"127.0.0.1:23500","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-30 14:05:34.193 +08:00 [INF] Authorize endpoint response
{"SubjectId":"af61726e-716b-4170-8c26-6568bf294215","ClientId":"mvcImp","RedirectUri":"http://localhost:5004/signin-oidc","State":"CfDJ8J6dQdEYr6RAjUqFr50zuTtSCz3xvo8Bf-PyW2AksFB4DewwBumOm0pJD7S4f7IV1rTr-8CjwtO62Qfa_sOW_0w61h91ybkG-tNXTwOjdLuBm05lFTKqcbdNZCkTmlga_zO49THtsOwQLcgOvjLBbxziZ5MwELZcQ7ndvQdhMiv7iewluhynkhsf9Q8KPfE5God2OR1_EQy_ZtiY_CF0W5Jt62Srubj7gHcI_sw1M0p-9MdHEBvWv8kTWWWFT44IBS4Z6dC9jZQAkT5VCpB86Tmm1erq2ZQJZQQ3yMzcfBUY67Heac0x14fTXscj9baRmg","Scope":"openid profile","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-05-30 14:19:50.933 +08:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-05-30 14:19:50.965 +08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-05-30 14:19:50.965 +08:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-05-30 14:19:50.965 +08:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-05-30 14:19:50.965 +08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-05-30 14:19:50.965 +08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-05-30 14:19:51.384 +08:00 [DBG] Starting grant removal
2019-05-30 14:19:51.725 +08:00 [DBG] Login Url: /Account/Login
2019-05-30 14:19:51.728 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-05-30 14:19:51.728 +08:00 [DBG] Logout Url: /Account/Logout
2019-05-30 14:19:51.728 +08:00 [DBG] ConsentUrl Url: /consent
2019-05-30 14:19:51.728 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2019-05-30 14:19:51.728 +08:00 [DBG] Error Url: /home/error
2019-05-30 14:19:51.728 +08:00 [DBG] Error Id Parameter: errorId
2019-05-30 14:19:51.758 +08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-05-30 14:19:51.762 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-05-30 14:19:51.762 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-05-30 14:19:51.766 +08:00 [DBG] Start discovery request
2019-05-30 14:19:53.375 +08:00 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-05-30 14:19:53.745 +08:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-05-30 14:19:53.746 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-05-30 14:19:53.746 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-05-30 14:19:53.752 +08:00 [DBG] Start key discovery request
2019-05-30 14:19:53.895 +08:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-05-30 14:19:53.898 +08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-05-30 14:19:53.898 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-05-30 14:19:53.903 +08:00 [DBG] Start authorize request
2019-05-30 14:19:53.917 +08:00 [DBG] User in authorize request: af61726e-716b-4170-8c26-6568bf294215
2019-05-30 14:19:53.921 +08:00 [DBG] Start authorize request protocol validation
2019-05-30 14:19:55.248 +08:00 [DBG] mvcImp found in database: true
2019-05-30 14:19:55.257 +08:00 [DBG] client configuration validation for client mvcImp succeeded.
2019-05-30 14:19:55.516 +08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-05-30 14:19:55.655 +08:00 [DBG] Found [] API scopes in database
2019-05-30 14:19:55.850 +08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-05-30 14:19:55.952 +08:00 [DBG] Found [] API scopes in database
2019-05-30 14:19:55.960 +08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-30 14:19:55.974 +08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"mvcImp","ClientName":"MVC ClientImp","RedirectUri":"http://localhost:5004/signin-oidc","AllowedRedirectUris":["http://localhost:5004/signin-oidc"],"SubjectId":"af61726e-716b-4170-8c26-6568bf294215","ResponseType":"id_token","ResponseMode":"form_post","GrantType":"implicit","RequestedScopes":"openid profile","State":"CfDJ8J6dQdEYr6RAjUqFr50zuTun5qMcDh3rc0A21e0bvVv3b90t02pWu-JRDBikY8vBi5wdRxJvucJnRgHJ4Tf_UfFCJfR5lp1oHB6-bl_pGWXe8v4bbzQ4ar-u0fS7iFEZz07dioW--kGVEY2tHsHL1YeTf3Q9HrGbX36NiMdMaB5lKgtPxOQ2CfT5coMWSYjwN9BJP_cKhoMjy9ZxZe74uDdj31x2NlwRp-aAw4oHiMiGGooSa8HRdDw9JcAGUShWeW-jAqpFWm-qLgOPnAsy8ccH-qIhMieLrqoKekHMxaK4F-PF-BKrlhVrUoiWNpXLcw","UiLocales":null,"Nonce":"636947939938168277.NmZmMmY4MjktODA0MS00YWZhLWEwNTUtZDE5Y2M4MjQ1NzllMjBlNjExOWMtMDkzOC00ZDQzLWFkODUtNGUzY2M3MmJkMTIw","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"a13d0597f96184209db71ce8a68b4601","Raw":{"client_id":"mvcImp","redirect_uri":"http://localhost:5004/signin-oidc","response_type":"id_token","scope":"openid profile","response_mode":"form_post","nonce":"636947939938168277.NmZmMmY4MjktODA0MS00YWZhLWEwNTUtZDE5Y2M4MjQ1NzllMjBlNjExOWMtMDkzOC00ZDQzLWFkODUtNGUzY2M3MmJkMTIw","state":"CfDJ8J6dQdEYr6RAjUqFr50zuTun5qMcDh3rc0A21e0bvVv3b90t02pWu-JRDBikY8vBi5wdRxJvucJnRgHJ4Tf_UfFCJfR5lp1oHB6-bl_pGWXe8v4bbzQ4ar-u0fS7iFEZz07dioW--kGVEY2tHsHL1YeTf3Q9HrGbX36NiMdMaB5lKgtPxOQ2CfT5coMWSYjwN9BJP_cKhoMjy9ZxZe74uDdj31x2NlwRp-aAw4oHiMiGGooSa8HRdDw9JcAGUShWeW-jAqpFWm-qLgOPnAsy8ccH-qIhMieLrqoKekHMxaK4F-PF-BKrlhVrUoiWNpXLcw","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-05-30 14:19:56.247 +08:00 [DBG] VHwV9SWfzW/EQXuBTL6MQ//T5xXc1u82LMCGIn0Ko/U= found in database: true
2019-05-30 14:19:56.253 +08:00 [DBG] Consent found in consent store is same as current request, consent is not required
2019-05-30 14:19:56.261 +08:00 [DBG] Creating Implicit Flow response.
2019-05-30 14:19:56.270 +08:00 [DBG] Getting claims for identity token for subject: af61726e-716b-4170-8c26-6568bf294215 and client: mvcImp
2019-05-30 14:19:56.279 +08:00 [DBG] Claim types from profile service that were filtered: ["sub"]
2019-05-30 14:19:56.382 +08:00 [INF] {"ClientId":"mvcImp","ClientName":"MVC ClientImp","RedirectUri":"http://localhost:5004/signin-oidc","Endpoint":"Authorize","SubjectId":"af61726e-716b-4170-8c26-6568bf294215","Scopes":"openid profile","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****e0rw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN4OR9HC3H8:00000002","TimeStamp":"2019-05-30T06:19:56.0000000Z","ProcessId":12892,"LocalIpAddress":"127.0.0.1:16657","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-30 14:19:56.384 +08:00 [INF] Authorize endpoint response
{"SubjectId":"af61726e-716b-4170-8c26-6568bf294215","ClientId":"mvcImp","RedirectUri":"http://localhost:5004/signin-oidc","State":"CfDJ8J6dQdEYr6RAjUqFr50zuTun5qMcDh3rc0A21e0bvVv3b90t02pWu-JRDBikY8vBi5wdRxJvucJnRgHJ4Tf_UfFCJfR5lp1oHB6-bl_pGWXe8v4bbzQ4ar-u0fS7iFEZz07dioW--kGVEY2tHsHL1YeTf3Q9HrGbX36NiMdMaB5lKgtPxOQ2CfT5coMWSYjwN9BJP_cKhoMjy9ZxZe74uDdj31x2NlwRp-aAw4oHiMiGGooSa8HRdDw9JcAGUShWeW-jAqpFWm-qLgOPnAsy8ccH-qIhMieLrqoKekHMxaK4F-PF-BKrlhVrUoiWNpXLcw","Scope":"openid profile","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-05-30 14:20:19.462 +08:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-05-30 14:20:19.473 +08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-05-30 14:20:19.473 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-05-30 14:20:19.473 +08:00 [DBG] Start authorize request
2019-05-30 14:20:19.474 +08:00 [DBG] User in authorize request: af61726e-716b-4170-8c26-6568bf294215
2019-05-30 14:20:19.474 +08:00 [DBG] Start authorize request protocol validation
2019-05-30 14:20:20.519 +08:00 [DBG] mvcImp found in database: true
2019-05-30 14:20:20.523 +08:00 [DBG] client configuration validation for client mvcImp succeeded.
2019-05-30 14:20:20.698 +08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-05-30 14:20:20.832 +08:00 [DBG] Found [] API scopes in database
2019-05-30 14:20:21.025 +08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-05-30 14:20:21.152 +08:00 [DBG] Found [] API scopes in database
2019-05-30 14:20:21.152 +08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-30 14:20:21.153 +08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"mvcImp","ClientName":"MVC ClientImp","RedirectUri":"http://localhost:5004/signin-oidc","AllowedRedirectUris":["http://localhost:5004/signin-oidc"],"SubjectId":"af61726e-716b-4170-8c26-6568bf294215","ResponseType":"id_token","ResponseMode":"form_post","GrantType":"implicit","RequestedScopes":"openid profile","State":"CfDJ8J6dQdEYr6RAjUqFr50zuTt5eMwxjC0ehDBDIwyFFypbXZRK_od47YrylTh7n33GIFa1RBYuGAcbLCxLSuiMQgMMFuWt67F6PuMPAcdPmPgGWQHbmmwIwXVo_t1AcgpOfPDqa-LBqmUzEGbYUZfTsYpP_NdAGy0T7vbWuKTbS1hBJSMfhv0mPd5gHBCcmLS4EtCRoJVrULBvAvz4_IEyR0VSsBT-yUIDP0PQS81Nw9gxgU2z-6SMXT_ajx_hcjwD8szMHHshxtcIrIB71SiM0RmnnzHf6lLE7jCLphkcJWVLcb92qRmyZHFehT-HeWBzJA","UiLocales":null,"Nonce":"636947940194413420.YzMwMzc5ZmItODNlMC00NjU3LWE5NTUtYThiOWViYmE0ZTM2NzNhN2QxNDAtZjQ2My00Yjc5LTkyMzQtMWZjNTM2ZDhkNzQy","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"a13d0597f96184209db71ce8a68b4601","Raw":{"client_id":"mvcImp","redirect_uri":"http://localhost:5004/signin-oidc","response_type":"id_token","scope":"openid profile","response_mode":"form_post","nonce":"636947940194413420.YzMwMzc5ZmItODNlMC00NjU3LWE5NTUtYThiOWViYmE0ZTM2NzNhN2QxNDAtZjQ2My00Yjc5LTkyMzQtMWZjNTM2ZDhkNzQy","state":"CfDJ8J6dQdEYr6RAjUqFr50zuTt5eMwxjC0ehDBDIwyFFypbXZRK_od47YrylTh7n33GIFa1RBYuGAcbLCxLSuiMQgMMFuWt67F6PuMPAcdPmPgGWQHbmmwIwXVo_t1AcgpOfPDqa-LBqmUzEGbYUZfTsYpP_NdAGy0T7vbWuKTbS1hBJSMfhv0mPd5gHBCcmLS4EtCRoJVrULBvAvz4_IEyR0VSsBT-yUIDP0PQS81Nw9gxgU2z-6SMXT_ajx_hcjwD8szMHHshxtcIrIB71SiM0RmnnzHf6lLE7jCLphkcJWVLcb92qRmyZHFehT-HeWBzJA","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-05-30 14:20:21.385 +08:00 [DBG] VHwV9SWfzW/EQXuBTL6MQ//T5xXc1u82LMCGIn0Ko/U= found in database: true
2019-05-30 14:20:21.389 +08:00 [DBG] Consent found in consent store is same as current request, consent is not required
2019-05-30 14:20:21.389 +08:00 [DBG] Creating Implicit Flow response.
2019-05-30 14:20:21.389 +08:00 [DBG] Getting claims for identity token for subject: af61726e-716b-4170-8c26-6568bf294215 and client: mvcImp
2019-05-30 14:20:21.389 +08:00 [DBG] Claim types from profile service that were filtered: ["sub"]
2019-05-30 14:20:21.393 +08:00 [INF] {"ClientId":"mvcImp","ClientName":"MVC ClientImp","RedirectUri":"http://localhost:5004/signin-oidc","Endpoint":"Authorize","SubjectId":"af61726e-716b-4170-8c26-6568bf294215","Scopes":"openid profile","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****iRsQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN4OR9HC3H6:00000002","TimeStamp":"2019-05-30T06:20:21.0000000Z","ProcessId":12892,"LocalIpAddress":"127.0.0.1:16657","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-30 14:20:21.393 +08:00 [INF] Authorize endpoint response
{"SubjectId":"af61726e-716b-4170-8c26-6568bf294215","ClientId":"mvcImp","RedirectUri":"http://localhost:5004/signin-oidc","State":"CfDJ8J6dQdEYr6RAjUqFr50zuTt5eMwxjC0ehDBDIwyFFypbXZRK_od47YrylTh7n33GIFa1RBYuGAcbLCxLSuiMQgMMFuWt67F6PuMPAcdPmPgGWQHbmmwIwXVo_t1AcgpOfPDqa-LBqmUzEGbYUZfTsYpP_NdAGy0T7vbWuKTbS1hBJSMfhv0mPd5gHBCcmLS4EtCRoJVrULBvAvz4_IEyR0VSsBT-yUIDP0PQS81Nw9gxgU2z-6SMXT_ajx_hcjwD8szMHHshxtcIrIB71SiM0RmnnzHf6lLE7jCLphkcJWVLcb92qRmyZHFehT-HeWBzJA","Scope":"openid profile","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-05-30 14:20:42.664 +08:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-05-30 14:20:42.664 +08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-05-30 14:20:42.664 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-05-30 14:20:42.665 +08:00 [DBG] Start authorize request
2019-05-30 14:20:42.665 +08:00 [DBG] User in authorize request: af61726e-716b-4170-8c26-6568bf294215
2019-05-30 14:20:42.665 +08:00 [DBG] Start authorize request protocol validation
2019-05-30 14:20:43.668 +08:00 [DBG] mvcImp found in database: true
2019-05-30 14:20:43.668 +08:00 [DBG] client configuration validation for client mvcImp succeeded.
2019-05-30 14:20:43.860 +08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-05-30 14:20:43.973 +08:00 [DBG] Found [] API scopes in database
2019-05-30 14:20:44.158 +08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-05-30 14:20:44.274 +08:00 [DBG] Found [] API scopes in database
2019-05-30 14:20:44.275 +08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-30 14:20:44.275 +08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"mvcImp","ClientName":"MVC ClientImp","RedirectUri":"http://localhost:5004/signin-oidc","AllowedRedirectUris":["http://localhost:5004/signin-oidc"],"SubjectId":"af61726e-716b-4170-8c26-6568bf294215","ResponseType":"id_token","ResponseMode":"form_post","GrantType":"implicit","RequestedScopes":"openid profile","State":"CfDJ8J6dQdEYr6RAjUqFr50zuTvB_05guwk7xMpVewCbavkG4vCxIcPgFXiG8NOT6nYi0UjLeDk6RWNCXU6Tgtyl0EIGOyCeeAi-kBeS3eD1-eAPm6HWTqTliarlomYhCztDBMnqhWst5MfmlBlHQP9fU627R9SiDqnSLlPsA3EyMiFWyl6jAc7qxDIbTD27P_4RXuOmD_G8YvINmNMyYmNjOCcXudx0ss06XkzgHSdyuV9CGipmukhOReX7lQt07SB-Wso-m7BnfHs5xW6ya37B84aO6gCtZza4Vzkh1wk9E3rPzcutMrSMJglFwzdp8vnNdA","UiLocales":null,"Nonce":"636947940426527630.MTMzNDcwMjAtMzVlOC00ZDdkLTkwMTUtZjEyOGRjZmMyMzBiMWUxZDRmMDItNzYwZC00ZDU3LTkwN2ItN2U0MzFlZTA2OWM4","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"a13d0597f96184209db71ce8a68b4601","Raw":{"client_id":"mvcImp","redirect_uri":"http://localhost:5004/signin-oidc","response_type":"id_token","scope":"openid profile","response_mode":"form_post","nonce":"636947940426527630.MTMzNDcwMjAtMzVlOC00ZDdkLTkwMTUtZjEyOGRjZmMyMzBiMWUxZDRmMDItNzYwZC00ZDU3LTkwN2ItN2U0MzFlZTA2OWM4","state":"CfDJ8J6dQdEYr6RAjUqFr50zuTvB_05guwk7xMpVewCbavkG4vCxIcPgFXiG8NOT6nYi0UjLeDk6RWNCXU6Tgtyl0EIGOyCeeAi-kBeS3eD1-eAPm6HWTqTliarlomYhCztDBMnqhWst5MfmlBlHQP9fU627R9SiDqnSLlPsA3EyMiFWyl6jAc7qxDIbTD27P_4RXuOmD_G8YvINmNMyYmNjOCcXudx0ss06XkzgHSdyuV9CGipmukhOReX7lQt07SB-Wso-m7BnfHs5xW6ya37B84aO6gCtZza4Vzkh1wk9E3rPzcutMrSMJglFwzdp8vnNdA","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-05-30 14:20:44.497 +08:00 [DBG] VHwV9SWfzW/EQXuBTL6MQ//T5xXc1u82LMCGIn0Ko/U= found in database: true
2019-05-30 14:20:44.501 +08:00 [DBG] Consent found in consent store is same as current request, consent is not required
2019-05-30 14:20:44.501 +08:00 [DBG] Creating Implicit Flow response.
2019-05-30 14:20:44.501 +08:00 [DBG] Getting claims for identity token for subject: af61726e-716b-4170-8c26-6568bf294215 and client: mvcImp
2019-05-30 14:20:44.501 +08:00 [DBG] Claim types from profile service that were filtered: ["sub"]
2019-05-30 14:20:44.504 +08:00 [INF] {"ClientId":"mvcImp","ClientName":"MVC ClientImp","RedirectUri":"http://localhost:5004/signin-oidc","Endpoint":"Authorize","SubjectId":"af61726e-716b-4170-8c26-6568bf294215","Scopes":"openid profile","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****1nLw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN4OR9HC3H7:00000003","TimeStamp":"2019-05-30T06:20:44.0000000Z","ProcessId":12892,"LocalIpAddress":"127.0.0.1:16657","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-30 14:20:44.504 +08:00 [INF] Authorize endpoint response
{"SubjectId":"af61726e-716b-4170-8c26-6568bf294215","ClientId":"mvcImp","RedirectUri":"http://localhost:5004/signin-oidc","State":"CfDJ8J6dQdEYr6RAjUqFr50zuTvB_05guwk7xMpVewCbavkG4vCxIcPgFXiG8NOT6nYi0UjLeDk6RWNCXU6Tgtyl0EIGOyCeeAi-kBeS3eD1-eAPm6HWTqTliarlomYhCztDBMnqhWst5MfmlBlHQP9fU627R9SiDqnSLlPsA3EyMiFWyl6jAc7qxDIbTD27P_4RXuOmD_G8YvINmNMyYmNjOCcXudx0ss06XkzgHSdyuV9CGipmukhOReX7lQt07SB-Wso-m7BnfHs5xW6ya37B84aO6gCtZza4Vzkh1wk9E3rPzcutMrSMJglFwzdp8vnNdA","Scope":"openid profile","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-05-30 14:20:58.807 +08:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-05-30 14:20:58.809 +08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-05-30 14:20:58.809 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-05-30 14:20:58.809 +08:00 [DBG] Start authorize request
2019-05-30 14:20:58.809 +08:00 [DBG] No user present in authorize request
2019-05-30 14:20:58.810 +08:00 [DBG] Start authorize request protocol validation
2019-05-30 14:20:59.891 +08:00 [DBG] mvcImp found in database: true
2019-05-30 14:20:59.892 +08:00 [DBG] client configuration validation for client mvcImp succeeded.
2019-05-30 14:21:00.072 +08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-05-30 14:21:00.176 +08:00 [DBG] Found [] API scopes in database
2019-05-30 14:21:00.358 +08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-05-30 14:21:00.460 +08:00 [DBG] Found [] API scopes in database
2019-05-30 14:21:00.461 +08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-30 14:21:00.461 +08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"mvcImp","ClientName":"MVC ClientImp","RedirectUri":"http://localhost:5004/signin-oidc","AllowedRedirectUris":["http://localhost:5004/signin-oidc"],"SubjectId":"anonymous","ResponseType":"id_token","ResponseMode":"form_post","GrantType":"implicit","RequestedScopes":"openid profile","State":"CfDJ8J6dQdEYr6RAjUqFr50zuTseCNkKiM7zkNePa5Y7i59BMiYZKd2Ne0EFEUdP5I_1mHb54O8BbgzNHRbX3uodGfPVZySN3N3-CKBwjlfs8gJreL91JCgTMtL32Imku2_FLRiWIB5wPXZqT9ZU8lzyh0DnptzxZW4AJpurE08zX4W88p8kf0iy8zUqeQlSsOrwsmDW9BX-MqoNGSTHqbC0MWnHazBupl53tsiff4wllR5swGXjb5S6wFcmY5jeEjZd2SQ01YXwkgmBskuApwO6GAno2hAXymNM0YuKrpI-ZO5Ba2RBkz4AekiskUIKOYZaRQ","UiLocales":null,"Nonce":"636947940587966820.ZDQ5ZWJmNzMtMjJkZi00ZWJiLWEwNGMtMGYxZGYxMGMwZDk4ZDE4NjIzOGQtNGZiZS00NzA2LTllN2QtMWM3NDM0MDYwMjc5","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"mvcImp","redirect_uri":"http://localhost:5004/signin-oidc","response_type":"id_token","scope":"openid profile","response_mode":"form_post","nonce":"636947940587966820.ZDQ5ZWJmNzMtMjJkZi00ZWJiLWEwNGMtMGYxZGYxMGMwZDk4ZDE4NjIzOGQtNGZiZS00NzA2LTllN2QtMWM3NDM0MDYwMjc5","state":"CfDJ8J6dQdEYr6RAjUqFr50zuTseCNkKiM7zkNePa5Y7i59BMiYZKd2Ne0EFEUdP5I_1mHb54O8BbgzNHRbX3uodGfPVZySN3N3-CKBwjlfs8gJreL91JCgTMtL32Imku2_FLRiWIB5wPXZqT9ZU8lzyh0DnptzxZW4AJpurE08zX4W88p8kf0iy8zUqeQlSsOrwsmDW9BX-MqoNGSTHqbC0MWnHazBupl53tsiff4wllR5swGXjb5S6wFcmY5jeEjZd2SQ01YXwkgmBskuApwO6GAno2hAXymNM0YuKrpI-ZO5Ba2RBkz4AekiskUIKOYZaRQ","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-05-30 14:21:00.461 +08:00 [INF] Showing login: User is not authenticated
2019-05-30 14:21:00.567 +08:00 [DBG] Start authorize request protocol validation
2019-05-30 14:21:01.561 +08:00 [DBG] mvcImp found in database: true
2019-05-30 14:21:01.561 +08:00 [DBG] client configuration validation for client mvcImp succeeded.
2019-05-30 14:21:01.743 +08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-05-30 14:21:01.845 +08:00 [DBG] Found [] API scopes in database
2019-05-30 14:21:02.032 +08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-05-30 14:21:02.136 +08:00 [DBG] Found [] API scopes in database
2019-05-30 14:21:02.137 +08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-30 14:21:03.178 +08:00 [DBG] mvcImp found in database: true
2019-05-30 14:21:03.178 +08:00 [DBG] client configuration validation for client mvcImp succeeded.
2019-05-30 14:21:12.037 +08:00 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-05-30 14:21:14.936 +08:00 [DBG] Start authorize request protocol validation
2019-05-30 14:21:15.964 +08:00 [DBG] mvcImp found in database: true
2019-05-30 14:21:15.964 +08:00 [DBG] client configuration validation for client mvcImp succeeded.
2019-05-30 14:21:16.145 +08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-05-30 14:21:16.248 +08:00 [DBG] Found [] API scopes in database
2019-05-30 14:21:16.430 +08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-05-30 14:21:16.531 +08:00 [DBG] Found [] API scopes in database
2019-05-30 14:21:16.531 +08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-30 14:21:16.698 +08:00 [WRN] Invalid password for user af61726e-716b-4170-8c26-6568bf294215.
2019-05-30 14:21:16.699 +08:00 [INF] {"Username":"1223138295@qq.com","Endpoint":"UI","Category":"Authentication","Name":"User Login Failure","EventType":"Failure","Id":1001,"Message":"invalid credentials","ActivityId":"0HLN4OR9HC3H6:00000004","TimeStamp":"2019-05-30T06:21:16.0000000Z","ProcessId":12892,"LocalIpAddress":"127.0.0.1:16657","RemoteIpAddress":"::1","$type":"UserLoginFailureEvent"}
2019-05-30 14:21:16.700 +08:00 [DBG] Start authorize request protocol validation
2019-05-30 14:21:17.667 +08:00 [DBG] mvcImp found in database: true
2019-05-30 14:21:17.668 +08:00 [DBG] client configuration validation for client mvcImp succeeded.
2019-05-30 14:21:17.872 +08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-05-30 14:21:17.984 +08:00 [DBG] Found [] API scopes in database
2019-05-30 14:21:18.160 +08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-05-30 14:21:18.262 +08:00 [DBG] Found [] API scopes in database
2019-05-30 14:21:18.263 +08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-30 14:21:19.261 +08:00 [DBG] mvcImp found in database: true
2019-05-30 14:21:19.261 +08:00 [DBG] client configuration validation for client mvcImp succeeded.
2019-05-30 14:21:29.297 +08:00 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-05-30 14:21:35.550 +08:00 [DBG] Start authorize request protocol validation
2019-05-30 14:21:36.646 +08:00 [DBG] mvcImp found in database: true
2019-05-30 14:21:36.646 +08:00 [DBG] client configuration validation for client mvcImp succeeded.
2019-05-30 14:21:36.829 +08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-05-30 14:21:36.965 +08:00 [DBG] Found [] API scopes in database
2019-05-30 14:21:37.162 +08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-05-30 14:21:37.278 +08:00 [DBG] Found [] API scopes in database
2019-05-30 14:21:37.278 +08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-30 14:21:37.402 +08:00 [WRN] Invalid password for user af61726e-716b-4170-8c26-6568bf294215.
2019-05-30 14:21:37.402 +08:00 [INF] {"Username":"1223138295@qq.com","Endpoint":"UI","Category":"Authentication","Name":"User Login Failure","EventType":"Failure","Id":1001,"Message":"invalid credentials","ActivityId":"0HLN4OR9HC3H7:00000005","TimeStamp":"2019-05-30T06:21:37.0000000Z","ProcessId":12892,"LocalIpAddress":"127.0.0.1:16657","RemoteIpAddress":"::1","$type":"UserLoginFailureEvent"}
2019-05-30 14:21:37.402 +08:00 [DBG] Start authorize request protocol validation
2019-05-30 14:21:38.444 +08:00 [DBG] mvcImp found in database: true
2019-05-30 14:21:38.445 +08:00 [DBG] client configuration validation for client mvcImp succeeded.
2019-05-30 14:21:38.650 +08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-05-30 14:21:38.752 +08:00 [DBG] Found [] API scopes in database
2019-05-30 14:21:38.939 +08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-05-30 14:21:39.053 +08:00 [DBG] Found [] API scopes in database
2019-05-30 14:21:39.054 +08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-30 14:21:40.072 +08:00 [DBG] mvcImp found in database: true
2019-05-30 14:21:40.072 +08:00 [DBG] client configuration validation for client mvcImp succeeded.
2019-05-30 14:21:45.957 +08:00 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-05-30 14:21:45.984 +08:00 [DBG] Start authorize request protocol validation
2019-05-30 14:21:47.088 +08:00 [DBG] mvcImp found in database: true
2019-05-30 14:21:47.088 +08:00 [DBG] client configuration validation for client mvcImp succeeded.
2019-05-30 14:21:47.274 +08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-05-30 14:21:47.377 +08:00 [DBG] Found [] API scopes in database
2019-05-30 14:21:47.587 +08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-05-30 14:21:47.690 +08:00 [DBG] Found [] API scopes in database
2019-05-30 14:21:47.690 +08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-30 14:21:47.838 +08:00 [WRN] Invalid password for user af61726e-716b-4170-8c26-6568bf294215.
2019-05-30 14:21:47.838 +08:00 [INF] {"Username":"1223138295@qq.com","Endpoint":"UI","Category":"Authentication","Name":"User Login Failure","EventType":"Failure","Id":1001,"Message":"invalid credentials","ActivityId":"0HLN4OR9HC3H6:00000005","TimeStamp":"2019-05-30T06:21:47.0000000Z","ProcessId":12892,"LocalIpAddress":"127.0.0.1:16657","RemoteIpAddress":"::1","$type":"UserLoginFailureEvent"}
2019-05-30 14:21:47.838 +08:00 [DBG] Start authorize request protocol validation
2019-05-30 14:21:48.881 +08:00 [DBG] mvcImp found in database: true
2019-05-30 14:21:48.882 +08:00 [DBG] client configuration validation for client mvcImp succeeded.
2019-05-30 14:21:49.082 +08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-05-30 14:21:49.206 +08:00 [DBG] Found [] API scopes in database
2019-05-30 14:21:49.402 +08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-05-30 14:21:49.515 +08:00 [DBG] Found [] API scopes in database
2019-05-30 14:21:49.515 +08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-30 14:21:50.552 +08:00 [DBG] mvcImp found in database: true
2019-05-30 14:21:50.552 +08:00 [DBG] client configuration validation for client mvcImp succeeded.
2019-05-30 14:22:58.837 +08:00 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-05-30 14:22:58.872 +08:00 [DBG] Start authorize request protocol validation
2019-05-30 14:22:59.940 +08:00 [DBG] mvcImp found in database: true
2019-05-30 14:22:59.940 +08:00 [DBG] client configuration validation for client mvcImp succeeded.
2019-05-30 14:23:00.160 +08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-05-30 14:23:00.292 +08:00 [DBG] Found [] API scopes in database
2019-05-30 14:23:00.489 +08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-05-30 14:23:00.611 +08:00 [DBG] Found [] API scopes in database
2019-05-30 14:23:00.611 +08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-30 14:23:00.740 +08:00 [WRN] Invalid password for user af61726e-716b-4170-8c26-6568bf294215.
2019-05-30 14:23:00.740 +08:00 [INF] {"Username":"1223138295@qq.com","Endpoint":"UI","Category":"Authentication","Name":"User Login Failure","EventType":"Failure","Id":1001,"Message":"invalid credentials","ActivityId":"0HLN4OR9HC3H9:00000001","TimeStamp":"2019-05-30T06:23:00.0000000Z","ProcessId":12892,"LocalIpAddress":"127.0.0.1:16657","RemoteIpAddress":"::1","$type":"UserLoginFailureEvent"}
2019-05-30 14:23:00.740 +08:00 [DBG] Start authorize request protocol validation
2019-05-30 14:23:01.818 +08:00 [DBG] mvcImp found in database: true
2019-05-30 14:23:01.818 +08:00 [DBG] client configuration validation for client mvcImp succeeded.
2019-05-30 14:23:02.029 +08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-05-30 14:23:02.160 +08:00 [DBG] Found [] API scopes in database
2019-05-30 14:23:02.379 +08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-05-30 14:23:02.511 +08:00 [DBG] Found [] API scopes in database
2019-05-30 14:23:02.511 +08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-30 14:23:03.627 +08:00 [DBG] mvcImp found in database: true
2019-05-30 14:23:03.627 +08:00 [DBG] client configuration validation for client mvcImp succeeded.
2019-05-30 14:23:23.499 +08:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2019-05-30 14:23:30.680 +08:00 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-05-30 14:23:30.831 +08:00 [INF] {"Username":"1223138295@qq.com","Provider":null,"ProviderUserId":null,"SubjectId":"1223138295@qq.com","DisplayName":"shawn","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN4OR9HC3H9:00000005","TimeStamp":"2019-05-30T06:23:30.0000000Z","ProcessId":12892,"LocalIpAddress":"127.0.0.1:16657","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-05-30 14:23:31.065 +08:00 [DBG] Augmenting SignInContext
2019-05-30 14:23:31.067 +08:00 [DBG] Adding idp claim with value: local
2019-05-30 14:23:31.067 +08:00 [DBG] Adding amr claim with value: pwd
2019-05-30 14:23:31.068 +08:00 [DBG] Adding auth_time claim with value: 1559197411
2019-05-30 14:23:31.073 +08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-05-30 14:23:31.236 +08:00 [DBG] 1 persisted grants found for af61726e-716b-4170-8c26-6568bf294215
2019-05-30 14:23:32.328 +08:00 [DBG] mvcImp found in database: true
2019-05-30 14:23:32.328 +08:00 [DBG] client configuration validation for client mvcImp succeeded.
2019-05-30 14:23:32.529 +08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-05-30 14:23:32.642 +08:00 [DBG] Found [] API scopes in database
2019-05-30 14:28:40.058 +08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-05-30 14:28:40.058 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-05-30 14:28:40.058 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-05-30 14:28:40.059 +08:00 [DBG] Start discovery request
2019-05-30 14:28:40.835 +08:00 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-05-30 14:28:41.184 +08:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-05-30 14:28:41.185 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-05-30 14:28:41.185 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-05-30 14:28:41.186 +08:00 [DBG] Start key discovery request
2019-05-30 14:28:41.291 +08:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-05-30 14:28:41.292 +08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-05-30 14:28:41.292 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-05-30 14:28:41.292 +08:00 [DBG] Start authorize request
2019-05-30 14:28:41.292 +08:00 [DBG] No user present in authorize request
2019-05-30 14:28:41.292 +08:00 [DBG] Start authorize request protocol validation
2019-05-30 14:28:42.272 +08:00 [DBG] mvcImp found in database: true
2019-05-30 14:28:42.272 +08:00 [DBG] client configuration validation for client mvcImp succeeded.
2019-05-30 14:28:42.443 +08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-05-30 14:28:42.565 +08:00 [DBG] Found [] API scopes in database
2019-05-30 14:28:42.736 +08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-05-30 14:28:42.847 +08:00 [DBG] Found [] API scopes in database
2019-05-30 14:28:42.847 +08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-30 14:28:42.848 +08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"mvcImp","ClientName":"MVC ClientImp","RedirectUri":"http://localhost:5004/signin-oidc","AllowedRedirectUris":["http://localhost:5004/signin-oidc"],"SubjectId":"anonymous","ResponseType":"id_token","ResponseMode":"form_post","GrantType":"implicit","RequestedScopes":"openid profile","State":"CfDJ8J6dQdEYr6RAjUqFr50zuTsq5DPPBimqB3rSSD_w3K2MqK0todkGFSyrUFZwJoUcdkmawJ4H-9bUu9WIoavhZdqq1XMz865PmkQMvpeFr3KbFidQe1sY_HqJkAwRAYSvV0Nac92tL6wW8iBGciQ0nKF71dcoAR87x4UnygnTCI-F8o_Kyt2syDlTgHIDkARahOsNOD7HSCIj_oxLL571UuHWeuRpzpp8CgxfLFSx6d_UeAwsAP2Lrg1xum5G2K7JVyrSC2FQmjbbpvRPqZUE7DrE9VdX104HpjCztpJZyfaLpgOCcLcN0ZKpDTzF_Xs6rg","UiLocales":null,"Nonce":"636947945212325079.MzE3ZDVlZjktZDhjMS00NzViLThlYmQtNWZlNGE3MDU0ZjJjOWNmMGZjM2MtZjRkOC00MGFmLWI1MWEtZDk0MmExZjUyNzUz","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"mvcImp","redirect_uri":"http://localhost:5004/signin-oidc","response_type":"id_token","scope":"openid profile","response_mode":"form_post","nonce":"636947945212325079.MzE3ZDVlZjktZDhjMS00NzViLThlYmQtNWZlNGE3MDU0ZjJjOWNmMGZjM2MtZjRkOC00MGFmLWI1MWEtZDk0MmExZjUyNzUz","state":"CfDJ8J6dQdEYr6RAjUqFr50zuTsq5DPPBimqB3rSSD_w3K2MqK0todkGFSyrUFZwJoUcdkmawJ4H-9bUu9WIoavhZdqq1XMz865PmkQMvpeFr3KbFidQe1sY_HqJkAwRAYSvV0Nac92tL6wW8iBGciQ0nKF71dcoAR87x4UnygnTCI-F8o_Kyt2syDlTgHIDkARahOsNOD7HSCIj_oxLL571UuHWeuRpzpp8CgxfLFSx6d_UeAwsAP2Lrg1xum5G2K7JVyrSC2FQmjbbpvRPqZUE7DrE9VdX104HpjCztpJZyfaLpgOCcLcN0ZKpDTzF_Xs6rg","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-05-30 14:28:42.848 +08:00 [INF] Showing login: User is not authenticated
2019-05-30 14:28:42.880 +08:00 [DBG] Start authorize request protocol validation
2019-05-30 14:28:43.924 +08:00 [DBG] mvcImp found in database: true
2019-05-30 14:28:43.925 +08:00 [DBG] client configuration validation for client mvcImp succeeded.
2019-05-30 14:28:44.107 +08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-05-30 14:28:44.232 +08:00 [DBG] Found [] API scopes in database
2019-05-30 14:28:44.403 +08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-05-30 14:28:44.505 +08:00 [DBG] Found [] API scopes in database
2019-05-30 14:28:44.505 +08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-30 14:28:45.483 +08:00 [DBG] mvcImp found in database: true
2019-05-30 14:28:45.483 +08:00 [DBG] client configuration validation for client mvcImp succeeded.
2019-05-30 14:28:59.981 +08:00 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-05-30 14:29:00.009 +08:00 [DBG] Start authorize request protocol validation
2019-05-30 14:29:01.061 +08:00 [DBG] mvcImp found in database: true
2019-05-30 14:29:01.061 +08:00 [DBG] client configuration validation for client mvcImp succeeded.
2019-05-30 14:29:01.242 +08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-05-30 14:29:01.344 +08:00 [DBG] Found [] API scopes in database
2019-05-30 14:29:01.513 +08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-05-30 14:29:01.615 +08:00 [DBG] Found [] API scopes in database
2019-05-30 14:29:01.616 +08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-30 14:29:01.737 +08:00 [INF] {"Username":"1223138295@qq.com","Provider":null,"ProviderUserId":null,"SubjectId":"1223138295@qq.com","DisplayName":"shawn","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN4OR9HC3HA:00000007","TimeStamp":"2019-05-30T06:29:01.0000000Z","ProcessId":12892,"LocalIpAddress":"127.0.0.1:16657","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-05-30 14:29:01.943 +08:00 [DBG] Augmenting SignInContext
2019-05-30 14:29:01.944 +08:00 [DBG] Adding idp claim with value: local
2019-05-30 14:29:01.944 +08:00 [DBG] Adding amr claim with value: pwd
2019-05-30 14:29:01.944 +08:00 [DBG] Adding auth_time claim with value: 1559197741
2019-05-30 14:29:01.944 +08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-05-30 14:29:01.951 +08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-05-30 14:29:01.955 +08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-05-30 14:29:01.955 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-05-30 14:29:01.961 +08:00 [DBG] Start authorize callback request
2019-05-30 14:29:01.965 +08:00 [DBG] User in authorize request: af61726e-716b-4170-8c26-6568bf294215
2019-05-30 14:29:01.965 +08:00 [DBG] Start authorize request protocol validation
2019-05-30 14:29:02.982 +08:00 [DBG] mvcImp found in database: true
2019-05-30 14:29:02.983 +08:00 [DBG] client configuration validation for client mvcImp succeeded.
2019-05-30 14:29:03.186 +08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-05-30 14:29:03.296 +08:00 [DBG] Found [] API scopes in database
2019-05-30 14:29:03.463 +08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-05-30 14:29:03.565 +08:00 [DBG] Found [] API scopes in database
2019-05-30 14:29:03.565 +08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-30 14:29:03.565 +08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"mvcImp","ClientName":"MVC ClientImp","RedirectUri":"http://localhost:5004/signin-oidc","AllowedRedirectUris":["http://localhost:5004/signin-oidc"],"SubjectId":"af61726e-716b-4170-8c26-6568bf294215","ResponseType":"id_token","ResponseMode":"form_post","GrantType":"implicit","RequestedScopes":"openid profile","State":"CfDJ8J6dQdEYr6RAjUqFr50zuTsq5DPPBimqB3rSSD_w3K2MqK0todkGFSyrUFZwJoUcdkmawJ4H-9bUu9WIoavhZdqq1XMz865PmkQMvpeFr3KbFidQe1sY_HqJkAwRAYSvV0Nac92tL6wW8iBGciQ0nKF71dcoAR87x4UnygnTCI-F8o_Kyt2syDlTgHIDkARahOsNOD7HSCIj_oxLL571UuHWeuRpzpp8CgxfLFSx6d_UeAwsAP2Lrg1xum5G2K7JVyrSC2FQmjbbpvRPqZUE7DrE9VdX104HpjCztpJZyfaLpgOCcLcN0ZKpDTzF_Xs6rg","UiLocales":null,"Nonce":"636947945212325079.MzE3ZDVlZjktZDhjMS00NzViLThlYmQtNWZlNGE3MDU0ZjJjOWNmMGZjM2MtZjRkOC00MGFmLWI1MWEtZDk0MmExZjUyNzUz","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"d2cc5d1c1ed7eea8580a1fc3647d93b5","Raw":{"client_id":"mvcImp","redirect_uri":"http://localhost:5004/signin-oidc","response_type":"id_token","scope":"openid profile","response_mode":"form_post","nonce":"636947945212325079.MzE3ZDVlZjktZDhjMS00NzViLThlYmQtNWZlNGE3MDU0ZjJjOWNmMGZjM2MtZjRkOC00MGFmLWI1MWEtZDk0MmExZjUyNzUz","state":"CfDJ8J6dQdEYr6RAjUqFr50zuTsq5DPPBimqB3rSSD_w3K2MqK0todkGFSyrUFZwJoUcdkmawJ4H-9bUu9WIoavhZdqq1XMz865PmkQMvpeFr3KbFidQe1sY_HqJkAwRAYSvV0Nac92tL6wW8iBGciQ0nKF71dcoAR87x4UnygnTCI-F8o_Kyt2syDlTgHIDkARahOsNOD7HSCIj_oxLL571UuHWeuRpzpp8CgxfLFSx6d_UeAwsAP2Lrg1xum5G2K7JVyrSC2FQmjbbpvRPqZUE7DrE9VdX104HpjCztpJZyfaLpgOCcLcN0ZKpDTzF_Xs6rg","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-05-30 14:29:03.774 +08:00 [DBG] VHwV9SWfzW/EQXuBTL6MQ//T5xXc1u82LMCGIn0Ko/U= found in database: true
2019-05-30 14:29:03.778 +08:00 [DBG] Consent found in consent store is same as current request, consent is not required
2019-05-30 14:29:03.778 +08:00 [DBG] Creating Implicit Flow response.
2019-05-30 14:29:03.778 +08:00 [DBG] Getting claims for identity token for subject: af61726e-716b-4170-8c26-6568bf294215 and client: mvcImp
2019-05-30 14:29:03.778 +08:00 [DBG] Claim types from profile service that were filtered: ["sub"]
2019-05-30 14:29:03.782 +08:00 [INF] {"ClientId":"mvcImp","ClientName":"MVC ClientImp","RedirectUri":"http://localhost:5004/signin-oidc","Endpoint":"Authorize","SubjectId":"af61726e-716b-4170-8c26-6568bf294215","Scopes":"openid profile","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****yYbA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN4OR9HC3HA:00000008","TimeStamp":"2019-05-30T06:29:03.0000000Z","ProcessId":12892,"LocalIpAddress":"127.0.0.1:16657","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-30 14:29:03.783 +08:00 [INF] Authorize endpoint response
{"SubjectId":"af61726e-716b-4170-8c26-6568bf294215","ClientId":"mvcImp","RedirectUri":"http://localhost:5004/signin-oidc","State":"CfDJ8J6dQdEYr6RAjUqFr50zuTsq5DPPBimqB3rSSD_w3K2MqK0todkGFSyrUFZwJoUcdkmawJ4H-9bUu9WIoavhZdqq1XMz865PmkQMvpeFr3KbFidQe1sY_HqJkAwRAYSvV0Nac92tL6wW8iBGciQ0nKF71dcoAR87x4UnygnTCI-F8o_Kyt2syDlTgHIDkARahOsNOD7HSCIj_oxLL571UuHWeuRpzpp8CgxfLFSx6d_UeAwsAP2Lrg1xum5G2K7JVyrSC2FQmjbbpvRPqZUE7DrE9VdX104HpjCztpJZyfaLpgOCcLcN0ZKpDTzF_Xs6rg","Scope":"openid profile","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-05-30 14:29:03.792 +08:00 [DBG] Augmenting SignInContext
2019-05-30 14:29:03.792 +08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-05-30 14:29:27.565 +08:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-05-30 14:29:27.566 +08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-05-30 14:29:27.566 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-05-30 14:29:27.566 +08:00 [DBG] Start authorize request
2019-05-30 14:29:27.567 +08:00 [DBG] User in authorize request: af61726e-716b-4170-8c26-6568bf294215
2019-05-30 14:29:27.567 +08:00 [DBG] Start authorize request protocol validation
2019-05-30 14:29:28.598 +08:00 [DBG] mvcImp found in database: true
2019-05-30 14:29:28.598 +08:00 [DBG] client configuration validation for client mvcImp succeeded.
2019-05-30 14:29:28.795 +08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-05-30 14:29:28.904 +08:00 [DBG] Found [] API scopes in database
2019-05-30 14:29:29.081 +08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-05-30 14:29:29.191 +08:00 [DBG] Found [] API scopes in database
2019-05-30 14:29:29.192 +08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-30 14:29:29.192 +08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"mvcImp","ClientName":"MVC ClientImp","RedirectUri":"http://localhost:5004/signin-oidc","AllowedRedirectUris":["http://localhost:5004/signin-oidc"],"SubjectId":"af61726e-716b-4170-8c26-6568bf294215","ResponseType":"id_token","ResponseMode":"form_post","GrantType":"implicit","RequestedScopes":"openid profile","State":"CfDJ8J6dQdEYr6RAjUqFr50zuTuwLRvhQ4gZhQiDI9aCGyVV0OsnI1oE0qiu7lu0dh9fT-85a0DdbYgJFvMDtizpRoKdwdDfu6ICk-lKea0u39McjFzlgtSQ4YQiXC_SVBoOEx6ZBba3rvKj42JSmZEdqqef2Lo4-Vj92v1BMUDH0eNXsIvVMrqmSUvxc8WIIBj6lJncHEyU546SohThYNii4bEj2fqQCXfurkNA3bSdFnfx-_GWoZua1y3YxLpiPpAZC8U7aSEy-KuTJKcKFeshBV7xJ7Jk7Bhs8XIyAXJiMM-qe14CiTcO01fQRtEXlkBRYA","UiLocales":null,"Nonce":"636947945675511145.YWQ2YmZmZDAtYWViYi00YjNjLWE2MTItMjc1MDkwNTFlNTcyMGE0YTNkMTktYjBjZC00YTIwLTk2NTYtNTJlMDVmOGQ0ZTZl","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"d2cc5d1c1ed7eea8580a1fc3647d93b5","Raw":{"client_id":"mvcImp","redirect_uri":"http://localhost:5004/signin-oidc","response_type":"id_token","scope":"openid profile","response_mode":"form_post","nonce":"636947945675511145.YWQ2YmZmZDAtYWViYi00YjNjLWE2MTItMjc1MDkwNTFlNTcyMGE0YTNkMTktYjBjZC00YTIwLTk2NTYtNTJlMDVmOGQ0ZTZl","state":"CfDJ8J6dQdEYr6RAjUqFr50zuTuwLRvhQ4gZhQiDI9aCGyVV0OsnI1oE0qiu7lu0dh9fT-85a0DdbYgJFvMDtizpRoKdwdDfu6ICk-lKea0u39McjFzlgtSQ4YQiXC_SVBoOEx6ZBba3rvKj42JSmZEdqqef2Lo4-Vj92v1BMUDH0eNXsIvVMrqmSUvxc8WIIBj6lJncHEyU546SohThYNii4bEj2fqQCXfurkNA3bSdFnfx-_GWoZua1y3YxLpiPpAZC8U7aSEy-KuTJKcKFeshBV7xJ7Jk7Bhs8XIyAXJiMM-qe14CiTcO01fQRtEXlkBRYA","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-05-30 14:29:29.412 +08:00 [DBG] VHwV9SWfzW/EQXuBTL6MQ//T5xXc1u82LMCGIn0Ko/U= found in database: true
2019-05-30 14:29:29.415 +08:00 [DBG] Consent found in consent store is same as current request, consent is not required
2019-05-30 14:29:29.416 +08:00 [DBG] Creating Implicit Flow response.
2019-05-30 14:29:29.416 +08:00 [DBG] Getting claims for identity token for subject: af61726e-716b-4170-8c26-6568bf294215 and client: mvcImp
2019-05-30 14:29:29.416 +08:00 [DBG] Claim types from profile service that were filtered: ["sub"]
2019-05-30 14:29:29.419 +08:00 [INF] {"ClientId":"mvcImp","ClientName":"MVC ClientImp","RedirectUri":"http://localhost:5004/signin-oidc","Endpoint":"Authorize","SubjectId":"af61726e-716b-4170-8c26-6568bf294215","Scopes":"openid profile","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****5b4w","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN4OR9HC3HA:00000009","TimeStamp":"2019-05-30T06:29:29.0000000Z","ProcessId":12892,"LocalIpAddress":"127.0.0.1:16657","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-30 14:29:29.419 +08:00 [INF] Authorize endpoint response
{"SubjectId":"af61726e-716b-4170-8c26-6568bf294215","ClientId":"mvcImp","RedirectUri":"http://localhost:5004/signin-oidc","State":"CfDJ8J6dQdEYr6RAjUqFr50zuTuwLRvhQ4gZhQiDI9aCGyVV0OsnI1oE0qiu7lu0dh9fT-85a0DdbYgJFvMDtizpRoKdwdDfu6ICk-lKea0u39McjFzlgtSQ4YQiXC_SVBoOEx6ZBba3rvKj42JSmZEdqqef2Lo4-Vj92v1BMUDH0eNXsIvVMrqmSUvxc8WIIBj6lJncHEyU546SohThYNii4bEj2fqQCXfurkNA3bSdFnfx-_GWoZua1y3YxLpiPpAZC8U7aSEy-KuTJKcKFeshBV7xJ7Jk7Bhs8XIyAXJiMM-qe14CiTcO01fQRtEXlkBRYA","Scope":"openid profile","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-05-30 14:29:29.426 +08:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-05-30 14:29:29.426 +08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-05-30 14:29:29.427 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-05-30 14:29:29.427 +08:00 [DBG] Start authorize request
2019-05-30 14:29:29.427 +08:00 [DBG] User in authorize request: af61726e-716b-4170-8c26-6568bf294215
2019-05-30 14:29:29.427 +08:00 [DBG] Start authorize request protocol validation
2019-05-30 14:29:30.456 +08:00 [DBG] mvcImp found in database: true
2019-05-30 14:29:30.456 +08:00 [DBG] client configuration validation for client mvcImp succeeded.
2019-05-30 14:29:30.645 +08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-05-30 14:29:30.755 +08:00 [DBG] Found [] API scopes in database
2019-05-30 14:29:30.932 +08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-05-30 14:29:31.031 +08:00 [DBG] Found [] API scopes in database
2019-05-30 14:29:31.031 +08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-30 14:29:31.032 +08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"mvcImp","ClientName":"MVC ClientImp","RedirectUri":"http://localhost:5004/signin-oidc","AllowedRedirectUris":["http://localhost:5004/signin-oidc"],"SubjectId":"af61726e-716b-4170-8c26-6568bf294215","ResponseType":"id_token","ResponseMode":"form_post","GrantType":"implicit","RequestedScopes":"openid profile","State":"CfDJ8J6dQdEYr6RAjUqFr50zuTuwLRvhQ4gZhQiDI9aCGyVV0OsnI1oE0qiu7lu0dh9fT-85a0DdbYgJFvMDtizpRoKdwdDfu6ICk-lKea0u39McjFzlgtSQ4YQiXC_SVBoOEx6ZBba3rvKj42JSmZEdqqef2Lo4-Vj92v1BMUDH0eNXsIvVMrqmSUvxc8WIIBj6lJncHEyU546SohThYNii4bEj2fqQCXfurkNA3bSdFnfx-_GWoZua1y3YxLpiPpAZC8U7aSEy-KuTJKcKFeshBV7xJ7Jk7Bhs8XIyAXJiMM-qe14CiTcO01fQRtEXlkBRYA","UiLocales":null,"Nonce":"636947945675511145.YWQ2YmZmZDAtYWViYi00YjNjLWE2MTItMjc1MDkwNTFlNTcyMGE0YTNkMTktYjBjZC00YTIwLTk2NTYtNTJlMDVmOGQ0ZTZl","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"d2cc5d1c1ed7eea8580a1fc3647d93b5","Raw":{"client_id":"mvcImp","redirect_uri":"http://localhost:5004/signin-oidc","response_type":"id_token","scope":"openid profile","response_mode":"form_post","nonce":"636947945675511145.YWQ2YmZmZDAtYWViYi00YjNjLWE2MTItMjc1MDkwNTFlNTcyMGE0YTNkMTktYjBjZC00YTIwLTk2NTYtNTJlMDVmOGQ0ZTZl","state":"CfDJ8J6dQdEYr6RAjUqFr50zuTuwLRvhQ4gZhQiDI9aCGyVV0OsnI1oE0qiu7lu0dh9fT-85a0DdbYgJFvMDtizpRoKdwdDfu6ICk-lKea0u39McjFzlgtSQ4YQiXC_SVBoOEx6ZBba3rvKj42JSmZEdqqef2Lo4-Vj92v1BMUDH0eNXsIvVMrqmSUvxc8WIIBj6lJncHEyU546SohThYNii4bEj2fqQCXfurkNA3bSdFnfx-_GWoZua1y3YxLpiPpAZC8U7aSEy-KuTJKcKFeshBV7xJ7Jk7Bhs8XIyAXJiMM-qe14CiTcO01fQRtEXlkBRYA","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-05-30 14:29:31.240 +08:00 [DBG] VHwV9SWfzW/EQXuBTL6MQ//T5xXc1u82LMCGIn0Ko/U= found in database: true
2019-05-30 14:29:31.243 +08:00 [DBG] Consent found in consent store is same as current request, consent is not required
2019-05-30 14:29:31.243 +08:00 [DBG] Creating Implicit Flow response.
2019-05-30 14:29:31.244 +08:00 [DBG] Getting claims for identity token for subject: af61726e-716b-4170-8c26-6568bf294215 and client: mvcImp
2019-05-30 14:29:31.244 +08:00 [DBG] Claim types from profile service that were filtered: ["sub"]
2019-05-30 14:29:31.247 +08:00 [INF] {"ClientId":"mvcImp","ClientName":"MVC ClientImp","RedirectUri":"http://localhost:5004/signin-oidc","Endpoint":"Authorize","SubjectId":"af61726e-716b-4170-8c26-6568bf294215","Scopes":"openid profile","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****uASg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN4OR9HC3HA:0000000A","TimeStamp":"2019-05-30T06:29:31.0000000Z","ProcessId":12892,"LocalIpAddress":"127.0.0.1:16657","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-30 14:29:31.247 +08:00 [INF] Authorize endpoint response
{"SubjectId":"af61726e-716b-4170-8c26-6568bf294215","ClientId":"mvcImp","RedirectUri":"http://localhost:5004/signin-oidc","State":"CfDJ8J6dQdEYr6RAjUqFr50zuTuwLRvhQ4gZhQiDI9aCGyVV0OsnI1oE0qiu7lu0dh9fT-85a0DdbYgJFvMDtizpRoKdwdDfu6ICk-lKea0u39McjFzlgtSQ4YQiXC_SVBoOEx6ZBba3rvKj42JSmZEdqqef2Lo4-Vj92v1BMUDH0eNXsIvVMrqmSUvxc8WIIBj6lJncHEyU546SohThYNii4bEj2fqQCXfurkNA3bSdFnfx-_GWoZua1y3YxLpiPpAZC8U7aSEy-KuTJKcKFeshBV7xJ7Jk7Bhs8XIyAXJiMM-qe14CiTcO01fQRtEXlkBRYA","Scope":"openid profile","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-05-30 14:37:05.720 +08:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-05-30 14:37:05.748 +08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-05-30 14:37:05.748 +08:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-05-30 14:37:05.748 +08:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-05-30 14:37:05.748 +08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-05-30 14:37:05.748 +08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-05-30 14:37:06.159 +08:00 [DBG] Starting grant removal
2019-05-30 14:37:06.488 +08:00 [DBG] Login Url: /Account/Login
2019-05-30 14:37:06.490 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-05-30 14:37:06.490 +08:00 [DBG] Logout Url: /Account/Logout
2019-05-30 14:37:06.490 +08:00 [DBG] ConsentUrl Url: /consent
2019-05-30 14:37:06.490 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2019-05-30 14:37:06.490 +08:00 [DBG] Error Url: /home/error
2019-05-30 14:37:06.490 +08:00 [DBG] Error Id Parameter: errorId
2019-05-30 14:37:33.873 +08:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-05-30 14:37:33.884 +08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-05-30 14:37:33.884 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-05-30 14:37:33.889 +08:00 [DBG] Start authorize request
2019-05-30 14:37:33.903 +08:00 [DBG] User in authorize request: af61726e-716b-4170-8c26-6568bf294215
2019-05-30 14:37:33.921 +08:00 [DBG] Start authorize request protocol validation
2019-05-30 14:37:35.693 +08:00 [DBG] mvcImp found in database: true
2019-05-30 14:37:35.706 +08:00 [DBG] client configuration validation for client mvcImp succeeded.
2019-05-30 14:37:35.949 +08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-05-30 14:37:36.197 +08:00 [DBG] Found [] API scopes in database
2019-05-30 14:37:36.411 +08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-05-30 14:37:36.531 +08:00 [DBG] Found [] API scopes in database
2019-05-30 14:37:36.539 +08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-30 14:37:36.553 +08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"mvcImp","ClientName":"MVC ClientImp","RedirectUri":"http://localhost:5004/signin-oidc","AllowedRedirectUris":["http://localhost:5004/signin-oidc"],"SubjectId":"af61726e-716b-4170-8c26-6568bf294215","ResponseType":"id_token","ResponseMode":"form_post","GrantType":"implicit","RequestedScopes":"openid profile","State":"CfDJ8J6dQdEYr6RAjUqFr50zuTva3QHSGN3FdhNI0rpWq4Z25IA6aB0kp-G6iwh1CXcjCXSFUHuEqM_cAytgHjk8ho5Pcjehvlxkclqs4NxcGRbPRA_n6EvfEc7mI9yeFV4JBStiKG2M4BKjPrR2wsGvWRaCACZCJUPK9Z8LcY0giRYimUkuq5aIOenBkr6hzdJdJW_ZbW-fx8gyLUaMmU9V3OAJeIIK7yUzGysZrErNcFM5Ii9iyZDwG0a972VN0Tjzmd119p2WvHy3xztJz6NA0_1tXTb4_7gPlUi14W_v1Mum-dZ9-JpYGSoaEKrUhGeFTw","UiLocales":null,"Nonce":"636947950538360158.OTU5Y2Y5ODktNmEwZS00MjMyLWFhZjItMWIxYTE5NmM3NTcyMWExNDQzMWEtYzgyNS00MmRmLThmMGMtNzhjMDIyYTE1ODQy","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"d2cc5d1c1ed7eea8580a1fc3647d93b5","Raw":{"client_id":"mvcImp","redirect_uri":"http://localhost:5004/signin-oidc","response_type":"id_token","scope":"openid profile","response_mode":"form_post","nonce":"636947950538360158.OTU5Y2Y5ODktNmEwZS00MjMyLWFhZjItMWIxYTE5NmM3NTcyMWExNDQzMWEtYzgyNS00MmRmLThmMGMtNzhjMDIyYTE1ODQy","state":"CfDJ8J6dQdEYr6RAjUqFr50zuTva3QHSGN3FdhNI0rpWq4Z25IA6aB0kp-G6iwh1CXcjCXSFUHuEqM_cAytgHjk8ho5Pcjehvlxkclqs4NxcGRbPRA_n6EvfEc7mI9yeFV4JBStiKG2M4BKjPrR2wsGvWRaCACZCJUPK9Z8LcY0giRYimUkuq5aIOenBkr6hzdJdJW_ZbW-fx8gyLUaMmU9V3OAJeIIK7yUzGysZrErNcFM5Ii9iyZDwG0a972VN0Tjzmd119p2WvHy3xztJz6NA0_1tXTb4_7gPlUi14W_v1Mum-dZ9-JpYGSoaEKrUhGeFTw","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-05-30 14:37:36.959 +08:00 [DBG] VHwV9SWfzW/EQXuBTL6MQ//T5xXc1u82LMCGIn0Ko/U= found in database: true
2019-05-30 14:37:36.965 +08:00 [DBG] Consent found in consent store is same as current request, consent is not required
2019-05-30 14:37:36.973 +08:00 [DBG] Creating Implicit Flow response.
2019-05-30 14:37:36.982 +08:00 [DBG] Getting claims for identity token for subject: af61726e-716b-4170-8c26-6568bf294215 and client: mvcImp
2019-05-30 14:37:36.989 +08:00 [DBG] Claim types from profile service that were filtered: ["sub"]
2019-05-30 14:37:37.108 +08:00 [INF] {"ClientId":"mvcImp","ClientName":"MVC ClientImp","RedirectUri":"http://localhost:5004/signin-oidc","Endpoint":"Authorize","SubjectId":"af61726e-716b-4170-8c26-6568bf294215","Scopes":"openid profile","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****vlvg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN4P4TTNVMC:00000002","TimeStamp":"2019-05-30T06:37:37.0000000Z","ProcessId":13224,"LocalIpAddress":"127.0.0.1:45618","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-30 14:37:37.111 +08:00 [INF] Authorize endpoint response
{"SubjectId":"af61726e-716b-4170-8c26-6568bf294215","ClientId":"mvcImp","RedirectUri":"http://localhost:5004/signin-oidc","State":"CfDJ8J6dQdEYr6RAjUqFr50zuTva3QHSGN3FdhNI0rpWq4Z25IA6aB0kp-G6iwh1CXcjCXSFUHuEqM_cAytgHjk8ho5Pcjehvlxkclqs4NxcGRbPRA_n6EvfEc7mI9yeFV4JBStiKG2M4BKjPrR2wsGvWRaCACZCJUPK9Z8LcY0giRYimUkuq5aIOenBkr6hzdJdJW_ZbW-fx8gyLUaMmU9V3OAJeIIK7yUzGysZrErNcFM5Ii9iyZDwG0a972VN0Tjzmd119p2WvHy3xztJz6NA0_1tXTb4_7gPlUi14W_v1Mum-dZ9-JpYGSoaEKrUhGeFTw","Scope":"openid profile","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-05-30 14:37:38.128 +08:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-05-30 14:37:38.128 +08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-05-30 14:37:38.129 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-05-30 14:37:38.129 +08:00 [DBG] Start authorize request
2019-05-30 14:37:38.129 +08:00 [DBG] User in authorize request: af61726e-716b-4170-8c26-6568bf294215
2019-05-30 14:37:38.129 +08:00 [DBG] Start authorize request protocol validation
2019-05-30 14:37:39.159 +08:00 [DBG] mvcImp found in database: true
2019-05-30 14:37:39.159 +08:00 [DBG] client configuration validation for client mvcImp succeeded.
2019-05-30 14:37:39.384 +08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-05-30 14:37:39.486 +08:00 [DBG] Found [] API scopes in database
2019-05-30 14:37:39.669 +08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-05-30 14:37:39.781 +08:00 [DBG] Found [] API scopes in database
2019-05-30 14:37:39.781 +08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-30 14:37:39.781 +08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"mvcImp","ClientName":"MVC ClientImp","RedirectUri":"http://localhost:5004/signin-oidc","AllowedRedirectUris":["http://localhost:5004/signin-oidc"],"SubjectId":"af61726e-716b-4170-8c26-6568bf294215","ResponseType":"id_token","ResponseMode":"form_post","GrantType":"implicit","RequestedScopes":"openid profile","State":"CfDJ8J6dQdEYr6RAjUqFr50zuTu5ibZRWMVdwCJZL3lpSnJZ9JEtHVjgXXAnqsJGsOmuaxEIbMrr4sECEUNAC3x3irbkf-y3XghiGRxgNmXIHSJUxtlkHZ3zO9IkgyhARjczaWDXzlTbcCSQfD1KgvRmzMeLx6mc4px2I7lj7uvlfCo_QaNB1mtK42guBv97mpXXqRWYwsAp-jG7h8mljMlv6ASR3YqAKHZWvbRbmt_pteJZcbh8NDiJp6n0CTA8kP_WMCZy9OiIAz26OczZFRQ5rZK2qcCcm5N26-ouTejWHWvs-qllkgbb9_ffa5HxiyVtS8Dg_3w1TWSD5buzby60dNA","UiLocales":null,"Nonce":"636947950580917966.ZTYwOTUyYzItNWY4MS00YjljLWFjYmUtOTUyZDUyMjc5ODgwNDU3MTkzZmEtMTJmOS00MGFhLWEzZjUtNDBmNTkwOTVkNDNk","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"d2cc5d1c1ed7eea8580a1fc3647d93b5","Raw":{"client_id":"mvcImp","redirect_uri":"http://localhost:5004/signin-oidc","response_type":"id_token","scope":"openid profile","response_mode":"form_post","nonce":"636947950580917966.ZTYwOTUyYzItNWY4MS00YjljLWFjYmUtOTUyZDUyMjc5ODgwNDU3MTkzZmEtMTJmOS00MGFhLWEzZjUtNDBmNTkwOTVkNDNk","state":"CfDJ8J6dQdEYr6RAjUqFr50zuTu5ibZRWMVdwCJZL3lpSnJZ9JEtHVjgXXAnqsJGsOmuaxEIbMrr4sECEUNAC3x3irbkf-y3XghiGRxgNmXIHSJUxtlkHZ3zO9IkgyhARjczaWDXzlTbcCSQfD1KgvRmzMeLx6mc4px2I7lj7uvlfCo_QaNB1mtK42guBv97mpXXqRWYwsAp-jG7h8mljMlv6ASR3YqAKHZWvbRbmt_pteJZcbh8NDiJp6n0CTA8kP_WMCZy9OiIAz26OczZFRQ5rZK2qcCcm5N26-ouTejWHWvs-qllkgbb9_ffa5HxiyVtS8Dg_3w1TWSD5buzby60dNA","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-05-30 14:37:40.019 +08:00 [DBG] VHwV9SWfzW/EQXuBTL6MQ//T5xXc1u82LMCGIn0Ko/U= found in database: true
2019-05-30 14:37:40.022 +08:00 [DBG] Consent found in consent store is same as current request, consent is not required
2019-05-30 14:37:40.022 +08:00 [DBG] Creating Implicit Flow response.
2019-05-30 14:37:40.022 +08:00 [DBG] Getting claims for identity token for subject: af61726e-716b-4170-8c26-6568bf294215 and client: mvcImp
2019-05-30 14:37:40.023 +08:00 [DBG] Claim types from profile service that were filtered: ["sub"]
2019-05-30 14:37:40.026 +08:00 [INF] {"ClientId":"mvcImp","ClientName":"MVC ClientImp","RedirectUri":"http://localhost:5004/signin-oidc","Endpoint":"Authorize","SubjectId":"af61726e-716b-4170-8c26-6568bf294215","Scopes":"openid profile","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****6Uzw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN4P4TTNVMB:00000002","TimeStamp":"2019-05-30T06:37:40.0000000Z","ProcessId":13224,"LocalIpAddress":"127.0.0.1:45618","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-30 14:37:40.026 +08:00 [INF] Authorize endpoint response
{"SubjectId":"af61726e-716b-4170-8c26-6568bf294215","ClientId":"mvcImp","RedirectUri":"http://localhost:5004/signin-oidc","State":"CfDJ8J6dQdEYr6RAjUqFr50zuTu5ibZRWMVdwCJZL3lpSnJZ9JEtHVjgXXAnqsJGsOmuaxEIbMrr4sECEUNAC3x3irbkf-y3XghiGRxgNmXIHSJUxtlkHZ3zO9IkgyhARjczaWDXzlTbcCSQfD1KgvRmzMeLx6mc4px2I7lj7uvlfCo_QaNB1mtK42guBv97mpXXqRWYwsAp-jG7h8mljMlv6ASR3YqAKHZWvbRbmt_pteJZcbh8NDiJp6n0CTA8kP_WMCZy9OiIAz26OczZFRQ5rZK2qcCcm5N26-ouTejWHWvs-qllkgbb9_ffa5HxiyVtS8Dg_3w1TWSD5buzby60dNA","Scope":"openid profile","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-05-30 14:39:34.098 +08:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-05-30 14:39:34.098 +08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-05-30 14:39:34.098 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-05-30 14:39:34.098 +08:00 [DBG] Start authorize request
2019-05-30 14:39:34.098 +08:00 [DBG] User in authorize request: af61726e-716b-4170-8c26-6568bf294215
2019-05-30 14:39:34.099 +08:00 [DBG] Start authorize request protocol validation
2019-05-30 14:39:35.132 +08:00 [DBG] mvcImp found in database: true
2019-05-30 14:39:35.132 +08:00 [DBG] client configuration validation for client mvcImp succeeded.
2019-05-30 14:39:35.324 +08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-05-30 14:39:35.425 +08:00 [DBG] Found [] API scopes in database
2019-05-30 14:39:35.609 +08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-05-30 14:39:35.722 +08:00 [DBG] Found [] API scopes in database
2019-05-30 14:39:35.722 +08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-30 14:39:35.723 +08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"mvcImp","ClientName":"MVC ClientImp","RedirectUri":"http://localhost:5004/signin-oidc","AllowedRedirectUris":["http://localhost:5004/signin-oidc"],"SubjectId":"af61726e-716b-4170-8c26-6568bf294215","ResponseType":"id_token","ResponseMode":"form_post","GrantType":"implicit","RequestedScopes":"openid profile","State":"CfDJ8J6dQdEYr6RAjUqFr50zuTva3QHSGN3FdhNI0rpWq4Z25IA6aB0kp-G6iwh1CXcjCXSFUHuEqM_cAytgHjk8ho5Pcjehvlxkclqs4NxcGRbPRA_n6EvfEc7mI9yeFV4JBStiKG2M4BKjPrR2wsGvWRaCACZCJUPK9Z8LcY0giRYimUkuq5aIOenBkr6hzdJdJW_ZbW-fx8gyLUaMmU9V3OAJeIIK7yUzGysZrErNcFM5Ii9iyZDwG0a972VN0Tjzmd119p2WvHy3xztJz6NA0_1tXTb4_7gPlUi14W_v1Mum-dZ9-JpYGSoaEKrUhGeFTw","UiLocales":null,"Nonce":"636947950538360158.OTU5Y2Y5ODktNmEwZS00MjMyLWFhZjItMWIxYTE5NmM3NTcyMWExNDQzMWEtYzgyNS00MmRmLThmMGMtNzhjMDIyYTE1ODQy","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"d2cc5d1c1ed7eea8580a1fc3647d93b5","Raw":{"client_id":"mvcImp","redirect_uri":"http://localhost:5004/signin-oidc","response_type":"id_token","scope":"openid profile","response_mode":"form_post","nonce":"636947950538360158.OTU5Y2Y5ODktNmEwZS00MjMyLWFhZjItMWIxYTE5NmM3NTcyMWExNDQzMWEtYzgyNS00MmRmLThmMGMtNzhjMDIyYTE1ODQy","state":"CfDJ8J6dQdEYr6RAjUqFr50zuTva3QHSGN3FdhNI0rpWq4Z25IA6aB0kp-G6iwh1CXcjCXSFUHuEqM_cAytgHjk8ho5Pcjehvlxkclqs4NxcGRbPRA_n6EvfEc7mI9yeFV4JBStiKG2M4BKjPrR2wsGvWRaCACZCJUPK9Z8LcY0giRYimUkuq5aIOenBkr6hzdJdJW_ZbW-fx8gyLUaMmU9V3OAJeIIK7yUzGysZrErNcFM5Ii9iyZDwG0a972VN0Tjzmd119p2WvHy3xztJz6NA0_1tXTb4_7gPlUi14W_v1Mum-dZ9-JpYGSoaEKrUhGeFTw","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-05-30 14:39:38.925 +08:00 [DBG] VHwV9SWfzW/EQXuBTL6MQ//T5xXc1u82LMCGIn0Ko/U= found in database: true
2019-05-30 14:39:38.929 +08:00 [DBG] Consent found in consent store is same as current request, consent is not required
2019-05-30 14:39:38.929 +08:00 [DBG] Creating Implicit Flow response.
2019-05-30 14:39:38.929 +08:00 [DBG] Getting claims for identity token for subject: af61726e-716b-4170-8c26-6568bf294215 and client: mvcImp
2019-05-30 14:40:13.210 +08:00 [DBG] Claim types from profile service that were filtered: ["sub"]
2019-05-30 14:40:28.936 +08:00 [INF] {"ClientId":"mvcImp","ClientName":"MVC ClientImp","RedirectUri":"http://localhost:5004/signin-oidc","Endpoint":"Authorize","SubjectId":"af61726e-716b-4170-8c26-6568bf294215","Scopes":"openid profile","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****NUlA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN4P4TTNVMD:00000001","TimeStamp":"2019-05-30T06:40:28.0000000Z","ProcessId":13224,"LocalIpAddress":"127.0.0.1:45618","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-30 14:40:31.008 +08:00 [INF] Authorize endpoint response
{"SubjectId":"af61726e-716b-4170-8c26-6568bf294215","ClientId":"mvcImp","RedirectUri":"http://localhost:5004/signin-oidc","State":"CfDJ8J6dQdEYr6RAjUqFr50zuTva3QHSGN3FdhNI0rpWq4Z25IA6aB0kp-G6iwh1CXcjCXSFUHuEqM_cAytgHjk8ho5Pcjehvlxkclqs4NxcGRbPRA_n6EvfEc7mI9yeFV4JBStiKG2M4BKjPrR2wsGvWRaCACZCJUPK9Z8LcY0giRYimUkuq5aIOenBkr6hzdJdJW_ZbW-fx8gyLUaMmU9V3OAJeIIK7yUzGysZrErNcFM5Ii9iyZDwG0a972VN0Tjzmd119p2WvHy3xztJz6NA0_1tXTb4_7gPlUi14W_v1Mum-dZ9-JpYGSoaEKrUhGeFTw","Scope":"openid profile","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-05-30 14:42:19.108 +08:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-05-30 14:42:19.109 +08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-05-30 14:42:19.109 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-05-30 14:42:19.109 +08:00 [DBG] Start authorize request
2019-05-30 14:42:19.109 +08:00 [DBG] User in authorize request: af61726e-716b-4170-8c26-6568bf294215
2019-05-30 14:42:19.109 +08:00 [DBG] Start authorize request protocol validation
2019-05-30 14:42:20.229 +08:00 [DBG] mvcImp found in database: true
2019-05-30 14:42:20.229 +08:00 [DBG] client configuration validation for client mvcImp succeeded.
2019-05-30 14:42:20.431 +08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-05-30 14:42:20.533 +08:00 [DBG] Found [] API scopes in database
2019-05-30 14:42:20.726 +08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-05-30 14:42:20.851 +08:00 [DBG] Found [] API scopes in database
2019-05-30 14:42:20.851 +08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-30 14:42:20.851 +08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"mvcImp","ClientName":"MVC ClientImp","RedirectUri":"http://localhost:5004/signin-oidc","AllowedRedirectUris":["http://localhost:5004/signin-oidc"],"SubjectId":"af61726e-716b-4170-8c26-6568bf294215","ResponseType":"id_token","ResponseMode":"form_post","GrantType":"implicit","RequestedScopes":"openid profile","State":"CfDJ8J6dQdEYr6RAjUqFr50zuTu6ZWsXX4ot69AxARuuRxwN-VTARknYjkz4V1nwje5z1rilZ-UUYiduKt4ukgZE8wB2fB1bGabWrnp05Eo1Hn0CDbCmFJk4Iry0-DonPoSICpY-OLOBvb7OfGSYsFNKJvARbz6_FIqh5lM_D3-0qEZqmmspgZgGTvDV18AfP7xZeHSlz5OC3sRj9pM3FMo-yoFlaeHROnPZ48LKa4AWPeALqC30PCzvh-mGPeMZcbuUB7M1TT4ThDlzOgO3crumClXo5304fm2Ne_pMG3gVyBseh6GDcteoCraM2wYTX5lQOQ","UiLocales":null,"Nonce":"636947953390894630.NjliODM5YjItZjU5YS00MmQxLWEzNmQtZWFlMDEwYzE3OGJmNmY2YjgzMGUtOWRmNS00ZGZlLWFlM2UtODJjMDE4NTQ5YWJi","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"d2cc5d1c1ed7eea8580a1fc3647d93b5","Raw":{"client_id":"mvcImp","redirect_uri":"http://localhost:5004/signin-oidc","response_type":"id_token","scope":"openid profile","response_mode":"form_post","nonce":"636947953390894630.NjliODM5YjItZjU5YS00MmQxLWEzNmQtZWFlMDEwYzE3OGJmNmY2YjgzMGUtOWRmNS00ZGZlLWFlM2UtODJjMDE4NTQ5YWJi","state":"CfDJ8J6dQdEYr6RAjUqFr50zuTu6ZWsXX4ot69AxARuuRxwN-VTARknYjkz4V1nwje5z1rilZ-UUYiduKt4ukgZE8wB2fB1bGabWrnp05Eo1Hn0CDbCmFJk4Iry0-DonPoSICpY-OLOBvb7OfGSYsFNKJvARbz6_FIqh5lM_D3-0qEZqmmspgZgGTvDV18AfP7xZeHSlz5OC3sRj9pM3FMo-yoFlaeHROnPZ48LKa4AWPeALqC30PCzvh-mGPeMZcbuUB7M1TT4ThDlzOgO3crumClXo5304fm2Ne_pMG3gVyBseh6GDcteoCraM2wYTX5lQOQ","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-05-30 14:42:22.746 +08:00 [DBG] VHwV9SWfzW/EQXuBTL6MQ//T5xXc1u82LMCGIn0Ko/U= found in database: true
2019-05-30 14:42:22.750 +08:00 [DBG] Consent found in consent store is same as current request, consent is not required
2019-05-30 14:42:22.751 +08:00 [DBG] Creating Implicit Flow response.
2019-05-30 14:42:22.751 +08:00 [DBG] Getting claims for identity token for subject: af61726e-716b-4170-8c26-6568bf294215 and client: mvcImp
2019-05-30 14:42:24.546 +08:00 [DBG] Claim types from profile service that were filtered: ["sub"]
2019-05-30 14:42:24.550 +08:00 [INF] {"ClientId":"mvcImp","ClientName":"MVC ClientImp","RedirectUri":"http://localhost:5004/signin-oidc","Endpoint":"Authorize","SubjectId":"af61726e-716b-4170-8c26-6568bf294215","Scopes":"openid profile","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****DlJQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN4P4TTNVMD:00000002","TimeStamp":"2019-05-30T06:42:24.0000000Z","ProcessId":13224,"LocalIpAddress":"127.0.0.1:45618","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-30 14:42:24.550 +08:00 [INF] Authorize endpoint response
{"SubjectId":"af61726e-716b-4170-8c26-6568bf294215","ClientId":"mvcImp","RedirectUri":"http://localhost:5004/signin-oidc","State":"CfDJ8J6dQdEYr6RAjUqFr50zuTu6ZWsXX4ot69AxARuuRxwN-VTARknYjkz4V1nwje5z1rilZ-UUYiduKt4ukgZE8wB2fB1bGabWrnp05Eo1Hn0CDbCmFJk4Iry0-DonPoSICpY-OLOBvb7OfGSYsFNKJvARbz6_FIqh5lM_D3-0qEZqmmspgZgGTvDV18AfP7xZeHSlz5OC3sRj9pM3FMo-yoFlaeHROnPZ48LKa4AWPeALqC30PCzvh-mGPeMZcbuUB7M1TT4ThDlzOgO3crumClXo5304fm2Ne_pMG3gVyBseh6GDcteoCraM2wYTX5lQOQ","Scope":"openid profile","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-05-30 14:42:30.483 +08:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-05-30 14:42:30.484 +08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-05-30 14:42:30.488 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-05-30 14:42:30.488 +08:00 [DBG] Start authorize request
2019-05-30 14:42:30.489 +08:00 [DBG] User in authorize request: af61726e-716b-4170-8c26-6568bf294215
2019-05-30 14:42:30.489 +08:00 [DBG] Start authorize request protocol validation
2019-05-30 14:42:31.649 +08:00 [DBG] mvcImp found in database: true
2019-05-30 14:42:31.650 +08:00 [DBG] client configuration validation for client mvcImp succeeded.
2019-05-30 14:42:31.869 +08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-05-30 14:42:31.981 +08:00 [DBG] Found [] API scopes in database
2019-05-30 14:42:32.177 +08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-05-30 14:42:32.307 +08:00 [DBG] Found [] API scopes in database
2019-05-30 14:42:32.308 +08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-30 14:42:32.308 +08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"mvcImp","ClientName":"MVC ClientImp","RedirectUri":"http://localhost:5004/signin-oidc","AllowedRedirectUris":["http://localhost:5004/signin-oidc"],"SubjectId":"af61726e-716b-4170-8c26-6568bf294215","ResponseType":"id_token","ResponseMode":"form_post","GrantType":"implicit","RequestedScopes":"openid profile","State":"CfDJ8J6dQdEYr6RAjUqFr50zuTtg_72n9_5MR0uxM60Y9cMl4tXb8kvLa1ffHIe4Yd3ETSuvk2Jt-DOwFiiNRQFVIFYDPeIwo4NdDbR3WFGZiGmywXMWAL5P6s9fmxZRvIGqgXiMqrvUgI3-60ZPHn1_sWuUg2vKa7_WKDN-aiTMBtXcJX-7IGzEAoNp9gm4h8PvY0kKprp6juZ2r1ZDuEyaE7Y7Erv-x6K3aHFjaSt2RhZRz5_zXP0WYdeLRHVgqC2o34H3yHtgwQRrH2hnnDuLQzpVQmkscvFqGwABsDx1SjxGv8c8PYGghHw3hpx6iwV31g","UiLocales":null,"Nonce":"636947953504742129.ZmM0ODZmZDctMmQxMy00ZTFmLWJkMGMtM2RhNDhkMWZhMTMzNWFjOTc3MmUtMTM4ZS00ZjU2LWFlZmMtMzQ5ZjFmMmU0ZWM5","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"d2cc5d1c1ed7eea8580a1fc3647d93b5","Raw":{"client_id":"mvcImp","redirect_uri":"http://localhost:5004/signin-oidc","response_type":"id_token","scope":"openid profile","response_mode":"form_post","nonce":"636947953504742129.ZmM0ODZmZDctMmQxMy00ZTFmLWJkMGMtM2RhNDhkMWZhMTMzNWFjOTc3MmUtMTM4ZS00ZjU2LWFlZmMtMzQ5ZjFmMmU0ZWM5","state":"CfDJ8J6dQdEYr6RAjUqFr50zuTtg_72n9_5MR0uxM60Y9cMl4tXb8kvLa1ffHIe4Yd3ETSuvk2Jt-DOwFiiNRQFVIFYDPeIwo4NdDbR3WFGZiGmywXMWAL5P6s9fmxZRvIGqgXiMqrvUgI3-60ZPHn1_sWuUg2vKa7_WKDN-aiTMBtXcJX-7IGzEAoNp9gm4h8PvY0kKprp6juZ2r1ZDuEyaE7Y7Erv-x6K3aHFjaSt2RhZRz5_zXP0WYdeLRHVgqC2o34H3yHtgwQRrH2hnnDuLQzpVQmkscvFqGwABsDx1SjxGv8c8PYGghHw3hpx6iwV31g","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-05-30 14:42:33.717 +08:00 [DBG] VHwV9SWfzW/EQXuBTL6MQ//T5xXc1u82LMCGIn0Ko/U= found in database: true
2019-05-30 14:42:33.721 +08:00 [DBG] Consent found in consent store is same as current request, consent is not required
2019-05-30 14:42:33.721 +08:00 [DBG] Creating Implicit Flow response.
2019-05-30 14:42:33.721 +08:00 [DBG] Getting claims for identity token for subject: af61726e-716b-4170-8c26-6568bf294215 and client: mvcImp
2019-05-30 14:42:36.963 +08:00 [DBG] Claim types from profile service that were filtered: ["sub"]
2019-05-30 14:42:36.967 +08:00 [INF] {"ClientId":"mvcImp","ClientName":"MVC ClientImp","RedirectUri":"http://localhost:5004/signin-oidc","Endpoint":"Authorize","SubjectId":"af61726e-716b-4170-8c26-6568bf294215","Scopes":"openid profile","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****5fSg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN4P4TTNVMD:00000003","TimeStamp":"2019-05-30T06:42:36.0000000Z","ProcessId":13224,"LocalIpAddress":"127.0.0.1:45618","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-30 14:42:36.967 +08:00 [INF] Authorize endpoint response
{"SubjectId":"af61726e-716b-4170-8c26-6568bf294215","ClientId":"mvcImp","RedirectUri":"http://localhost:5004/signin-oidc","State":"CfDJ8J6dQdEYr6RAjUqFr50zuTtg_72n9_5MR0uxM60Y9cMl4tXb8kvLa1ffHIe4Yd3ETSuvk2Jt-DOwFiiNRQFVIFYDPeIwo4NdDbR3WFGZiGmywXMWAL5P6s9fmxZRvIGqgXiMqrvUgI3-60ZPHn1_sWuUg2vKa7_WKDN-aiTMBtXcJX-7IGzEAoNp9gm4h8PvY0kKprp6juZ2r1ZDuEyaE7Y7Erv-x6K3aHFjaSt2RhZRz5_zXP0WYdeLRHVgqC2o34H3yHtgwQRrH2hnnDuLQzpVQmkscvFqGwABsDx1SjxGv8c8PYGghHw3hpx6iwV31g","Scope":"openid profile","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-05-30 14:43:43.470 +08:00 [INF] {"Details":"System.NullReferenceException: Object reference not set to an instance of an object.\r\n   at IdentityServer4.Endpoints.Results.AuthorizeResult.Init(HttpContext context) in C:\\local\\identity\\server4\\IdentityServer4\\src\\Endpoints\\Results\\AuthorizeResult.cs:line 52\r\n   at IdentityServer4.Endpoints.Results.AuthorizeResult.ExecuteAsync(HttpContext context) in C:\\local\\identity\\server4\\IdentityServer4\\src\\Endpoints\\Results\\AuthorizeResult.cs:line 60\r\n   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\\local\\identity\\server4\\IdentityServer4\\src\\Hosting\\IdentityServerMiddleware.cs:line 59","Category":"Error","Name":"Unhandled Exception","EventType":"Error","Id":3000,"Message":"Object reference not set to an instance of an object.","ActivityId":"0HLN4P4TTNVMD:00000003","TimeStamp":"2019-05-30T06:43:43.0000000Z","ProcessId":13224,"LocalIpAddress":"127.0.0.1:45618","RemoteIpAddress":"::1","$type":"UnhandledExceptionEvent"}
2019-05-30 14:43:43.471 +08:00 [FTL] Unhandled exception: Object reference not set to an instance of an object.
System.NullReferenceException: Object reference not set to an instance of an object.
   at IdentityServer4.Endpoints.Results.AuthorizeResult.Init(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\Endpoints\Results\AuthorizeResult.cs:line 52
   at IdentityServer4.Endpoints.Results.AuthorizeResult.ExecuteAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\Endpoints\Results\AuthorizeResult.cs:line 60
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 59
2019-05-30 14:43:44.307 +08:00 [ERR] An unhandled exception has occurred while executing the request.
System.NullReferenceException: Object reference not set to an instance of an object.
   at IdentityServer4.Endpoints.Results.AuthorizeResult.Init(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\Endpoints\Results\AuthorizeResult.cs:line 52
   at IdentityServer4.Endpoints.Results.AuthorizeResult.ExecuteAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\Endpoints\Results\AuthorizeResult.cs:line 60
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 59
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 69
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-05-30 14:43:44.310 +08:00 [WRN] The response has already started, the error page middleware will not be executed.
2019-05-30 14:43:44.707 +08:00 [ERR] Connection id "0HLN4P4TTNVMD", Request id "0HLN4P4TTNVMD:00000003": An unhandled exception was thrown by the application.
System.NullReferenceException: Object reference not set to an instance of an object.
   at IdentityServer4.Endpoints.Results.AuthorizeResult.Init(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\Endpoints\Results\AuthorizeResult.cs:line 52
   at IdentityServer4.Endpoints.Results.AuthorizeResult.ExecuteAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\Endpoints\Results\AuthorizeResult.cs:line 60
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 59
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 69
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Server.IISIntegration.IISMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequests[TContext](IHttpApplication`1 application)
2019-05-30 14:43:46.967 +08:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-05-30 14:43:46.967 +08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-05-30 14:43:46.968 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-05-30 14:43:46.968 +08:00 [DBG] Start authorize request
2019-05-30 14:43:46.970 +08:00 [DBG] User in authorize request: af61726e-716b-4170-8c26-6568bf294215
2019-05-30 14:43:46.970 +08:00 [DBG] Start authorize request protocol validation
2019-05-30 14:43:47.985 +08:00 [DBG] mvcImp found in database: true
2019-05-30 14:43:47.985 +08:00 [DBG] client configuration validation for client mvcImp succeeded.
2019-05-30 14:43:48.166 +08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-05-30 14:43:48.288 +08:00 [DBG] Found [] API scopes in database
2019-05-30 14:43:48.479 +08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-05-30 14:43:48.823 +08:00 [DBG] Found [] API scopes in database
2019-05-30 14:43:48.823 +08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-30 14:43:48.823 +08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"mvcImp","ClientName":"MVC ClientImp","RedirectUri":"http://localhost:5004/signin-oidc","AllowedRedirectUris":["http://localhost:5004/signin-oidc"],"SubjectId":"af61726e-716b-4170-8c26-6568bf294215","ResponseType":"id_token","ResponseMode":"form_post","GrantType":"implicit","RequestedScopes":"openid profile","State":"CfDJ8J6dQdEYr6RAjUqFr50zuTtMo5jJA0GU9M58XLehFxWaV4Bdm16rKwBOjUXfqoEVE6KxVWUwJfCyy7v9BBM_pIg7Kpa3fHPR2_Ip_fWBXUu7GEIr2i95PiyyrFYqvTMDrIjWwtIv5VMbEL69P0kM0JzprZSH-ZjEF1NYT6YrMwQyLvrV3kOm5g4TKlbZLYbJMEFfld9TY27jsf5IzGeLAHUTMmxqidVAXjo_IsyZjS08p_NOoZb_PoUqL0XlyEr6rA4ZxQcLuvKpCIyJ6p-sk8Zs7qas2x1w4v4110Ob1Nr6siJTs1DHrtizzKOg-dPcvw","UiLocales":null,"Nonce":"636947954269573475.YzFlZjQyYjctZTQzZS00ZTFhLTliNTctZWRkOTE1OTdkMzU0ZGVjMzA4ZTgtYjM2MC00NjJmLWJjZDItMzYyNDgzODk5Y2Rh","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"d2cc5d1c1ed7eea8580a1fc3647d93b5","Raw":{"client_id":"mvcImp","redirect_uri":"http://localhost:5004/signin-oidc","response_type":"id_token","scope":"openid profile","response_mode":"form_post","nonce":"636947954269573475.YzFlZjQyYjctZTQzZS00ZTFhLTliNTctZWRkOTE1OTdkMzU0ZGVjMzA4ZTgtYjM2MC00NjJmLWJjZDItMzYyNDgzODk5Y2Rh","state":"CfDJ8J6dQdEYr6RAjUqFr50zuTtMo5jJA0GU9M58XLehFxWaV4Bdm16rKwBOjUXfqoEVE6KxVWUwJfCyy7v9BBM_pIg7Kpa3fHPR2_Ip_fWBXUu7GEIr2i95PiyyrFYqvTMDrIjWwtIv5VMbEL69P0kM0JzprZSH-ZjEF1NYT6YrMwQyLvrV3kOm5g4TKlbZLYbJMEFfld9TY27jsf5IzGeLAHUTMmxqidVAXjo_IsyZjS08p_NOoZb_PoUqL0XlyEr6rA4ZxQcLuvKpCIyJ6p-sk8Zs7qas2x1w4v4110Ob1Nr6siJTs1DHrtizzKOg-dPcvw","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-05-30 14:43:50.883 +08:00 [DBG] VHwV9SWfzW/EQXuBTL6MQ//T5xXc1u82LMCGIn0Ko/U= found in database: true
2019-05-30 14:43:50.887 +08:00 [DBG] Consent found in consent store is same as current request, consent is not required
2019-05-30 14:43:50.887 +08:00 [DBG] Creating Implicit Flow response.
2019-05-30 14:43:50.887 +08:00 [DBG] Getting claims for identity token for subject: af61726e-716b-4170-8c26-6568bf294215 and client: mvcImp
2019-05-30 14:43:52.732 +08:00 [DBG] Claim types from profile service that were filtered: ["sub"]
2019-05-30 14:43:52.733 +08:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-05-30 14:43:52.733 +08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-05-30 14:43:52.733 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-05-30 14:43:52.733 +08:00 [DBG] Start authorize request
2019-05-30 14:43:52.735 +08:00 [DBG] User in authorize request: af61726e-716b-4170-8c26-6568bf294215
2019-05-30 14:43:52.735 +08:00 [DBG] Start authorize request protocol validation
2019-05-30 14:43:52.736 +08:00 [INF] {"ClientId":"mvcImp","ClientName":"MVC ClientImp","RedirectUri":"http://localhost:5004/signin-oidc","Endpoint":"Authorize","SubjectId":"af61726e-716b-4170-8c26-6568bf294215","Scopes":"openid profile","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****azxQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN4P4TTNVME:00000001","TimeStamp":"2019-05-30T06:43:52.0000000Z","ProcessId":13224,"LocalIpAddress":"127.0.0.1:45618","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-30 14:43:52.736 +08:00 [INF] Authorize endpoint response
{"SubjectId":"af61726e-716b-4170-8c26-6568bf294215","ClientId":"mvcImp","RedirectUri":"http://localhost:5004/signin-oidc","State":"CfDJ8J6dQdEYr6RAjUqFr50zuTtMo5jJA0GU9M58XLehFxWaV4Bdm16rKwBOjUXfqoEVE6KxVWUwJfCyy7v9BBM_pIg7Kpa3fHPR2_Ip_fWBXUu7GEIr2i95PiyyrFYqvTMDrIjWwtIv5VMbEL69P0kM0JzprZSH-ZjEF1NYT6YrMwQyLvrV3kOm5g4TKlbZLYbJMEFfld9TY27jsf5IzGeLAHUTMmxqidVAXjo_IsyZjS08p_NOoZb_PoUqL0XlyEr6rA4ZxQcLuvKpCIyJ6p-sk8Zs7qas2x1w4v4110Ob1Nr6siJTs1DHrtizzKOg-dPcvw","Scope":"openid profile","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-05-30 14:44:20.366 +08:00 [DBG] mvcImp found in database: true
2019-05-30 14:44:20.366 +08:00 [DBG] client configuration validation for client mvcImp succeeded.
2019-05-30 14:44:24.822 +08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-05-30 14:44:25.074 +08:00 [DBG] Found [] API scopes in database
2019-05-30 14:44:25.583 +08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-05-30 14:44:25.959 +08:00 [DBG] Found [] API scopes in database
2019-05-30 14:44:25.987 +08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-30 14:44:25.988 +08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"mvcImp","ClientName":"MVC ClientImp","RedirectUri":"http://localhost:5004/signin-oidc","AllowedRedirectUris":["http://localhost:5004/signin-oidc"],"SubjectId":"af61726e-716b-4170-8c26-6568bf294215","ResponseType":"id_token","ResponseMode":"form_post","GrantType":"implicit","RequestedScopes":"openid profile","State":"CfDJ8J6dQdEYr6RAjUqFr50zuTtMo5jJA0GU9M58XLehFxWaV4Bdm16rKwBOjUXfqoEVE6KxVWUwJfCyy7v9BBM_pIg7Kpa3fHPR2_Ip_fWBXUu7GEIr2i95PiyyrFYqvTMDrIjWwtIv5VMbEL69P0kM0JzprZSH-ZjEF1NYT6YrMwQyLvrV3kOm5g4TKlbZLYbJMEFfld9TY27jsf5IzGeLAHUTMmxqidVAXjo_IsyZjS08p_NOoZb_PoUqL0XlyEr6rA4ZxQcLuvKpCIyJ6p-sk8Zs7qas2x1w4v4110Ob1Nr6siJTs1DHrtizzKOg-dPcvw","UiLocales":null,"Nonce":"636947954269573475.YzFlZjQyYjctZTQzZS00ZTFhLTliNTctZWRkOTE1OTdkMzU0ZGVjMzA4ZTgtYjM2MC00NjJmLWJjZDItMzYyNDgzODk5Y2Rh","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"d2cc5d1c1ed7eea8580a1fc3647d93b5","Raw":{"client_id":"mvcImp","redirect_uri":"http://localhost:5004/signin-oidc","response_type":"id_token","scope":"openid profile","response_mode":"form_post","nonce":"636947954269573475.YzFlZjQyYjctZTQzZS00ZTFhLTliNTctZWRkOTE1OTdkMzU0ZGVjMzA4ZTgtYjM2MC00NjJmLWJjZDItMzYyNDgzODk5Y2Rh","state":"CfDJ8J6dQdEYr6RAjUqFr50zuTtMo5jJA0GU9M58XLehFxWaV4Bdm16rKwBOjUXfqoEVE6KxVWUwJfCyy7v9BBM_pIg7Kpa3fHPR2_Ip_fWBXUu7GEIr2i95PiyyrFYqvTMDrIjWwtIv5VMbEL69P0kM0JzprZSH-ZjEF1NYT6YrMwQyLvrV3kOm5g4TKlbZLYbJMEFfld9TY27jsf5IzGeLAHUTMmxqidVAXjo_IsyZjS08p_NOoZb_PoUqL0XlyEr6rA4ZxQcLuvKpCIyJ6p-sk8Zs7qas2x1w4v4110Ob1Nr6siJTs1DHrtizzKOg-dPcvw","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-05-30 14:45:15.717 +08:00 [DBG] VHwV9SWfzW/EQXuBTL6MQ//T5xXc1u82LMCGIn0Ko/U= found in database: true
2019-05-30 14:45:15.747 +08:00 [DBG] Consent found in consent store is same as current request, consent is not required
2019-05-30 14:45:31.709 +08:00 [DBG] Creating Implicit Flow response.
2019-05-30 14:45:31.711 +08:00 [DBG] Getting claims for identity token for subject: af61726e-716b-4170-8c26-6568bf294215 and client: mvcImp
2019-05-30 14:45:39.603 +08:00 [DBG] Claim types from profile service that were filtered: ["sub"]
2019-05-30 14:45:39.674 +08:00 [INF] {"ClientId":"mvcImp","ClientName":"MVC ClientImp","RedirectUri":"http://localhost:5004/signin-oidc","Endpoint":"Authorize","SubjectId":"af61726e-716b-4170-8c26-6568bf294215","Scopes":"openid profile","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****DSoQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN4P4TTNVMF:00000001","TimeStamp":"2019-05-30T06:45:39.0000000Z","ProcessId":13224,"LocalIpAddress":"127.0.0.1:45618","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-30 14:45:39.692 +08:00 [INF] Authorize endpoint response
{"SubjectId":"af61726e-716b-4170-8c26-6568bf294215","ClientId":"mvcImp","RedirectUri":"http://localhost:5004/signin-oidc","State":"CfDJ8J6dQdEYr6RAjUqFr50zuTtMo5jJA0GU9M58XLehFxWaV4Bdm16rKwBOjUXfqoEVE6KxVWUwJfCyy7v9BBM_pIg7Kpa3fHPR2_Ip_fWBXUu7GEIr2i95PiyyrFYqvTMDrIjWwtIv5VMbEL69P0kM0JzprZSH-ZjEF1NYT6YrMwQyLvrV3kOm5g4TKlbZLYbJMEFfld9TY27jsf5IzGeLAHUTMmxqidVAXjo_IsyZjS08p_NOoZb_PoUqL0XlyEr6rA4ZxQcLuvKpCIyJ6p-sk8Zs7qas2x1w4v4110Ob1Nr6siJTs1DHrtizzKOg-dPcvw","Scope":"openid profile","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-05-30 15:14:52.402 +08:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-05-30 15:14:52.402 +08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-05-30 15:14:52.403 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-05-30 15:14:52.403 +08:00 [DBG] Start authorize request
2019-05-30 15:14:52.403 +08:00 [DBG] User in authorize request: af61726e-716b-4170-8c26-6568bf294215
2019-05-30 15:14:52.403 +08:00 [DBG] Start authorize request protocol validation
2019-05-30 15:14:53.402 +08:00 [DBG] mvcImp found in database: true
2019-05-30 15:14:53.402 +08:00 [DBG] client configuration validation for client mvcImp succeeded.
2019-05-30 15:14:53.592 +08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-05-30 15:14:53.716 +08:00 [DBG] Found [] API scopes in database
2019-05-30 15:14:53.916 +08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-05-30 15:14:54.038 +08:00 [DBG] Found [] API scopes in database
2019-05-30 15:14:54.038 +08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-30 15:14:54.038 +08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"mvcImp","ClientName":"MVC ClientImp","RedirectUri":"http://localhost:5004/signin-oidc","AllowedRedirectUris":["http://localhost:5004/signin-oidc"],"SubjectId":"af61726e-716b-4170-8c26-6568bf294215","ResponseType":"id_token","ResponseMode":"form_post","GrantType":"implicit","RequestedScopes":"openid profile","State":"CfDJ8J6dQdEYr6RAjUqFr50zuTtRwid5KBmoqRnUe_gFTSQqvwJvXdg7XYLtxR6W4C0n_-oRLF23gkIJyfJf78UDIZjxh5sIAjTVnG4SrtjTrsZCOy_M8Y8i7a65tgwtzXEpUaVffmD61fFh5MIi6LhjmPj2bowOJSpmtq7KS03Js5Nrw7jEBouFVo8thzHuFxZsI7pdTZdn5LkCDv_Dr1MBKAbTQoxw24ohhmE6VXQGaRXFPFuoSunMH3Ze_dOm-R2wqwADCW3Kuu8zflL2OCr5cfuj5kh_R8S6MIdV-TxUFQSrVMy3T9MN12ezbS83xheo0Q","UiLocales":null,"Nonce":"636947972914318653.ZTQxOGFkMzYtODU3YS00ZDk1LTg1YTktYmRmYjQ1MmFmY2UzNGQ2M2UwMzYtZWUwZi00YTlkLTk3NDEtZjRmNzQ0YmRhN2M3","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"d2cc5d1c1ed7eea8580a1fc3647d93b5","Raw":{"client_id":"mvcImp","redirect_uri":"http://localhost:5004/signin-oidc","response_type":"id_token","scope":"openid profile","response_mode":"form_post","nonce":"636947972914318653.ZTQxOGFkMzYtODU3YS00ZDk1LTg1YTktYmRmYjQ1MmFmY2UzNGQ2M2UwMzYtZWUwZi00YTlkLTk3NDEtZjRmNzQ0YmRhN2M3","state":"CfDJ8J6dQdEYr6RAjUqFr50zuTtRwid5KBmoqRnUe_gFTSQqvwJvXdg7XYLtxR6W4C0n_-oRLF23gkIJyfJf78UDIZjxh5sIAjTVnG4SrtjTrsZCOy_M8Y8i7a65tgwtzXEpUaVffmD61fFh5MIi6LhjmPj2bowOJSpmtq7KS03Js5Nrw7jEBouFVo8thzHuFxZsI7pdTZdn5LkCDv_Dr1MBKAbTQoxw24ohhmE6VXQGaRXFPFuoSunMH3Ze_dOm-R2wqwADCW3Kuu8zflL2OCr5cfuj5kh_R8S6MIdV-TxUFQSrVMy3T9MN12ezbS83xheo0Q","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-05-30 15:14:56.584 +08:00 [DBG] VHwV9SWfzW/EQXuBTL6MQ//T5xXc1u82LMCGIn0Ko/U= found in database: true
2019-05-30 15:14:56.588 +08:00 [DBG] Consent found in consent store is same as current request, consent is not required
2019-05-30 15:14:56.588 +08:00 [DBG] Creating Implicit Flow response.
2019-05-30 15:14:56.588 +08:00 [DBG] Getting claims for identity token for subject: af61726e-716b-4170-8c26-6568bf294215 and client: mvcImp
2019-05-30 15:15:04.871 +08:00 [DBG] Claim types from profile service that were filtered: ["sub"]
2019-05-30 15:15:04.887 +08:00 [INF] {"ClientId":"mvcImp","ClientName":"MVC ClientImp","RedirectUri":"http://localhost:5004/signin-oidc","Endpoint":"Authorize","SubjectId":"af61726e-716b-4170-8c26-6568bf294215","Scopes":"openid profile","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****Y-hA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN4P4TTNVMF:00000002","TimeStamp":"2019-05-30T07:15:04.0000000Z","ProcessId":13224,"LocalIpAddress":"127.0.0.1:45618","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-30 15:15:04.887 +08:00 [INF] Authorize endpoint response
{"SubjectId":"af61726e-716b-4170-8c26-6568bf294215","ClientId":"mvcImp","RedirectUri":"http://localhost:5004/signin-oidc","State":"CfDJ8J6dQdEYr6RAjUqFr50zuTtRwid5KBmoqRnUe_gFTSQqvwJvXdg7XYLtxR6W4C0n_-oRLF23gkIJyfJf78UDIZjxh5sIAjTVnG4SrtjTrsZCOy_M8Y8i7a65tgwtzXEpUaVffmD61fFh5MIi6LhjmPj2bowOJSpmtq7KS03Js5Nrw7jEBouFVo8thzHuFxZsI7pdTZdn5LkCDv_Dr1MBKAbTQoxw24ohhmE6VXQGaRXFPFuoSunMH3Ze_dOm-R2wqwADCW3Kuu8zflL2OCr5cfuj5kh_R8S6MIdV-TxUFQSrVMy3T9MN12ezbS83xheo0Q","Scope":"openid profile","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-05-30 15:15:48.185 +08:00 [ERR] An error occurred using the connection to database 'IndentityCenter' on server '129.204.217.190'.
MySql.Data.MySqlClient.MySqlException (0x80004005): Connect Timeout expired. ---> System.Threading.Tasks.TaskCanceledException: A task was canceled.
   at MySqlConnector.Core.ServerSession.TryResetConnectionAsync(ConnectionSettings cs, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ServerSession.cs:line 398
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 72
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 141
   at MySql.Data.MySqlClient.MySqlConnection.CreateSessionAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 431
   at MySql.Data.MySqlClient.MySqlConnection.CreateSessionAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 447
   at MySql.Data.MySqlClient.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 175
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
2019-05-30 15:16:14.051 +08:00 [ERR] An exception occurred in the database while iterating the results of a query for context type 'IdentityCenter.Data.ApplicationDbContext'.
MySql.Data.MySqlClient.MySqlException (0x80004005): Connect Timeout expired. ---> System.Threading.Tasks.TaskCanceledException: A task was canceled.
   at MySqlConnector.Core.ServerSession.TryResetConnectionAsync(ConnectionSettings cs, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ServerSession.cs:line 398
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 72
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 141
   at MySql.Data.MySqlClient.MySqlConnection.CreateSessionAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 431
   at MySql.Data.MySqlClient.MySqlConnection.CreateSessionAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 447
   at MySql.Data.MySqlClient.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 175
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.BufferlessMoveNext(DbContext _, Boolean buffer, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.MoveNext(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext(CancellationToken cancellationToken)
MySql.Data.MySqlClient.MySqlException (0x80004005): Connect Timeout expired. ---> System.Threading.Tasks.TaskCanceledException: A task was canceled.
   at MySqlConnector.Core.ServerSession.TryResetConnectionAsync(ConnectionSettings cs, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ServerSession.cs:line 398
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 72
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 141
   at MySql.Data.MySqlClient.MySqlConnection.CreateSessionAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 431
   at MySql.Data.MySqlClient.MySqlConnection.CreateSessionAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 447
   at MySql.Data.MySqlClient.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 175
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.BufferlessMoveNext(DbContext _, Boolean buffer, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.MoveNext(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext(CancellationToken cancellationToken)
2019-05-30 15:16:38.526 +08:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-05-30 15:16:38.526 +08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-05-30 15:16:38.526 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-05-30 15:16:38.526 +08:00 [DBG] Start authorize request
2019-05-30 15:16:38.527 +08:00 [DBG] User in authorize request: af61726e-716b-4170-8c26-6568bf294215
2019-05-30 15:16:38.527 +08:00 [DBG] Start authorize request protocol validation
2019-05-30 15:16:40.032 +08:00 [DBG] mvcImp found in database: true
2019-05-30 15:16:40.032 +08:00 [DBG] client configuration validation for client mvcImp succeeded.
2019-05-30 15:16:40.216 +08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-05-30 15:16:40.330 +08:00 [DBG] Found [] API scopes in database
2019-05-30 15:16:40.568 +08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-05-30 15:16:40.681 +08:00 [DBG] Found [] API scopes in database
2019-05-30 15:16:40.682 +08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-30 15:16:40.682 +08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"mvcImp","ClientName":"MVC ClientImp","RedirectUri":"http://localhost:5004/signin-oidc","AllowedRedirectUris":["http://localhost:5004/signin-oidc"],"SubjectId":"af61726e-716b-4170-8c26-6568bf294215","ResponseType":"id_token","ResponseMode":"form_post","GrantType":"implicit","RequestedScopes":"openid profile","State":"CfDJ8J6dQdEYr6RAjUqFr50zuTtuoFSYn3q9K00nZOWm3Zi0-zdhJHHSgQ_jK9PSYpIdbdQSOsXlBMKHhLz4TRs8xe3NGHey8X-TRFx-RZRiVQJ-cPWTogKMj2AcPNpCn6gKN5yBI5IBTjZ4vr-igkn6HSJejSJIhshxjl5rLJaZTe3DJSZflAeSL-wBX31UvD4JeS0oHj6dBXWqcWbmBGdFJQFTnlCHX7rD39WBkt_x91yJvrVgrPI7rR5PpI9-rwbCCOz9TmmRhyTN_eYQ4S4Gv1Y8TZS9KXx670xlF_949Tjw5A22KzjY1-YbT7shymmKPA","UiLocales":null,"Nonce":"636947973981503330.NjJmNGM2NzgtYTg1Ny00YzkxLWEyMjgtOWNlODY5NWNiZGY2MDlmMDhjN2EtMzFlOS00NmVlLWJmZDQtMzljOWRmMzhlMzRj","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"d2cc5d1c1ed7eea8580a1fc3647d93b5","Raw":{"client_id":"mvcImp","redirect_uri":"http://localhost:5004/signin-oidc","response_type":"id_token","scope":"openid profile","response_mode":"form_post","nonce":"636947973981503330.NjJmNGM2NzgtYTg1Ny00YzkxLWEyMjgtOWNlODY5NWNiZGY2MDlmMDhjN2EtMzFlOS00NmVlLWJmZDQtMzljOWRmMzhlMzRj","state":"CfDJ8J6dQdEYr6RAjUqFr50zuTtuoFSYn3q9K00nZOWm3Zi0-zdhJHHSgQ_jK9PSYpIdbdQSOsXlBMKHhLz4TRs8xe3NGHey8X-TRFx-RZRiVQJ-cPWTogKMj2AcPNpCn6gKN5yBI5IBTjZ4vr-igkn6HSJejSJIhshxjl5rLJaZTe3DJSZflAeSL-wBX31UvD4JeS0oHj6dBXWqcWbmBGdFJQFTnlCHX7rD39WBkt_x91yJvrVgrPI7rR5PpI9-rwbCCOz9TmmRhyTN_eYQ4S4Gv1Y8TZS9KXx670xlF_949Tjw5A22KzjY1-YbT7shymmKPA","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-05-30 15:16:43.142 +08:00 [DBG] VHwV9SWfzW/EQXuBTL6MQ//T5xXc1u82LMCGIn0Ko/U= found in database: true
2019-05-30 15:16:43.145 +08:00 [DBG] Consent found in consent store is same as current request, consent is not required
2019-05-30 15:16:43.145 +08:00 [DBG] Creating Implicit Flow response.
2019-05-30 15:16:43.146 +08:00 [DBG] Getting claims for identity token for subject: af61726e-716b-4170-8c26-6568bf294215 and client: mvcImp
2019-05-30 15:16:45.011 +08:00 [DBG] Claim types from profile service that were filtered: ["sub"]
2019-05-30 15:16:45.014 +08:00 [INF] {"ClientId":"mvcImp","ClientName":"MVC ClientImp","RedirectUri":"http://localhost:5004/signin-oidc","Endpoint":"Authorize","SubjectId":"af61726e-716b-4170-8c26-6568bf294215","Scopes":"openid profile","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****3h_w","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN4P4TTNVMG:00000002","TimeStamp":"2019-05-30T07:16:45.0000000Z","ProcessId":13224,"LocalIpAddress":"127.0.0.1:45618","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-30 15:16:45.017 +08:00 [INF] Authorize endpoint response
{"SubjectId":"af61726e-716b-4170-8c26-6568bf294215","ClientId":"mvcImp","RedirectUri":"http://localhost:5004/signin-oidc","State":"CfDJ8J6dQdEYr6RAjUqFr50zuTtuoFSYn3q9K00nZOWm3Zi0-zdhJHHSgQ_jK9PSYpIdbdQSOsXlBMKHhLz4TRs8xe3NGHey8X-TRFx-RZRiVQJ-cPWTogKMj2AcPNpCn6gKN5yBI5IBTjZ4vr-igkn6HSJejSJIhshxjl5rLJaZTe3DJSZflAeSL-wBX31UvD4JeS0oHj6dBXWqcWbmBGdFJQFTnlCHX7rD39WBkt_x91yJvrVgrPI7rR5PpI9-rwbCCOz9TmmRhyTN_eYQ4S4Gv1Y8TZS9KXx670xlF_949Tjw5A22KzjY1-YbT7shymmKPA","Scope":"openid profile","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-05-30 15:17:22.089 +08:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-05-30 15:17:22.090 +08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-05-30 15:17:22.090 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-05-30 15:17:22.090 +08:00 [DBG] Start authorize request
2019-05-30 15:17:22.090 +08:00 [DBG] User in authorize request: af61726e-716b-4170-8c26-6568bf294215
2019-05-30 15:17:22.090 +08:00 [DBG] Start authorize request protocol validation
2019-05-30 15:17:23.276 +08:00 [DBG] mvcImp found in database: true
2019-05-30 15:17:23.276 +08:00 [DBG] client configuration validation for client mvcImp succeeded.
2019-05-30 15:17:23.496 +08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-05-30 15:17:23.619 +08:00 [DBG] Found [] API scopes in database
2019-05-30 15:17:23.843 +08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-05-30 15:17:23.967 +08:00 [DBG] Found [] API scopes in database
2019-05-30 15:17:23.968 +08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-30 15:17:23.968 +08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"mvcImp","ClientName":"MVC ClientImp","RedirectUri":"http://localhost:5004/signin-oidc","AllowedRedirectUris":["http://localhost:5004/signin-oidc"],"SubjectId":"af61726e-716b-4170-8c26-6568bf294215","ResponseType":"id_token","ResponseMode":"form_post","GrantType":"implicit","RequestedScopes":"openid profile","State":"CfDJ8J6dQdEYr6RAjUqFr50zuTuXGMQgrrOq3P1In7YTV7_-jl5NB2YxmEMc3AZ7JRZLKwWGmjDOWL13Bkw0ShpdibMrKOeYR4n2dpdg19yR_y4XrZVxIODwvREwpmE_99yEfoQ0ksebmmx16m7pD5zH7SYHk2foEx_qI5V64sx8IT2jOunvXAQudSWgAgEeffVtP93P04lV_meoJ4f-4VNAxwmwTrtTizJ_8jk6R_1FP4KsXpRHIW3KlLNLQdKFTIWZcXuBvQElxqQiA6PEX-hTRumQ8GQEQr3C4Itdd7bSYRA22UTo60dzunqp7LT7as_LDw","UiLocales":null,"Nonce":"636947974420705386.NWY4MWNkOGQtNDljOS00OTRhLWExNzAtODcyZmM1NTI4Yzc5Y2VkM2JkNWEtNzQ3Zi00OGY3LTg5NDEtMGU5ZGRjMDcxNjU5","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"d2cc5d1c1ed7eea8580a1fc3647d93b5","Raw":{"client_id":"mvcImp","redirect_uri":"http://localhost:5004/signin-oidc","response_type":"id_token","scope":"openid profile","response_mode":"form_post","nonce":"636947974420705386.NWY4MWNkOGQtNDljOS00OTRhLWExNzAtODcyZmM1NTI4Yzc5Y2VkM2JkNWEtNzQ3Zi00OGY3LTg5NDEtMGU5ZGRjMDcxNjU5","state":"CfDJ8J6dQdEYr6RAjUqFr50zuTuXGMQgrrOq3P1In7YTV7_-jl5NB2YxmEMc3AZ7JRZLKwWGmjDOWL13Bkw0ShpdibMrKOeYR4n2dpdg19yR_y4XrZVxIODwvREwpmE_99yEfoQ0ksebmmx16m7pD5zH7SYHk2foEx_qI5V64sx8IT2jOunvXAQudSWgAgEeffVtP93P04lV_meoJ4f-4VNAxwmwTrtTizJ_8jk6R_1FP4KsXpRHIW3KlLNLQdKFTIWZcXuBvQElxqQiA6PEX-hTRumQ8GQEQr3C4Itdd7bSYRA22UTo60dzunqp7LT7as_LDw","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-05-30 15:17:25.535 +08:00 [DBG] VHwV9SWfzW/EQXuBTL6MQ//T5xXc1u82LMCGIn0Ko/U= found in database: true
2019-05-30 15:17:25.539 +08:00 [DBG] Consent found in consent store is same as current request, consent is not required
2019-05-30 15:17:25.539 +08:00 [DBG] Creating Implicit Flow response.
2019-05-30 15:17:25.539 +08:00 [DBG] Getting claims for identity token for subject: af61726e-716b-4170-8c26-6568bf294215 and client: mvcImp
2019-05-30 15:17:26.931 +08:00 [DBG] Claim types from profile service that were filtered: ["sub"]
2019-05-30 15:17:26.934 +08:00 [INF] {"ClientId":"mvcImp","ClientName":"MVC ClientImp","RedirectUri":"http://localhost:5004/signin-oidc","Endpoint":"Authorize","SubjectId":"af61726e-716b-4170-8c26-6568bf294215","Scopes":"openid profile","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****h-GA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN4P4TTNVMG:00000003","TimeStamp":"2019-05-30T07:17:26.0000000Z","ProcessId":13224,"LocalIpAddress":"127.0.0.1:45618","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-30 15:17:26.935 +08:00 [INF] Authorize endpoint response
{"SubjectId":"af61726e-716b-4170-8c26-6568bf294215","ClientId":"mvcImp","RedirectUri":"http://localhost:5004/signin-oidc","State":"CfDJ8J6dQdEYr6RAjUqFr50zuTuXGMQgrrOq3P1In7YTV7_-jl5NB2YxmEMc3AZ7JRZLKwWGmjDOWL13Bkw0ShpdibMrKOeYR4n2dpdg19yR_y4XrZVxIODwvREwpmE_99yEfoQ0ksebmmx16m7pD5zH7SYHk2foEx_qI5V64sx8IT2jOunvXAQudSWgAgEeffVtP93P04lV_meoJ4f-4VNAxwmwTrtTizJ_8jk6R_1FP4KsXpRHIW3KlLNLQdKFTIWZcXuBvQElxqQiA6PEX-hTRumQ8GQEQr3C4Itdd7bSYRA22UTo60dzunqp7LT7as_LDw","Scope":"openid profile","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-05-30 15:17:47.883 +08:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-05-30 15:17:47.883 +08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-05-30 15:17:47.884 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-05-30 15:17:47.884 +08:00 [DBG] Start authorize request
2019-05-30 15:17:47.884 +08:00 [DBG] User in authorize request: af61726e-716b-4170-8c26-6568bf294215
2019-05-30 15:17:47.884 +08:00 [DBG] Start authorize request protocol validation
2019-05-30 15:17:48.875 +08:00 [DBG] mvcImp found in database: true
2019-05-30 15:17:48.875 +08:00 [DBG] client configuration validation for client mvcImp succeeded.
2019-05-30 15:17:49.046 +08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-05-30 15:17:49.148 +08:00 [DBG] Found [] API scopes in database
2019-05-30 15:17:49.330 +08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-05-30 15:17:49.445 +08:00 [DBG] Found [] API scopes in database
2019-05-30 15:17:49.445 +08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-30 15:17:49.445 +08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"mvcImp","ClientName":"MVC ClientImp","RedirectUri":"http://localhost:5004/signin-oidc","AllowedRedirectUris":["http://localhost:5004/signin-oidc"],"SubjectId":"af61726e-716b-4170-8c26-6568bf294215","ResponseType":"id_token","ResponseMode":"form_post","GrantType":"implicit","RequestedScopes":"openid profile","State":"CfDJ8J6dQdEYr6RAjUqFr50zuTsg80gYRBreD8VRsM7rI7La_doTTmLNclHggRUrGnYCCd_F4EYULz6KhS17HBU7t1SnIUPv1HuX72aHzgqpIp8bkwkzXVCcYynLnly3EG0LASz6kn-Jy5gz6M3uuzmLBZl4JDaAgfOezHfxPu1kF1SMsm4iFWZk2Ps4BuPEMAMGGqCfEGyc8qEBCuxoksqjUCwFlGk89tQfobPVQwHojWe-eAE1ZpFdeqtornQldg4rDeg5Gf3wCWWF38ir5qoWYaiX700oc0a4xE97rX7FI3qb3bGzmGxqL_Jhr9QA8KtgcQ","UiLocales":null,"Nonce":"636947974648633641.YmQwODE2ODctZjQ2MS00MmMwLWIwMzgtMmFiYTQzNWJjMGQzMDk1ZWQzYWMtYjE0Ni00ODU3LWEyNmUtMDg5MzNhMmVlODc2","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"d2cc5d1c1ed7eea8580a1fc3647d93b5","Raw":{"client_id":"mvcImp","redirect_uri":"http://localhost:5004/signin-oidc","response_type":"id_token","scope":"openid profile","response_mode":"form_post","nonce":"636947974648633641.YmQwODE2ODctZjQ2MS00MmMwLWIwMzgtMmFiYTQzNWJjMGQzMDk1ZWQzYWMtYjE0Ni00ODU3LWEyNmUtMDg5MzNhMmVlODc2","state":"CfDJ8J6dQdEYr6RAjUqFr50zuTsg80gYRBreD8VRsM7rI7La_doTTmLNclHggRUrGnYCCd_F4EYULz6KhS17HBU7t1SnIUPv1HuX72aHzgqpIp8bkwkzXVCcYynLnly3EG0LASz6kn-Jy5gz6M3uuzmLBZl4JDaAgfOezHfxPu1kF1SMsm4iFWZk2Ps4BuPEMAMGGqCfEGyc8qEBCuxoksqjUCwFlGk89tQfobPVQwHojWe-eAE1ZpFdeqtornQldg4rDeg5Gf3wCWWF38ir5qoWYaiX700oc0a4xE97rX7FI3qb3bGzmGxqL_Jhr9QA8KtgcQ","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-05-30 15:17:51.341 +08:00 [DBG] VHwV9SWfzW/EQXuBTL6MQ//T5xXc1u82LMCGIn0Ko/U= found in database: true
2019-05-30 15:17:51.345 +08:00 [DBG] Consent found in consent store is same as current request, consent is not required
2019-05-30 15:17:51.346 +08:00 [DBG] Creating Implicit Flow response.
2019-05-30 15:17:51.346 +08:00 [DBG] Getting claims for identity token for subject: af61726e-716b-4170-8c26-6568bf294215 and client: mvcImp
2019-05-30 15:17:53.332 +08:00 [DBG] Claim types from profile service that were filtered: ["sub"]
2019-05-30 15:17:53.336 +08:00 [INF] {"ClientId":"mvcImp","ClientName":"MVC ClientImp","RedirectUri":"http://localhost:5004/signin-oidc","Endpoint":"Authorize","SubjectId":"af61726e-716b-4170-8c26-6568bf294215","Scopes":"openid profile","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****NLkA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN4P4TTNVMH:00000001","TimeStamp":"2019-05-30T07:17:53.0000000Z","ProcessId":13224,"LocalIpAddress":"127.0.0.1:45618","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-30 15:17:53.336 +08:00 [INF] Authorize endpoint response
{"SubjectId":"af61726e-716b-4170-8c26-6568bf294215","ClientId":"mvcImp","RedirectUri":"http://localhost:5004/signin-oidc","State":"CfDJ8J6dQdEYr6RAjUqFr50zuTsg80gYRBreD8VRsM7rI7La_doTTmLNclHggRUrGnYCCd_F4EYULz6KhS17HBU7t1SnIUPv1HuX72aHzgqpIp8bkwkzXVCcYynLnly3EG0LASz6kn-Jy5gz6M3uuzmLBZl4JDaAgfOezHfxPu1kF1SMsm4iFWZk2Ps4BuPEMAMGGqCfEGyc8qEBCuxoksqjUCwFlGk89tQfobPVQwHojWe-eAE1ZpFdeqtornQldg4rDeg5Gf3wCWWF38ir5qoWYaiX700oc0a4xE97rX7FI3qb3bGzmGxqL_Jhr9QA8KtgcQ","Scope":"openid profile","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-05-30 15:19:48.553 +08:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-05-30 15:19:48.565 +08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-05-30 15:19:48.574 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-05-30 15:19:48.575 +08:00 [DBG] Start authorize request
2019-05-30 15:19:48.584 +08:00 [DBG] User in authorize request: af61726e-716b-4170-8c26-6568bf294215
2019-05-30 15:19:48.591 +08:00 [DBG] Start authorize request protocol validation
2019-05-30 15:19:49.646 +08:00 [DBG] mvcImp found in database: true
2019-05-30 15:19:49.646 +08:00 [DBG] client configuration validation for client mvcImp succeeded.
2019-05-30 15:19:49.851 +08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-05-30 15:19:49.965 +08:00 [DBG] Found [] API scopes in database
2019-05-30 15:19:50.148 +08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-05-30 15:19:50.262 +08:00 [DBG] Found [] API scopes in database
2019-05-30 15:19:50.262 +08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-30 15:19:50.262 +08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"mvcImp","ClientName":"MVC ClientImp","RedirectUri":"http://localhost:5004/signin-oidc","AllowedRedirectUris":["http://localhost:5004/signin-oidc"],"SubjectId":"af61726e-716b-4170-8c26-6568bf294215","ResponseType":"id_token","ResponseMode":"form_post","GrantType":"implicit","RequestedScopes":"openid profile","State":"CfDJ8J6dQdEYr6RAjUqFr50zuTstHT9HFTVhH-3-PxQxEgMq6bqgXU3YLTTAOoZXcrYOhc8M_Jh_BPDfYGsWxY49OdovBO_z_yIDuetLuMPB_8VxTNZF9AcT4RUkHF5ixP1-YXxGPKpRkDal05ahliyLWjPi3kyK1vgWl5_BNEgHKm8XRo6ZVJJ4sdQYwadN5-7xF48X2JNvd8MZ71TYDtXF7Z3QJPhPxzfHFW31uuWASN_AGWlUZga7NhZ77-Jo5bwD936QjpppsdeH2Bv6oCOL4gz7UALsgTrS_Npebk5mJsaleetG4eiE0QZVSpAcCDKJrw","UiLocales":null,"Nonce":"636947975884530552.YWRiNmUzZDQtMzcwYS00YmVmLWIxNWItMjVjY2QwODI5NTg3NzMzYTdlODktMGY4MC00YjgwLWE3YzgtMmZkMzM0NjE2NWZk","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"d2cc5d1c1ed7eea8580a1fc3647d93b5","Raw":{"client_id":"mvcImp","redirect_uri":"http://localhost:5004/signin-oidc","response_type":"id_token","scope":"openid profile","response_mode":"form_post","nonce":"636947975884530552.YWRiNmUzZDQtMzcwYS00YmVmLWIxNWItMjVjY2QwODI5NTg3NzMzYTdlODktMGY4MC00YjgwLWE3YzgtMmZkMzM0NjE2NWZk","state":"CfDJ8J6dQdEYr6RAjUqFr50zuTstHT9HFTVhH-3-PxQxEgMq6bqgXU3YLTTAOoZXcrYOhc8M_Jh_BPDfYGsWxY49OdovBO_z_yIDuetLuMPB_8VxTNZF9AcT4RUkHF5ixP1-YXxGPKpRkDal05ahliyLWjPi3kyK1vgWl5_BNEgHKm8XRo6ZVJJ4sdQYwadN5-7xF48X2JNvd8MZ71TYDtXF7Z3QJPhPxzfHFW31uuWASN_AGWlUZga7NhZ77-Jo5bwD936QjpppsdeH2Bv6oCOL4gz7UALsgTrS_Npebk5mJsaleetG4eiE0QZVSpAcCDKJrw","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-05-30 15:19:53.751 +08:00 [DBG] VHwV9SWfzW/EQXuBTL6MQ//T5xXc1u82LMCGIn0Ko/U= found in database: true
2019-05-30 15:19:53.755 +08:00 [DBG] Consent found in consent store is same as current request, consent is not required
2019-05-30 15:19:53.755 +08:00 [DBG] Creating Implicit Flow response.
2019-05-30 15:19:53.755 +08:00 [DBG] Getting claims for identity token for subject: af61726e-716b-4170-8c26-6568bf294215 and client: mvcImp
2019-05-30 15:19:55.446 +08:00 [DBG] Claim types from profile service that were filtered: ["sub"]
2019-05-30 15:19:55.450 +08:00 [INF] {"ClientId":"mvcImp","ClientName":"MVC ClientImp","RedirectUri":"http://localhost:5004/signin-oidc","Endpoint":"Authorize","SubjectId":"af61726e-716b-4170-8c26-6568bf294215","Scopes":"openid profile","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****fWwg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN4P4TTNVMH:00000002","TimeStamp":"2019-05-30T07:19:55.0000000Z","ProcessId":13224,"LocalIpAddress":"127.0.0.1:45618","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-30 15:19:55.450 +08:00 [INF] Authorize endpoint response
{"SubjectId":"af61726e-716b-4170-8c26-6568bf294215","ClientId":"mvcImp","RedirectUri":"http://localhost:5004/signin-oidc","State":"CfDJ8J6dQdEYr6RAjUqFr50zuTstHT9HFTVhH-3-PxQxEgMq6bqgXU3YLTTAOoZXcrYOhc8M_Jh_BPDfYGsWxY49OdovBO_z_yIDuetLuMPB_8VxTNZF9AcT4RUkHF5ixP1-YXxGPKpRkDal05ahliyLWjPi3kyK1vgWl5_BNEgHKm8XRo6ZVJJ4sdQYwadN5-7xF48X2JNvd8MZ71TYDtXF7Z3QJPhPxzfHFW31uuWASN_AGWlUZga7NhZ77-Jo5bwD936QjpppsdeH2Bv6oCOL4gz7UALsgTrS_Npebk5mJsaleetG4eiE0QZVSpAcCDKJrw","Scope":"openid profile","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-05-30 15:20:38.670 +08:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-05-30 15:20:38.672 +08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-05-30 15:20:38.672 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-05-30 15:20:38.673 +08:00 [DBG] Start authorize request
2019-05-30 15:20:38.673 +08:00 [DBG] User in authorize request: af61726e-716b-4170-8c26-6568bf294215
2019-05-30 15:20:38.675 +08:00 [DBG] Start authorize request protocol validation
2019-05-30 15:20:39.802 +08:00 [DBG] mvcImp found in database: true
2019-05-30 15:20:39.802 +08:00 [DBG] client configuration validation for client mvcImp succeeded.
2019-05-30 15:20:40.012 +08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-05-30 15:20:40.123 +08:00 [DBG] Found [] API scopes in database
2019-05-30 15:20:40.317 +08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-05-30 15:20:40.420 +08:00 [DBG] Found [] API scopes in database
2019-05-30 15:20:40.420 +08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-30 15:20:40.421 +08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"mvcImp","ClientName":"MVC ClientImp","RedirectUri":"http://localhost:5004/signin-oidc","AllowedRedirectUris":["http://localhost:5004/signin-oidc"],"SubjectId":"af61726e-716b-4170-8c26-6568bf294215","ResponseType":"id_token","ResponseMode":"form_post","GrantType":"implicit","RequestedScopes":"openid profile","State":"CfDJ8J6dQdEYr6RAjUqFr50zuTvzsSsLCY8tE3x5A0-gYp05l1NmbDEyqM78NGePYD3j7gZm-t_4ZOVgRHT2Gs785tja20HBoJtZ2HjfpHcWLrE9fM_DbfFOdztIcRlZTbbigSP3QKV0VJR4hSuo10KJ5Q-sYqDRgz4-e1U7Z7C4sRKsuzxaYi22abw1nOCcmSsV9kozwZ60LoulCkgtTFoT4Wc8fbPylqcnVK8hVF98uh7AYQk1RFm7d94G8v-Ao3UknsSO-lc0yOrijvXztTvfUCh0lj8GR1AnaiqjPobT7VY8QOG0pYwTEpiW2mLIRWbm5Q","UiLocales":null,"Nonce":"636947976386541184.MjZjYzRhMDUtNjNkMC00M2RlLTkyNmUtNTJiNjk5OTdkZDFmNTY1YjdmNDMtMzZkNi00NzVkLTk3OWQtYjZkMzg3MzA2OGU1","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"d2cc5d1c1ed7eea8580a1fc3647d93b5","Raw":{"client_id":"mvcImp","redirect_uri":"http://localhost:5004/signin-oidc","response_type":"id_token","scope":"openid profile","response_mode":"form_post","nonce":"636947976386541184.MjZjYzRhMDUtNjNkMC00M2RlLTkyNmUtNTJiNjk5OTdkZDFmNTY1YjdmNDMtMzZkNi00NzVkLTk3OWQtYjZkMzg3MzA2OGU1","state":"CfDJ8J6dQdEYr6RAjUqFr50zuTvzsSsLCY8tE3x5A0-gYp05l1NmbDEyqM78NGePYD3j7gZm-t_4ZOVgRHT2Gs785tja20HBoJtZ2HjfpHcWLrE9fM_DbfFOdztIcRlZTbbigSP3QKV0VJR4hSuo10KJ5Q-sYqDRgz4-e1U7Z7C4sRKsuzxaYi22abw1nOCcmSsV9kozwZ60LoulCkgtTFoT4Wc8fbPylqcnVK8hVF98uh7AYQk1RFm7d94G8v-Ao3UknsSO-lc0yOrijvXztTvfUCh0lj8GR1AnaiqjPobT7VY8QOG0pYwTEpiW2mLIRWbm5Q","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-05-30 15:20:46.500 +08:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-05-30 15:20:47.877 +08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-05-30 15:20:47.877 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-05-30 15:20:47.877 +08:00 [DBG] Start authorize request
2019-05-30 15:20:47.878 +08:00 [DBG] User in authorize request: af61726e-716b-4170-8c26-6568bf294215
2019-05-30 15:20:47.878 +08:00 [DBG] Start authorize request protocol validation
2019-05-30 15:20:48.112 +08:00 [DBG] VHwV9SWfzW/EQXuBTL6MQ//T5xXc1u82LMCGIn0Ko/U= found in database: true
2019-05-30 15:20:48.116 +08:00 [DBG] Consent found in consent store is same as current request, consent is not required
2019-05-30 15:20:48.116 +08:00 [DBG] Creating Implicit Flow response.
2019-05-30 15:20:48.116 +08:00 [DBG] Getting claims for identity token for subject: af61726e-716b-4170-8c26-6568bf294215 and client: mvcImp
2019-05-30 15:20:55.470 +08:00 [DBG] Claim types from profile service that were filtered: ["sub"]
2019-05-30 15:20:55.475 +08:00 [INF] {"ClientId":"mvcImp","ClientName":"MVC ClientImp","RedirectUri":"http://localhost:5004/signin-oidc","Endpoint":"Authorize","SubjectId":"af61726e-716b-4170-8c26-6568bf294215","Scopes":"openid profile","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****uZcg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN4P4TTNVMH:00000003","TimeStamp":"2019-05-30T07:20:55.0000000Z","ProcessId":13224,"LocalIpAddress":"127.0.0.1:45618","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-30 15:20:55.475 +08:00 [INF] Authorize endpoint response
{"SubjectId":"af61726e-716b-4170-8c26-6568bf294215","ClientId":"mvcImp","RedirectUri":"http://localhost:5004/signin-oidc","State":"CfDJ8J6dQdEYr6RAjUqFr50zuTvzsSsLCY8tE3x5A0-gYp05l1NmbDEyqM78NGePYD3j7gZm-t_4ZOVgRHT2Gs785tja20HBoJtZ2HjfpHcWLrE9fM_DbfFOdztIcRlZTbbigSP3QKV0VJR4hSuo10KJ5Q-sYqDRgz4-e1U7Z7C4sRKsuzxaYi22abw1nOCcmSsV9kozwZ60LoulCkgtTFoT4Wc8fbPylqcnVK8hVF98uh7AYQk1RFm7d94G8v-Ao3UknsSO-lc0yOrijvXztTvfUCh0lj8GR1AnaiqjPobT7VY8QOG0pYwTEpiW2mLIRWbm5Q","Scope":"openid profile","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-05-30 15:21:02.888 +08:00 [DBG] mvcImp found in database: true
2019-05-30 15:21:02.888 +08:00 [DBG] client configuration validation for client mvcImp succeeded.
2019-05-30 15:21:03.073 +08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-05-30 15:21:03.176 +08:00 [DBG] Found [] API scopes in database
2019-05-30 15:21:03.348 +08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-05-30 15:21:03.451 +08:00 [DBG] Found [] API scopes in database
2019-05-30 15:21:03.451 +08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-30 15:21:03.452 +08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"mvcImp","ClientName":"MVC ClientImp","RedirectUri":"http://localhost:5004/signin-oidc","AllowedRedirectUris":["http://localhost:5004/signin-oidc"],"SubjectId":"af61726e-716b-4170-8c26-6568bf294215","ResponseType":"id_token","ResponseMode":"form_post","GrantType":"implicit","RequestedScopes":"openid profile","State":"CfDJ8J6dQdEYr6RAjUqFr50zuTvzsSsLCY8tE3x5A0-gYp05l1NmbDEyqM78NGePYD3j7gZm-t_4ZOVgRHT2Gs785tja20HBoJtZ2HjfpHcWLrE9fM_DbfFOdztIcRlZTbbigSP3QKV0VJR4hSuo10KJ5Q-sYqDRgz4-e1U7Z7C4sRKsuzxaYi22abw1nOCcmSsV9kozwZ60LoulCkgtTFoT4Wc8fbPylqcnVK8hVF98uh7AYQk1RFm7d94G8v-Ao3UknsSO-lc0yOrijvXztTvfUCh0lj8GR1AnaiqjPobT7VY8QOG0pYwTEpiW2mLIRWbm5Q","UiLocales":null,"Nonce":"636947976386541184.MjZjYzRhMDUtNjNkMC00M2RlLTkyNmUtNTJiNjk5OTdkZDFmNTY1YjdmNDMtMzZkNi00NzVkLTk3OWQtYjZkMzg3MzA2OGU1","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"d2cc5d1c1ed7eea8580a1fc3647d93b5","Raw":{"client_id":"mvcImp","redirect_uri":"http://localhost:5004/signin-oidc","response_type":"id_token","scope":"openid profile","response_mode":"form_post","nonce":"636947976386541184.MjZjYzRhMDUtNjNkMC00M2RlLTkyNmUtNTJiNjk5OTdkZDFmNTY1YjdmNDMtMzZkNi00NzVkLTk3OWQtYjZkMzg3MzA2OGU1","state":"CfDJ8J6dQdEYr6RAjUqFr50zuTvzsSsLCY8tE3x5A0-gYp05l1NmbDEyqM78NGePYD3j7gZm-t_4ZOVgRHT2Gs785tja20HBoJtZ2HjfpHcWLrE9fM_DbfFOdztIcRlZTbbigSP3QKV0VJR4hSuo10KJ5Q-sYqDRgz4-e1U7Z7C4sRKsuzxaYi22abw1nOCcmSsV9kozwZ60LoulCkgtTFoT4Wc8fbPylqcnVK8hVF98uh7AYQk1RFm7d94G8v-Ao3UknsSO-lc0yOrijvXztTvfUCh0lj8GR1AnaiqjPobT7VY8QOG0pYwTEpiW2mLIRWbm5Q","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-05-30 15:21:09.416 +08:00 [DBG] VHwV9SWfzW/EQXuBTL6MQ//T5xXc1u82LMCGIn0Ko/U= found in database: true
2019-05-30 15:21:09.420 +08:00 [DBG] Consent found in consent store is same as current request, consent is not required
2019-05-30 15:21:09.420 +08:00 [DBG] Creating Implicit Flow response.
2019-05-30 15:21:09.420 +08:00 [DBG] Getting claims for identity token for subject: af61726e-716b-4170-8c26-6568bf294215 and client: mvcImp
2019-05-30 15:21:11.308 +08:00 [DBG] Claim types from profile service that were filtered: ["sub"]
2019-05-30 15:21:11.314 +08:00 [INF] {"ClientId":"mvcImp","ClientName":"MVC ClientImp","RedirectUri":"http://localhost:5004/signin-oidc","Endpoint":"Authorize","SubjectId":"af61726e-716b-4170-8c26-6568bf294215","Scopes":"openid profile","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****6F0A","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN4P4TTNVMI:00000001","TimeStamp":"2019-05-30T07:21:11.0000000Z","ProcessId":13224,"LocalIpAddress":"127.0.0.1:45618","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-30 15:21:11.315 +08:00 [INF] Authorize endpoint response
{"SubjectId":"af61726e-716b-4170-8c26-6568bf294215","ClientId":"mvcImp","RedirectUri":"http://localhost:5004/signin-oidc","State":"CfDJ8J6dQdEYr6RAjUqFr50zuTvzsSsLCY8tE3x5A0-gYp05l1NmbDEyqM78NGePYD3j7gZm-t_4ZOVgRHT2Gs785tja20HBoJtZ2HjfpHcWLrE9fM_DbfFOdztIcRlZTbbigSP3QKV0VJR4hSuo10KJ5Q-sYqDRgz4-e1U7Z7C4sRKsuzxaYi22abw1nOCcmSsV9kozwZ60LoulCkgtTFoT4Wc8fbPylqcnVK8hVF98uh7AYQk1RFm7d94G8v-Ao3UknsSO-lc0yOrijvXztTvfUCh0lj8GR1AnaiqjPobT7VY8QOG0pYwTEpiW2mLIRWbm5Q","Scope":"openid profile","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-05-30 15:21:36.878 +08:00 [INF] {"Details":"System.NullReferenceException: Object reference not set to an instance of an object.\r\n   at IdentityServer4.Services.DefaultUserSession.AddClientIdAsync(String clientId) in C:\\local\\identity\\server4\\IdentityServer4\\src\\Services\\Default\\DefaultUserSession.cs:line 259\r\n   at IdentityServer4.Endpoints.Results.AuthorizeResult.ProcessResponseAsync(HttpContext context) in C:\\local\\identity\\server4\\IdentityServer4\\src\\Endpoints\\Results\\AuthorizeResult.cs:line 101\r\n   at IdentityServer4.Endpoints.Results.AuthorizeResult.ExecuteAsync(HttpContext context) in C:\\local\\identity\\server4\\IdentityServer4\\src\\Endpoints\\Results\\AuthorizeResult.cs:line 68\r\n   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\\local\\identity\\server4\\IdentityServer4\\src\\Hosting\\IdentityServerMiddleware.cs:line 59","Category":"Error","Name":"Unhandled Exception","EventType":"Error","Id":3000,"Message":"Object reference not set to an instance of an object.","ActivityId":"0HLN4P4TTNVMI:00000001","TimeStamp":"2019-05-30T07:21:36.0000000Z","ProcessId":13224,"LocalIpAddress":"127.0.0.1:45618","RemoteIpAddress":"::1","$type":"UnhandledExceptionEvent"}
2019-05-30 15:21:36.879 +08:00 [FTL] Unhandled exception: Object reference not set to an instance of an object.
System.NullReferenceException: Object reference not set to an instance of an object.
   at IdentityServer4.Services.DefaultUserSession.AddClientIdAsync(String clientId) in C:\local\identity\server4\IdentityServer4\src\Services\Default\DefaultUserSession.cs:line 259
   at IdentityServer4.Endpoints.Results.AuthorizeResult.ProcessResponseAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\Endpoints\Results\AuthorizeResult.cs:line 101
   at IdentityServer4.Endpoints.Results.AuthorizeResult.ExecuteAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\Endpoints\Results\AuthorizeResult.cs:line 68
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 59
2019-05-30 15:21:37.745 +08:00 [ERR] An unhandled exception has occurred while executing the request.
System.NullReferenceException: Object reference not set to an instance of an object.
   at IdentityServer4.Services.DefaultUserSession.AddClientIdAsync(String clientId) in C:\local\identity\server4\IdentityServer4\src\Services\Default\DefaultUserSession.cs:line 259
   at IdentityServer4.Endpoints.Results.AuthorizeResult.ProcessResponseAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\Endpoints\Results\AuthorizeResult.cs:line 101
   at IdentityServer4.Endpoints.Results.AuthorizeResult.ExecuteAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\Endpoints\Results\AuthorizeResult.cs:line 68
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 59
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 69
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-05-30 15:21:46.826 +08:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-05-30 15:21:46.829 +08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-05-30 15:21:46.829 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-05-30 15:21:46.829 +08:00 [DBG] Start authorize request
2019-05-30 15:21:46.829 +08:00 [DBG] User in authorize request: af61726e-716b-4170-8c26-6568bf294215
2019-05-30 15:21:46.829 +08:00 [DBG] Start authorize request protocol validation
2019-05-30 15:21:47.861 +08:00 [DBG] mvcImp found in database: true
2019-05-30 15:21:47.861 +08:00 [DBG] client configuration validation for client mvcImp succeeded.
2019-05-30 15:21:48.041 +08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-05-30 15:21:48.153 +08:00 [DBG] Found [] API scopes in database
2019-05-30 15:21:48.328 +08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-05-30 15:21:48.443 +08:00 [DBG] Found [] API scopes in database
2019-05-30 15:21:48.443 +08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-30 15:21:48.443 +08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"mvcImp","ClientName":"MVC ClientImp","RedirectUri":"http://localhost:5004/signin-oidc","AllowedRedirectUris":["http://localhost:5004/signin-oidc"],"SubjectId":"af61726e-716b-4170-8c26-6568bf294215","ResponseType":"id_token","ResponseMode":"form_post","GrantType":"implicit","RequestedScopes":"openid profile","State":"CfDJ8J6dQdEYr6RAjUqFr50zuTtCXdZ_dnGayV426XJK2sLtGlfrG4TtB72qgRG42oph3Y6t8oLMTZJh01xPP-MYK8tm8pTc-scywXowFJhQiZ1HfFUQP_3K-u5Sc2_bclVTZGxjpTYlw-QMiSKNzetppwOuzlDJnqvl1boug93ugl4EEx7Z2qu427YR2GqhxX7XifxOLjRDgRaSrvGOV7e2aiLR2Z_289PDxC2qPX-_qhGEsivE6H8XRVc22hjQFIJOSjHi03p_GxFiB_swVbEJO6LqkaSsrMacpGNOl-EtXgshyYmrtEHfDDOrivhrUiK38Q","UiLocales":null,"Nonce":"636947977068171881.YWJlN2E5ZDgtMDk1Yi00NTM4LTk5MzItZGI3ZjhiN2NkMWZkNWFkNDY2NmQtNzAwZC00OTEzLThhMzYtZmIwNjM0NWIwZWIw","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"d2cc5d1c1ed7eea8580a1fc3647d93b5","Raw":{"client_id":"mvcImp","redirect_uri":"http://localhost:5004/signin-oidc","response_type":"id_token","scope":"openid profile","response_mode":"form_post","nonce":"636947977068171881.YWJlN2E5ZDgtMDk1Yi00NTM4LTk5MzItZGI3ZjhiN2NkMWZkNWFkNDY2NmQtNzAwZC00OTEzLThhMzYtZmIwNjM0NWIwZWIw","state":"CfDJ8J6dQdEYr6RAjUqFr50zuTtCXdZ_dnGayV426XJK2sLtGlfrG4TtB72qgRG42oph3Y6t8oLMTZJh01xPP-MYK8tm8pTc-scywXowFJhQiZ1HfFUQP_3K-u5Sc2_bclVTZGxjpTYlw-QMiSKNzetppwOuzlDJnqvl1boug93ugl4EEx7Z2qu427YR2GqhxX7XifxOLjRDgRaSrvGOV7e2aiLR2Z_289PDxC2qPX-_qhGEsivE6H8XRVc22hjQFIJOSjHi03p_GxFiB_swVbEJO6LqkaSsrMacpGNOl-EtXgshyYmrtEHfDDOrivhrUiK38Q","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-05-30 15:21:51.191 +08:00 [DBG] VHwV9SWfzW/EQXuBTL6MQ//T5xXc1u82LMCGIn0Ko/U= found in database: true
2019-05-30 15:21:51.195 +08:00 [DBG] Consent found in consent store is same as current request, consent is not required
2019-05-30 15:21:51.195 +08:00 [DBG] Creating Implicit Flow response.
2019-05-30 15:21:51.196 +08:00 [DBG] Getting claims for identity token for subject: af61726e-716b-4170-8c26-6568bf294215 and client: mvcImp
2019-05-30 15:21:53.128 +08:00 [DBG] Claim types from profile service that were filtered: ["sub"]
2019-05-30 15:21:53.132 +08:00 [INF] {"ClientId":"mvcImp","ClientName":"MVC ClientImp","RedirectUri":"http://localhost:5004/signin-oidc","Endpoint":"Authorize","SubjectId":"af61726e-716b-4170-8c26-6568bf294215","Scopes":"openid profile","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****UTng","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN4P4TTNVMI:00000002","TimeStamp":"2019-05-30T07:21:53.0000000Z","ProcessId":13224,"LocalIpAddress":"127.0.0.1:45618","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-30 15:21:53.132 +08:00 [INF] Authorize endpoint response
{"SubjectId":"af61726e-716b-4170-8c26-6568bf294215","ClientId":"mvcImp","RedirectUri":"http://localhost:5004/signin-oidc","State":"CfDJ8J6dQdEYr6RAjUqFr50zuTtCXdZ_dnGayV426XJK2sLtGlfrG4TtB72qgRG42oph3Y6t8oLMTZJh01xPP-MYK8tm8pTc-scywXowFJhQiZ1HfFUQP_3K-u5Sc2_bclVTZGxjpTYlw-QMiSKNzetppwOuzlDJnqvl1boug93ugl4EEx7Z2qu427YR2GqhxX7XifxOLjRDgRaSrvGOV7e2aiLR2Z_289PDxC2qPX-_qhGEsivE6H8XRVc22hjQFIJOSjHi03p_GxFiB_swVbEJO6LqkaSsrMacpGNOl-EtXgshyYmrtEHfDDOrivhrUiK38Q","Scope":"openid profile","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-05-30 15:22:49.439 +08:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-05-30 15:22:49.440 +08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-05-30 15:22:49.440 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-05-30 15:22:49.440 +08:00 [DBG] Start authorize request
2019-05-30 15:22:49.440 +08:00 [DBG] User in authorize request: af61726e-716b-4170-8c26-6568bf294215
2019-05-30 15:22:49.440 +08:00 [DBG] Start authorize request protocol validation
2019-05-30 15:22:50.504 +08:00 [DBG] mvcImp found in database: true
2019-05-30 15:22:50.505 +08:00 [DBG] client configuration validation for client mvcImp succeeded.
2019-05-30 15:22:50.732 +08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-05-30 15:22:50.844 +08:00 [DBG] Found [] API scopes in database
2019-05-30 15:22:51.048 +08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-05-30 15:22:51.152 +08:00 [DBG] Found [] API scopes in database
2019-05-30 15:22:51.152 +08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-30 15:22:51.152 +08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"mvcImp","ClientName":"MVC ClientImp","RedirectUri":"http://localhost:5004/signin-oidc","AllowedRedirectUris":["http://localhost:5004/signin-oidc"],"SubjectId":"af61726e-716b-4170-8c26-6568bf294215","ResponseType":"id_token","ResponseMode":"form_post","GrantType":"implicit","RequestedScopes":"openid profile","State":"CfDJ8J6dQdEYr6RAjUqFr50zuTtrE0g0ApmqSNH1GCtkma8ncsH7jO48wN9CHd-ThSnn8q7H6Lp4wKrP04aOyBYDKdBlvUkTgHWw3Iyx71F1fMDgl6jnPHFQKvwdBkqYDgaYeFXX6RT9TPA-erxoGtbhe2DhohmhucDLfyB9u95ID5b2h-WfF0oXaDj8nzgQxudblVo5F7job9RH0dom32SHpLoYqwRH6i3hCta6y67z9dSWpCjayYiKS4m1moX92N0mX7dChVcja44er9yVUSCCBE6KZ4mUx-uiTy8FH53WjdzE6PgqSIm38yG8rBFfdTn1Gg","UiLocales":null,"Nonce":"636947977694293205.Nzc0OTJjNmItOWIxYy00NmUyLTkwNGUtOGYxM2Y4MjgyNTI2YWYyZDI0OTUtMmNmZC00MjBjLWFlMTQtOTU0ZWFkNzcyMGI1","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"d2cc5d1c1ed7eea8580a1fc3647d93b5","Raw":{"client_id":"mvcImp","redirect_uri":"http://localhost:5004/signin-oidc","response_type":"id_token","scope":"openid profile","response_mode":"form_post","nonce":"636947977694293205.Nzc0OTJjNmItOWIxYy00NmUyLTkwNGUtOGYxM2Y4MjgyNTI2YWYyZDI0OTUtMmNmZC00MjBjLWFlMTQtOTU0ZWFkNzcyMGI1","state":"CfDJ8J6dQdEYr6RAjUqFr50zuTtrE0g0ApmqSNH1GCtkma8ncsH7jO48wN9CHd-ThSnn8q7H6Lp4wKrP04aOyBYDKdBlvUkTgHWw3Iyx71F1fMDgl6jnPHFQKvwdBkqYDgaYeFXX6RT9TPA-erxoGtbhe2DhohmhucDLfyB9u95ID5b2h-WfF0oXaDj8nzgQxudblVo5F7job9RH0dom32SHpLoYqwRH6i3hCta6y67z9dSWpCjayYiKS4m1moX92N0mX7dChVcja44er9yVUSCCBE6KZ4mUx-uiTy8FH53WjdzE6PgqSIm38yG8rBFfdTn1Gg","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-05-30 15:22:54.448 +08:00 [DBG] VHwV9SWfzW/EQXuBTL6MQ//T5xXc1u82LMCGIn0Ko/U= found in database: true
2019-05-30 15:22:54.451 +08:00 [DBG] Consent found in consent store is same as current request, consent is not required
2019-05-30 15:22:54.452 +08:00 [DBG] Creating Implicit Flow response.
2019-05-30 15:22:54.452 +08:00 [DBG] Getting claims for identity token for subject: af61726e-716b-4170-8c26-6568bf294215 and client: mvcImp
2019-05-30 15:22:55.340 +08:00 [DBG] Claim types from profile service that were filtered: ["sub"]
2019-05-30 15:22:55.344 +08:00 [INF] {"ClientId":"mvcImp","ClientName":"MVC ClientImp","RedirectUri":"http://localhost:5004/signin-oidc","Endpoint":"Authorize","SubjectId":"af61726e-716b-4170-8c26-6568bf294215","Scopes":"openid profile","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****U9UA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN4P4TTNVMI:00000003","TimeStamp":"2019-05-30T07:22:55.0000000Z","ProcessId":13224,"LocalIpAddress":"127.0.0.1:45618","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-30 15:22:55.345 +08:00 [INF] Authorize endpoint response
{"SubjectId":"af61726e-716b-4170-8c26-6568bf294215","ClientId":"mvcImp","RedirectUri":"http://localhost:5004/signin-oidc","State":"CfDJ8J6dQdEYr6RAjUqFr50zuTtrE0g0ApmqSNH1GCtkma8ncsH7jO48wN9CHd-ThSnn8q7H6Lp4wKrP04aOyBYDKdBlvUkTgHWw3Iyx71F1fMDgl6jnPHFQKvwdBkqYDgaYeFXX6RT9TPA-erxoGtbhe2DhohmhucDLfyB9u95ID5b2h-WfF0oXaDj8nzgQxudblVo5F7job9RH0dom32SHpLoYqwRH6i3hCta6y67z9dSWpCjayYiKS4m1moX92N0mX7dChVcja44er9yVUSCCBE6KZ4mUx-uiTy8FH53WjdzE6PgqSIm38yG8rBFfdTn1Gg","Scope":"openid profile","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-05-30 15:23:40.022 +08:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-05-30 15:23:40.022 +08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-05-30 15:23:40.023 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-05-30 15:23:40.023 +08:00 [DBG] Start authorize request
2019-05-30 15:23:40.024 +08:00 [DBG] User in authorize request: af61726e-716b-4170-8c26-6568bf294215
2019-05-30 15:23:40.024 +08:00 [DBG] Start authorize request protocol validation
2019-05-30 15:23:41.090 +08:00 [DBG] mvcImp found in database: true
2019-05-30 15:23:41.090 +08:00 [DBG] client configuration validation for client mvcImp succeeded.
2019-05-30 15:23:41.285 +08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-05-30 15:23:41.399 +08:00 [DBG] Found [] API scopes in database
2019-05-30 15:23:41.607 +08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-05-30 15:23:41.719 +08:00 [DBG] Found [] API scopes in database
2019-05-30 15:23:41.719 +08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-30 15:23:41.719 +08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"mvcImp","ClientName":"MVC ClientImp","RedirectUri":"http://localhost:5004/signin-oidc","AllowedRedirectUris":["http://localhost:5004/signin-oidc"],"SubjectId":"af61726e-716b-4170-8c26-6568bf294215","ResponseType":"id_token","ResponseMode":"form_post","GrantType":"implicit","RequestedScopes":"openid profile","State":"CfDJ8J6dQdEYr6RAjUqFr50zuTspLMZ-48IHhue_n39sNIwUaEMUWKtn52c2ZYlvaYwdhNXRntzlxY-C3qM62FjedNRIWWxoTojc5IJKm1c7UTyQ9F7tsde8V7JPWrYiH90CBLr3IRy5MrA6ZEPZgkeJnV6ZVgpAT586keuw1ptZpKOeI8ynD9IE1WzcaTlcQm2xWtfONieLnDwvC7VagrTtKQZteXnii8AL-6tbYdZoA9Z158mmjliQXW3R6Vzc9l4wmjLm4gGsIhI51IN6XQ9_YiLgCS-fsFiznAdSjH62A5l8ERel46U50Bos6gCv8W1TGw","UiLocales":null,"Nonce":"636947978200045053.MDdlZmIwYzktN2JmOS00YzQyLTkzYzItN2Q2MmVmMTUwNGQzN2FiZTExNzEtNWE0Yy00ZmUxLWFmYmMtNzU2YjQ1Y2FjNGM1","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"d2cc5d1c1ed7eea8580a1fc3647d93b5","Raw":{"client_id":"mvcImp","redirect_uri":"http://localhost:5004/signin-oidc","response_type":"id_token","scope":"openid profile","response_mode":"form_post","nonce":"636947978200045053.MDdlZmIwYzktN2JmOS00YzQyLTkzYzItN2Q2MmVmMTUwNGQzN2FiZTExNzEtNWE0Yy00ZmUxLWFmYmMtNzU2YjQ1Y2FjNGM1","state":"CfDJ8J6dQdEYr6RAjUqFr50zuTspLMZ-48IHhue_n39sNIwUaEMUWKtn52c2ZYlvaYwdhNXRntzlxY-C3qM62FjedNRIWWxoTojc5IJKm1c7UTyQ9F7tsde8V7JPWrYiH90CBLr3IRy5MrA6ZEPZgkeJnV6ZVgpAT586keuw1ptZpKOeI8ynD9IE1WzcaTlcQm2xWtfONieLnDwvC7VagrTtKQZteXnii8AL-6tbYdZoA9Z158mmjliQXW3R6Vzc9l4wmjLm4gGsIhI51IN6XQ9_YiLgCS-fsFiznAdSjH62A5l8ERel46U50Bos6gCv8W1TGw","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-05-30 15:23:43.640 +08:00 [DBG] VHwV9SWfzW/EQXuBTL6MQ//T5xXc1u82LMCGIn0Ko/U= found in database: true
2019-05-30 15:23:43.644 +08:00 [DBG] Consent found in consent store is same as current request, consent is not required
2019-05-30 15:23:43.644 +08:00 [DBG] Creating Implicit Flow response.
2019-05-30 15:23:43.644 +08:00 [DBG] Getting claims for identity token for subject: af61726e-716b-4170-8c26-6568bf294215 and client: mvcImp
2019-05-30 15:23:44.608 +08:00 [DBG] Claim types from profile service that were filtered: ["sub"]
2019-05-30 15:23:44.613 +08:00 [INF] {"ClientId":"mvcImp","ClientName":"MVC ClientImp","RedirectUri":"http://localhost:5004/signin-oidc","Endpoint":"Authorize","SubjectId":"af61726e-716b-4170-8c26-6568bf294215","Scopes":"openid profile","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****b_iA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN4P4TTNVMI:00000004","TimeStamp":"2019-05-30T07:23:44.0000000Z","ProcessId":13224,"LocalIpAddress":"127.0.0.1:45618","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-30 15:23:44.613 +08:00 [INF] Authorize endpoint response
{"SubjectId":"af61726e-716b-4170-8c26-6568bf294215","ClientId":"mvcImp","RedirectUri":"http://localhost:5004/signin-oidc","State":"CfDJ8J6dQdEYr6RAjUqFr50zuTspLMZ-48IHhue_n39sNIwUaEMUWKtn52c2ZYlvaYwdhNXRntzlxY-C3qM62FjedNRIWWxoTojc5IJKm1c7UTyQ9F7tsde8V7JPWrYiH90CBLr3IRy5MrA6ZEPZgkeJnV6ZVgpAT586keuw1ptZpKOeI8ynD9IE1WzcaTlcQm2xWtfONieLnDwvC7VagrTtKQZteXnii8AL-6tbYdZoA9Z158mmjliQXW3R6Vzc9l4wmjLm4gGsIhI51IN6XQ9_YiLgCS-fsFiznAdSjH62A5l8ERel46U50Bos6gCv8W1TGw","Scope":"openid profile","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-05-30 15:24:47.453 +08:00 [WRN] Connection processing ended abnormally.
Microsoft.AspNetCore.Connections.ConnectionAbortedException: The connection was aborted
   at System.IO.Pipelines.PipeCompletion.ThrowLatchedException()
   at System.IO.Pipelines.Pipe.GetReadResult(ReadResult& result)
   at System.IO.Pipelines.Pipe.GetReadAsyncResult()
   at System.IO.Pipelines.Pipe.DefaultPipeReader.GetResult(Int16 token)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequests[TContext](IHttpApplication`1 application)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequestsAsync[TContext](IHttpApplication`1 application)
2019-05-30 16:21:40.329 +08:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-05-30 16:21:40.360 +08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-05-30 16:21:40.360 +08:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-05-30 16:21:40.363 +08:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-05-30 16:21:40.363 +08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-05-30 16:21:40.364 +08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-05-30 16:21:40.779 +08:00 [DBG] Starting grant removal
2019-05-30 16:21:41.057 +08:00 [DBG] Login Url: /Account/Login
2019-05-30 16:21:41.060 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-05-30 16:21:41.060 +08:00 [DBG] Logout Url: /Account/Logout
2019-05-30 16:21:41.060 +08:00 [DBG] ConsentUrl Url: /consent
2019-05-30 16:21:41.060 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2019-05-30 16:21:41.060 +08:00 [DBG] Error Url: /home/error
2019-05-30 16:21:41.060 +08:00 [DBG] Error Id Parameter: errorId
2019-05-30 16:22:09.861 +08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-05-30 16:22:09.866 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-05-30 16:22:09.866 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-05-30 16:22:09.870 +08:00 [DBG] Start discovery request
2019-05-30 16:22:10.947 +08:00 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-05-30 16:22:46.358 +08:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-05-30 16:22:46.362 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-05-30 16:22:46.363 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-05-30 16:22:46.366 +08:00 [DBG] Start key discovery request
2019-05-30 16:22:47.289 +08:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-05-30 16:22:47.293 +08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-05-30 16:22:47.293 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-05-30 16:22:47.299 +08:00 [DBG] Start authorize request
2019-05-30 16:22:47.312 +08:00 [DBG] User in authorize request: af61726e-716b-4170-8c26-6568bf294215
2019-05-30 16:22:47.318 +08:00 [DBG] Start authorize request protocol validation
2019-05-30 16:22:48.712 +08:00 [DBG] mvcImp found in database: true
2019-05-30 16:22:48.721 +08:00 [DBG] client configuration validation for client mvcImp succeeded.
2019-05-30 16:22:48.986 +08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-05-30 16:22:49.148 +08:00 [DBG] Found [] API scopes in database
2019-05-30 16:22:49.369 +08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-05-30 16:22:49.501 +08:00 [DBG] Found [] API scopes in database
2019-05-30 16:22:49.508 +08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-30 16:22:49.523 +08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"mvcImp","ClientName":"MVC ClientImp","RedirectUri":"http://localhost:5004/signin-oidc","AllowedRedirectUris":["http://localhost:5004/signin-oidc"],"SubjectId":"af61726e-716b-4170-8c26-6568bf294215","ResponseType":"id_token","ResponseMode":"form_post","GrantType":"implicit","RequestedScopes":"openid profile","State":"CfDJ8J6dQdEYr6RAjUqFr50zuTtSwzCllJedc7T9HKVABPgUKitrv5zuw18acJce9QM0j6UL55FEUjxg9gwtKuWFbkoETaO4NCxVS6I4GdnIEsq1oQOfYoPqxvHvTW3QwXwoN-30X8SPrdiQckEyi11jwvXgXOgxeQI-CwGT5eRVKMQop7wQnUGhNmNTxu42b2kM3YegdZNLQtXeMsd_0lY7DDkg74UeHH3-FrozM9ONXUfjfYf5kG9vGcG-gqJdvCG8ibtFtKOGbRqVQKq0V6X5iuZecxZy7brOgthcJ43u_KewqzuU_bVF8wem-P0tnA-Zyg","UiLocales":null,"Nonce":"636948013672125853.MDUwODM4YWItM2U3NS00Mzc5LThkMTYtYzA0MmZmOWFiZGE1MWQ5ZDgzMWEtN2Y3MS00OWZiLWE3MjUtNmUzMWQyZTdiZDBm","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"d2cc5d1c1ed7eea8580a1fc3647d93b5","Raw":{"client_id":"mvcImp","redirect_uri":"http://localhost:5004/signin-oidc","response_type":"id_token","scope":"openid profile","response_mode":"form_post","nonce":"636948013672125853.MDUwODM4YWItM2U3NS00Mzc5LThkMTYtYzA0MmZmOWFiZGE1MWQ5ZDgzMWEtN2Y3MS00OWZiLWE3MjUtNmUzMWQyZTdiZDBm","state":"CfDJ8J6dQdEYr6RAjUqFr50zuTtSwzCllJedc7T9HKVABPgUKitrv5zuw18acJce9QM0j6UL55FEUjxg9gwtKuWFbkoETaO4NCxVS6I4GdnIEsq1oQOfYoPqxvHvTW3QwXwoN-30X8SPrdiQckEyi11jwvXgXOgxeQI-CwGT5eRVKMQop7wQnUGhNmNTxu42b2kM3YegdZNLQtXeMsd_0lY7DDkg74UeHH3-FrozM9ONXUfjfYf5kG9vGcG-gqJdvCG8ibtFtKOGbRqVQKq0V6X5iuZecxZy7brOgthcJ43u_KewqzuU_bVF8wem-P0tnA-Zyg","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-05-30 16:22:51.811 +08:00 [DBG] VHwV9SWfzW/EQXuBTL6MQ//T5xXc1u82LMCGIn0Ko/U= found in database: true
2019-05-30 16:22:51.817 +08:00 [DBG] Consent found in consent store is same as current request, consent is not required
2019-05-30 16:22:51.824 +08:00 [DBG] Creating Implicit Flow response.
2019-05-30 16:22:51.834 +08:00 [DBG] Getting claims for identity token for subject: af61726e-716b-4170-8c26-6568bf294215 and client: mvcImp
2019-05-30 16:22:53.942 +08:00 [DBG] Claim types from profile service that were filtered: ["sub"]
2019-05-30 16:22:54.058 +08:00 [INF] {"ClientId":"mvcImp","ClientName":"MVC ClientImp","RedirectUri":"http://localhost:5004/signin-oidc","Endpoint":"Authorize","SubjectId":"af61726e-716b-4170-8c26-6568bf294215","Scopes":"openid profile","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****m2kg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN4QVBS931E:00000004","TimeStamp":"2019-05-30T08:22:54.0000000Z","ProcessId":27560,"LocalIpAddress":"127.0.0.1:44904","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-30 16:22:54.060 +08:00 [INF] Authorize endpoint response
{"SubjectId":"af61726e-716b-4170-8c26-6568bf294215","ClientId":"mvcImp","RedirectUri":"http://localhost:5004/signin-oidc","State":"CfDJ8J6dQdEYr6RAjUqFr50zuTtSwzCllJedc7T9HKVABPgUKitrv5zuw18acJce9QM0j6UL55FEUjxg9gwtKuWFbkoETaO4NCxVS6I4GdnIEsq1oQOfYoPqxvHvTW3QwXwoN-30X8SPrdiQckEyi11jwvXgXOgxeQI-CwGT5eRVKMQop7wQnUGhNmNTxu42b2kM3YegdZNLQtXeMsd_0lY7DDkg74UeHH3-FrozM9ONXUfjfYf5kG9vGcG-gqJdvCG8ibtFtKOGbRqVQKq0V6X5iuZecxZy7brOgthcJ43u_KewqzuU_bVF8wem-P0tnA-Zyg","Scope":"openid profile","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-05-30 16:44:10.145 +08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-05-30 16:44:10.146 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-05-30 16:44:10.146 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-05-30 16:44:10.146 +08:00 [DBG] Start discovery request
2019-05-30 16:44:11.086 +08:00 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-05-30 16:44:15.566 +08:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-05-30 16:44:15.566 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-05-30 16:44:15.566 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-05-30 16:44:15.567 +08:00 [DBG] Start key discovery request
2019-05-30 16:44:15.664 +08:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-05-30 16:44:15.664 +08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-05-30 16:44:15.664 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-05-30 16:44:15.664 +08:00 [DBG] Start authorize request
2019-05-30 16:44:15.665 +08:00 [DBG] User in authorize request: af61726e-716b-4170-8c26-6568bf294215
2019-05-30 16:44:15.665 +08:00 [DBG] Start authorize request protocol validation
2019-05-30 16:44:16.910 +08:00 [DBG] mvcImp found in database: true
2019-05-30 16:44:16.910 +08:00 [DBG] client configuration validation for client mvcImp succeeded.
2019-05-30 16:44:17.132 +08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-05-30 16:44:17.265 +08:00 [DBG] Found [] API scopes in database
2019-05-30 16:44:17.488 +08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-05-30 16:44:17.622 +08:00 [DBG] Found [] API scopes in database
2019-05-30 16:44:17.622 +08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-30 16:44:17.622 +08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"mvcImp","ClientName":"MVC ClientImp","RedirectUri":"http://localhost:5004/signin-oidc","AllowedRedirectUris":["http://localhost:5004/signin-oidc"],"SubjectId":"af61726e-716b-4170-8c26-6568bf294215","ResponseType":"id_token","ResponseMode":"form_post","GrantType":"implicit","RequestedScopes":"openid profile","State":"CfDJ8J6dQdEYr6RAjUqFr50zuTvy1VH_9HdFN7VHzUMwNvgiDjsq-M3Q5aDNMkt9HqayixIrTAc81vTWqrwjPAJXaMdr8sQk9uMvrUMrvZtw9EvAzFwN0-UPciSX3BMXzjm7YtIHa4N4pj-8uPwVCjiUbmXe_d1CEBSXsX2Nqg67tfIrFyvUnXu-dclvciHkbh6Q9c70ufdI8rq0lFa357iRuVeIHv67IXMyjM4OThsp4kNJoZ7cZcNqq59hxBoo3FQLWvDlnXcPO7S-4dx5p8fV3rGpDP6v9DwgDHRxLHVrIDcYi7xAt8-ZVizh8BOJc7e2UWjabHP9q-0O6rr139acEUQ","UiLocales":null,"Nonce":"636948026556313549.MWIwNDVmNjItMzJiMC00MGU0LWJhOTItYjJjOWUxNmRiNDY0ZDA0NDZmMjEtYjUxZi00NzYwLTgyNzMtMDE5ZDJmMzRjYjRi","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"d2cc5d1c1ed7eea8580a1fc3647d93b5","Raw":{"client_id":"mvcImp","redirect_uri":"http://localhost:5004/signin-oidc","response_type":"id_token","scope":"openid profile","response_mode":"form_post","nonce":"636948026556313549.MWIwNDVmNjItMzJiMC00MGU0LWJhOTItYjJjOWUxNmRiNDY0ZDA0NDZmMjEtYjUxZi00NzYwLTgyNzMtMDE5ZDJmMzRjYjRi","state":"CfDJ8J6dQdEYr6RAjUqFr50zuTvy1VH_9HdFN7VHzUMwNvgiDjsq-M3Q5aDNMkt9HqayixIrTAc81vTWqrwjPAJXaMdr8sQk9uMvrUMrvZtw9EvAzFwN0-UPciSX3BMXzjm7YtIHa4N4pj-8uPwVCjiUbmXe_d1CEBSXsX2Nqg67tfIrFyvUnXu-dclvciHkbh6Q9c70ufdI8rq0lFa357iRuVeIHv67IXMyjM4OThsp4kNJoZ7cZcNqq59hxBoo3FQLWvDlnXcPO7S-4dx5p8fV3rGpDP6v9DwgDHRxLHVrIDcYi7xAt8-ZVizh8BOJc7e2UWjabHP9q-0O6rr139acEUQ","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-05-30 16:44:21.332 +08:00 [DBG] VHwV9SWfzW/EQXuBTL6MQ//T5xXc1u82LMCGIn0Ko/U= found in database: true
2019-05-30 16:44:21.335 +08:00 [DBG] Consent found in consent store is same as current request, consent is not required
2019-05-30 16:44:21.335 +08:00 [DBG] Creating Implicit Flow response.
2019-05-30 16:44:21.335 +08:00 [DBG] Getting claims for identity token for subject: af61726e-716b-4170-8c26-6568bf294215 and client: mvcImp
2019-05-30 16:44:22.942 +08:00 [DBG] Claim types from profile service that were filtered: ["sub"]
2019-05-30 16:44:22.946 +08:00 [INF] {"ClientId":"mvcImp","ClientName":"MVC ClientImp","RedirectUri":"http://localhost:5004/signin-oidc","Endpoint":"Authorize","SubjectId":"af61726e-716b-4170-8c26-6568bf294215","Scopes":"openid profile","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****T1tg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN4QVBS931G:00000003","TimeStamp":"2019-05-30T08:44:22.0000000Z","ProcessId":27560,"LocalIpAddress":"127.0.0.1:44904","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-30 16:44:22.947 +08:00 [INF] Authorize endpoint response
{"SubjectId":"af61726e-716b-4170-8c26-6568bf294215","ClientId":"mvcImp","RedirectUri":"http://localhost:5004/signin-oidc","State":"CfDJ8J6dQdEYr6RAjUqFr50zuTvy1VH_9HdFN7VHzUMwNvgiDjsq-M3Q5aDNMkt9HqayixIrTAc81vTWqrwjPAJXaMdr8sQk9uMvrUMrvZtw9EvAzFwN0-UPciSX3BMXzjm7YtIHa4N4pj-8uPwVCjiUbmXe_d1CEBSXsX2Nqg67tfIrFyvUnXu-dclvciHkbh6Q9c70ufdI8rq0lFa357iRuVeIHv67IXMyjM4OThsp4kNJoZ7cZcNqq59hxBoo3FQLWvDlnXcPO7S-4dx5p8fV3rGpDP6v9DwgDHRxLHVrIDcYi7xAt8-ZVizh8BOJc7e2UWjabHP9q-0O6rr139acEUQ","Scope":"openid profile","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-05-30 18:01:32.582 +08:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-05-30 18:01:32.611 +08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-05-30 18:01:32.612 +08:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-05-30 18:01:32.612 +08:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-05-30 18:01:32.612 +08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-05-30 18:01:32.612 +08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-05-30 18:01:33.049 +08:00 [DBG] Starting grant removal
2019-05-30 18:01:33.459 +08:00 [DBG] Login Url: /Account/Login
2019-05-30 18:01:33.461 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-05-30 18:01:33.461 +08:00 [DBG] Logout Url: /Account/Logout
2019-05-30 18:01:33.462 +08:00 [DBG] ConsentUrl Url: /consent
2019-05-30 18:01:33.462 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2019-05-30 18:01:33.462 +08:00 [DBG] Error Url: /home/error
2019-05-30 18:01:33.462 +08:00 [DBG] Error Id Parameter: errorId
2019-05-30 19:01:33.431 +08:00 [INF] Removing 0 grants
2019-05-30 19:49:21.027 +08:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-05-30 19:49:21.057 +08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-05-30 19:49:21.057 +08:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-05-30 19:49:21.057 +08:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-05-30 19:49:21.058 +08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-05-30 19:49:21.058 +08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-05-30 19:49:21.506 +08:00 [DBG] Starting grant removal
2019-05-30 19:49:21.856 +08:00 [DBG] Login Url: /Account/Login
2019-05-30 19:49:21.859 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-05-30 19:49:21.860 +08:00 [DBG] Logout Url: /Account/Logout
2019-05-30 19:49:21.860 +08:00 [DBG] ConsentUrl Url: /consent
2019-05-30 19:49:21.860 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2019-05-30 19:49:21.860 +08:00 [DBG] Error Url: /home/error
2019-05-30 19:49:21.861 +08:00 [DBG] Error Id Parameter: errorId
